{"version":3,"sources":["webpack:///./src/views/Test.vue?61fe","webpack:///./src/components/ThreeDemo.vue?792c","webpack:///src/components/ThreeDemo.vue","webpack:///./src/components/ThreeDemo.vue?327c","webpack:///./src/components/ThreeDemo.vue","webpack:///src/views/Test.vue","webpack:///./src/views/Test.vue?4347","webpack:///./src/views/Test.vue","webpack:///./src/views/Ids.vue?db68","webpack:///./src/components/ThreeDemo.vue?08ea","webpack:///./src/views/Ids.vue?f948","webpack:///src/views/Ids.vue","webpack:///./src/views/Ids.vue?9c88","webpack:///./src/views/Ids.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","ref","staticClass","START_PARTICLES","CAMERA_FAR","CAMERA_FOV","SPRITE_URL","texture","load","encoding","vShader","fShader","components","renderer","camera","scene","particles","controls","particleCount","mouse","raycaster","computed","init","createControls","refreshParticles","animate","window","addEventListener","onResize","document","onDocumentMouseMove","removeEventListener","methods","antialias","canvas","$refs","three","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","outputEncoding","gammaFactor","createBaseCamera","TrackballControls","gui","add","position","step","listen","geometry","material","map","atlas","width","height","cols","rows","tile","xini","yini","tileSize","i","coords","x","y","Math","floor","z","vertices","push","faceOne","length","faceTwo","faces","xOffset","yOffset","faceVertexUvs","mesh","set","pgeometry","positions","Float32Array","offsets","sizes","offset","index","l","toArray","setAttribute","uniforms","value","repeat","pmaterial","vertexShader","fragmentShader","transparent","pointCloud","aspect","updateProjectionMatrix","requestAnimationFrame","update","event","preventDefault","clientX","clientY","component","ThreeDemo","_v","_l","bucket","key","processed","_e","attrs","on","$event","processBucket","data","downloaded","encodedData","downloadBucket","_s","name","count","Object","values","stuff","filter","s","sort","a","b","$store","commit","forEach","element","keys","join","buckets"],"mappings":"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","file":"js/home.8f41a996.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('three-demo')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{ref:\"three\",staticClass:\"three\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <canvas ref=\"three\" class=\"three\"></canvas>\n</template>\n\n<script>\nimport * as THREE from 'three'\nimport { GUI } from 'three/examples/jsm/libs/dat.gui.module.js'\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js'\n\nconst START_PARTICLES = 64\nconst CAMERA_FAR = 100000\nconst CAMERA_FOV = 60\nconst SPRITE_URL = '/medals.jpg'\nconst texture = new THREE.TextureLoader().load(SPRITE_URL)\ntexture.encoding = THREE.sRGBEncoding\n\nconst vShader = `\nattribute vec2 offset;\nattribute float size;\n\nvarying vec2 vOffset;\n\nvoid main() {\n\n    vOffset = offset;\n\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_PointSize = 64.0;\n    gl_PointSize = size * ( 256000.0 / -mvPosition.z );\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n`\n\nconst fShader = `\nuniform sampler2D texture;\nuniform vec2 repeat;\n\nvarying vec2 vOffset;\n\nvoid main() {\n\n    vec2 uv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );\n\n    vec4 tex = texture2D( texture, uv * repeat + vOffset );\n\n    if ( tex.a < 0.5 ) discard;\n\n    gl_FragColor = tex;\n\n}\n`\n\nexport default {\n  components: {},\n  data() {\n    return {\n      renderer: null,\n      camera: null,\n      scene: null,\n      particles: null,\n      controls: null,\n      particleCount: START_PARTICLES,\n      mouse: {},\n      raycaster: null\n    }\n  },\n  computed: {},\n  mounted() {\n    this.init()\n    this.createControls()\n    this.refreshParticles()\n    this.animate()\n    window.addEventListener('resize', this.onResize)\n    document.addEventListener('mousemove', this.onDocumentMouseMove)\n  },\n  beforeDestroy() {\n    // Unregister resize before destroying this Vue instance\n    window.removeEventListener('resize', this.onResize)\n    document.removeEventListener('mousemove', this.onDocumentMouseMove)\n  },\n  methods: {\n    init() {\n      this.renderer = new THREE.WebGLRenderer({\n        antialias: true,\n        canvas: this.$refs.three\n      }) // false improves the frame rate\n      this.renderer.setPixelRatio(window.devicePixelRatio)\n\n      this.renderer.setSize(window.innerWidth, window.innerHeight)\n\n      this.renderer.outputEncoding = THREE.sRGBEncoding\n      this.renderer.gammaFactor = 2.2\n\n      this.scene = new THREE.Scene()\n\n      this.raycaster = new THREE.Raycaster()\n      this.mouse = new THREE.Vector2(-1e10, -1e10)\n\n      this.camera = this.createBaseCamera()\n    },\n    createControls() {\n      this.controls = new TrackballControls(this.camera, this.$refs.three)\n\n      const gui = new GUI()\n\n      gui\n        .add(this.camera.position, 'x', 0, 100)\n        .step(1)\n        .listen()\n      gui\n        .add(this.camera.position, 'y', 0, 100)\n        .step(1)\n        .listen()\n      gui\n        .add(this.camera.position, 'z', 0, 1000)\n        .step(1)\n        .listen()\n    },\n    refreshParticles() {\n      const particleCount = this.particleCount\n      const geometry = new THREE.Geometry()\n      const material = new THREE.MeshBasicMaterial({\n        map: texture\n      })\n\n      // Identify the total number of cols & rows in the image atlas\n      const atlas = { width: 256, height: 256, cols: 8, rows: 8 }\n\n      // Identify the subimage size in px\n      const tile = {\n        width: atlas.width / atlas.cols,\n        height: atlas.width / atlas.cols\n      }\n\n      let xini = -atlas.width / 2\n      let yini = atlas.height / 2\n      const tileSize = 1 / atlas.cols\n\n      for (let i = 0; i < particleCount; i++) {\n        // Create x, y, z coords for this subimage\n        // inverted because the top-left is the first image but bottom left is the origin in webgl\n        const coords = {\n          x: xini + (i % atlas.cols) * tile.width,\n          y: yini - Math.floor(i / atlas.rows) * tile.width,\n          z: -400\n        }\n\n        geometry.vertices.push(\n          new THREE.Vector3(coords.x, coords.y, coords.z),\n          new THREE.Vector3(coords.x + tile.width, coords.y, coords.z),\n          new THREE.Vector3(\n            coords.x + tile.width,\n            coords.y + tile.height,\n            coords.z\n          ),\n          new THREE.Vector3(coords.x, coords.y + tile.height, coords.z)\n        )\n\n        // Add the first face (the lower-right triangle)\n        const faceOne = new THREE.Face3(\n          geometry.vertices.length - 4,\n          geometry.vertices.length - 3,\n          geometry.vertices.length - 2\n        )\n\n        // Add the second face (the upper-left triangle)\n        const faceTwo = new THREE.Face3(\n          geometry.vertices.length - 4,\n          geometry.vertices.length - 2,\n          geometry.vertices.length - 1\n        )\n\n        // Add those faces to the geometry\n        geometry.faces.push(faceOne, faceTwo)\n\n        // Identify this subimage's offset in the x dimension\n        // An xOffset of 0 means the subimage starts flush with\n        // the left-hand edge of the atlas\n        const xOffset = (i % atlas.rows) * tileSize\n\n        // Identify the subimage's offset in the y dimension\n        // A yOffset of 0 means the subimage starts flush with\n        // the top edge of the atlas\n        const yOffset = (atlas.rows - 1 - Math.floor(i / atlas.rows)) * tileSize\n\n        // Use the xOffset and yOffset (and the knowledge that\n        // each row and column contains only 10 images) to specify\n        // the regions of the current image\n        geometry.faceVertexUvs[0].push([\n          new THREE.Vector2(xOffset, yOffset),\n          new THREE.Vector2(xOffset + tileSize, yOffset),\n          new THREE.Vector2(xOffset + tileSize, yOffset + tileSize)\n        ])\n\n        // Map the region of the image described by the lower-left,\n        // upper-right, and upper-left vertices to `faceTwo`\n        geometry.faceVertexUvs[0].push([\n          new THREE.Vector2(xOffset, yOffset),\n          new THREE.Vector2(xOffset + tileSize, yOffset + tileSize),\n          new THREE.Vector2(xOffset, yOffset + tileSize)\n        ])\n      }\n\n      // Combine the image geometry and material into a mesh\n      const mesh = new THREE.Mesh(geometry, material)\n\n      // Set the position of the image mesh in the x,y,z dimensions\n      mesh.position.set(0, 0, 0)\n\n      // Add the image to the scene\n      this.scene.add(mesh)\n\n      // point cloud version\n\n      // geometry\n      const pgeometry = new THREE.BufferGeometry()\n\n      // attributes\n      const positions = new Float32Array(particleCount * 3) // 3 coordinates per point\n      const offsets = new Float32Array(particleCount * 2) // 2 coordinates per point\n      const sizes = new Float32Array(particleCount)\n\n      // populate offsets\n      const offset = new THREE.Vector2()\n      const position = new THREE.Vector3()\n\n      xini = 0\n      yini = atlas.height / 2 + tile.width / 2\n\n      for (let i = 0, index = 0, l = particleCount; i < l; i++, index += 2) {\n        offset.set(\n          (i % atlas.rows) * tileSize,\n          (atlas.rows - 1 - Math.floor(i / atlas.rows)) * tileSize\n        )\n\n        const x = xini + (i % atlas.cols) * tile.width\n        const y = yini - Math.floor(i / atlas.rows) * tile.width\n        const z = -400\n\n        position.set(x, y, z)\n        position.toArray(positions, i * 3)\n\n        sizes[i] = tileSize\n\n        offsets[index] = offset.x\n        offsets[index + 1] = offset.y\n      }\n\n      pgeometry.setAttribute(\n        'position',\n        new THREE.BufferAttribute(positions, 3)\n      )\n      pgeometry.setAttribute('offset', new THREE.BufferAttribute(offsets, 2))\n      pgeometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1))\n      // uniforms\n      const uniforms = {\n        texture: { value: texture },\n        repeat: { value: new THREE.Vector2(tileSize, tileSize) }\n      }\n\n      // material\n      const pmaterial = new THREE.ShaderMaterial({\n        uniforms: uniforms,\n        vertexShader: vShader,\n        fragmentShader: fShader,\n        transparent: true\n      })\n\n      // point cloud\n      const pointCloud = new THREE.Points(pgeometry, pmaterial)\n      pointCloud.position.set(atlas.width, 0, 0)\n\n      this.scene.add(pointCloud)\n    },\n    createBaseCamera() {\n      const aspect = window.innerWidth / window.innerHeight\n      const camera = new THREE.PerspectiveCamera(\n        CAMERA_FOV,\n        aspect,\n        0.1,\n        CAMERA_FAR * 10\n      )\n      camera.position.x = 0\n      camera.position.y = 0\n      camera.position.z = 10\n      camera.updateProjectionMatrix()\n      return camera\n    },\n    animate() {\n      requestAnimationFrame(this.animate)\n      this.controls.update()\n      this.render()\n    },\n    onResize() {\n      this.camera.aspect = window.innerWidth / window.innerHeight\n      this.camera.updateProjectionMatrix()\n      this.renderer.setSize(window.innerWidth, window.innerHeight)\n    },\n    onDocumentMouseMove(event) {\n      event.preventDefault()\n      this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1\n    },\n    render() {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.three {\n  height: 100vh;\n  width: 100vw;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeDemo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeDemo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ThreeDemo.vue?vue&type=template&id=19812f85&scoped=true&\"\nimport script from \"./ThreeDemo.vue?vue&type=script&lang=js&\"\nexport * from \"./ThreeDemo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ThreeDemo.vue?vue&type=style&index=0&id=19812f85&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19812f85\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <three-demo></three-demo>\n</template>\n\n<script>\nimport ThreeDemo from '@/components/ThreeDemo.vue'\nexport default { components: { ThreeDemo } }\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test.vue?vue&type=template&id=5becce52&scoped=true&\"\nimport script from \"./Test.vue?vue&type=script&lang=js&\"\nexport * from \"./Test.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5becce52\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ids.vue?vue&type=style&index=0&id=5709eda4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ids.vue?vue&type=style&index=0&id=5709eda4&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeDemo.vue?vue&type=style&index=0&id=19812f85&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeDemo.vue?vue&type=style&index=0&id=19812f85&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"processor\"},[_c('h1',[_vm._v(\"Generate bucket file ID lists\")]),(_vm.loaded)?_c('div',_vm._l((_vm.sortedStuff),function(bucket,index){return _c('div',{key:index,staticClass:\"bucket\"},[(!bucket.processed)?_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.processBucket(bucket.key)}}},[_vm._v(\" Process \")]):_vm._e(),(bucket.processed && bucket.data && !bucket.downloaded)?_c('a',{attrs:{\"href\":'data:application/octet-stream,' + _vm.encodedData(bucket.key),\"download\":bucket.key + '.txt'},on:{\"click\":function($event){return _vm.downloadBucket(bucket.key)}}},[_vm._v(\" Download! \")]):_vm._e(),(bucket.processed && bucket.data && bucket.downloaded)?_c('span',[_vm._v(\" Done! \")]):_vm._e(),(bucket.processed && !bucket.data && !bucket.downloaded)?_c('span',[_vm._v(\" Processing... \")]):_vm._e(),_c('span',[_vm._v(_vm._s(bucket.name)+\" (\"+_vm._s(bucket.count)+\")\")])])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"processor\">\n    <h1>Generate bucket file ID lists</h1>\n    <div v-if=\"loaded\">\n      <div v-for=\"(bucket, index) in sortedStuff\" :key=\"index\" class=\"bucket\">\n        <button\n          v-if=\"!bucket.processed\"\n          type=\"button\"\n          @click=\"processBucket(bucket.key)\"\n        >\n          Process\n        </button>\n        <a\n          v-if=\"bucket.processed && bucket.data && !bucket.downloaded\"\n          :href=\"'data:application/octet-stream,' + encodedData(bucket.key)\"\n          :download=\"bucket.key + '.txt'\"\n          @click=\"downloadBucket(bucket.key)\"\n        >\n          Download!\n        </a>\n        <span v-if=\"bucket.processed && bucket.data && bucket.downloaded\">\n          Done!\n        </span>\n        <span v-if=\"bucket.processed && !bucket.data && !bucket.downloaded\">\n          Processing...\n        </span>\n        <span>{{ bucket.name }} ({{ bucket.count }})</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  components: {},\n  data() {\n    return {}\n  },\n  computed: {\n    sortedStuff() {\n      return Object.values(this.stuff)\n        .filter((s) => s.count > 0)\n        .sort((a, b) => b.count - a.count)\n    },\n    ...mapState(['loaded', 'itemsTotal', 'stuff'])\n  },\n  async created() {\n    await this.$store.commit('getBuckets')\n    const stuff = { ...this.stuff }\n    Object.values(stuff).forEach((element, index) => {\n      const key = Object.keys(stuff)[index]\n      const bucket = { ...element }\n      bucket.processed = bucket.processed || false\n      bucket.downloaded = bucket.downloaded || false\n      bucket.key = key\n      stuff[key] = bucket\n    })\n    this.$store.commit('setStuff', stuff)\n  },\n  methods: {\n    encodedData(key) {\n      return this.stuff[key].data.join(',')\n    },\n    downloadBucket(key) {\n      const buckets = { ...this.stuff }\n      const bucket = { ...buckets[key], downloaded: true }\n      buckets[key] = bucket\n      this.$store.commit('setStuff', buckets)\n    },\n    processBucket(key) {\n      const buckets = { ...this.stuff }\n      const bucket = { ...buckets[key], processed: true }\n      buckets[key] = bucket\n      this.$store.commit('getIdsForBucket', buckets[key])\n      this.$store.commit('setStuff', buckets)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.processor {\n  margin: 0.5rem;\n}\n.bucket {\n  display: flex;\n  margin-bottom: 0.5rem;\n\n  & :first-child {\n    margin-right: 1rem;\n    text-align: center;\n    width: 6rem;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ids.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ids.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ids.vue?vue&type=template&id=5709eda4&scoped=true&\"\nimport script from \"./Ids.vue?vue&type=script&lang=js&\"\nexport * from \"./Ids.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ids.vue?vue&type=style&index=0&id=5709eda4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5709eda4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}