{"version":3,"sources":["webpack:///./node_modules/three/examples/jsm/controls/TrackballControls.js","webpack:///./node_modules/three/examples/jsm/libs/dat.gui.module.js"],"names":["TrackballControls","object","domElement","undefined","console","warn","document","error","_this","this","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","enabled","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","mouseButtons","LEFT","MIDDLE","RIGHT","target","EPS","lastPosition","lastZoom","_state","_keyState","_eye","_movePrev","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","position","up0","up","zoom0","zoom","changeEvent","type","startEvent","endEvent","handleResize","box","getBoundingClientRect","d","ownerDocument","documentElement","window","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","keydown","event","removeEventListener","keyCode","keyup","addEventListener","mousedown","preventDefault","stopPropagation","button","state","copy","mousemove","mouseup","dispatchEvent","mousewheel","deltaMode","y","deltaY","touchstart","touches","length","dx","dy","Math","sqrt","x","touchmove","touchend","contextmenu","rotateCamera","angle","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","zoomCamera","factor","isPerspectiveCamera","multiplyScalar","isOrthographicCamera","updateProjectionMatrix","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","right","clientWidth","scale_y","bottom","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","reset","dispose","prototype","Object","create","constructor","___$insertStyle","css","style","createElement","setAttribute","innerHTML","head","appendChild","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","round","g","b","a","h","s","toFixed","v","str","hex","ARR_EACH","Array","forEach","ARR_SLICE","slice","Common","BREAK","extend","each","call","arguments","obj","isObject","key","isUndefined","bind","defaults","compose","toCall","args","i","apply","itr","scope","l","_key","defer","fnc","setTimeout","debounce","func","threshold","callImmediately","timeout","delayed","callNow","clearTimeout","toArray","isNull","isNaN","_isNaN","isArray","isNumber","isString","isBoolean","isFunction","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","test","match","space","parseInt","write","SIX_CHAR_HEX","CSS_RGB","parseFloat","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","defineRGBComponent","component","componentHexIndex","recalculateRGB","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","__onChange","__onFinishChange","newValue","updateDisplay","getValue","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","clientY","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","charCode","initEvent","newBool","bool","attachEvent","unbind","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","getHeight","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","href","BooleanController","_Controller","_this2","onChange","setValue","__prev","__checkbox","checked","OptionController","opts","options","__select","map","element","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","_x","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","_NumberController","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","bgRect","__background","onTouchStart","onTouchMove","onTouchEnd","__foreground","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","fieldDown","setSV","fieldUpSV","fieldDownH","setH","fieldUpH","toOriginal","fieldRect","_ref","_ref2","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","linearGradient","hueGradient","outline","textAlign","fontWeight","textShadow","mismatch","flip","_flip","marginLeft","marginTop","toHexString","vendors","vendor","cssText","load","url","indoc","doc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","ControllerFactory","requestAnimationFrame","callback","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","body","hide","webkitTransform","layout","innerWidth","innerHeight","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","preset","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","setPresetSelectIndex","revert","setWidth","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","onClickTitle","resetWidth","root","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","gui","newDom","liBefore","li","removeListeners","markPresetModified","modified","__preset_select","augmentController","controller","__li","__gui","_options","nextSibling","nextElementSibling","remove","_add","before","factoryArgs","_nextSibling","_name","firstElementChild","listen","method","pc","pb","returned","oldName","wasListening","newController","borderLeftColor","isModified","recallSavedValue","matchedIndex","controllerMap","remembered","presetMap","concat","container","CLASS_CONTROLLER_ROW","location","addPresetOption","setSelected","showHideExplain","explain","addSaveMenu","div","__save_row","firstChild","gears","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","which","show","focus","save","presetName","prompt","saveAs","pmouseX","drag","dragStop","CLASS_DRAG","dragStart","__resize_handle","w","getCurrentPreset","useInitialValues","savedValues","updateDisplays","controllerArray","toggleHide","CLASS_TOO_TALL","_keydownHandler","addColor","removeChild","destroy","subfolder","removeFolder","addFolder","newGuiParams","folders","folder","parentElement","open","close","node","offsetHeight","remember","GUI$1"],"mappings":"8GAAA,kDAeIA,EAAoB,SAAWC,EAAQC,QAEtBC,IAAfD,GAA2BE,QAAQC,KAAM,gFACzCH,IAAeI,UAAWF,QAAQG,MAAO,gIAE9C,IAAIC,EAAQC,KACRC,EAAQ,CAAEC,MAAQ,EAAGC,OAAQ,EAAGC,KAAM,EAAGC,IAAK,EAAGC,aAAc,EAAGC,eAAgB,GAEtFP,KAAKR,OAASA,EACdQ,KAAKP,WAAaA,EAIlBO,KAAKQ,SAAU,EAEfR,KAAKS,OAAS,CAAEC,KAAM,EAAGC,IAAK,EAAGC,MAAO,EAAGC,OAAQ,GAEnDb,KAAKc,YAAc,EACnBd,KAAKe,UAAY,IACjBf,KAAKgB,SAAW,GAEhBhB,KAAKiB,UAAW,EAChBjB,KAAKkB,QAAS,EACdlB,KAAKmB,OAAQ,EAEbnB,KAAKoB,cAAe,EACpBpB,KAAKqB,qBAAuB,GAE5BrB,KAAKsB,YAAc,EACnBtB,KAAKuB,YAAcC,IAEnBxB,KAAKyB,KAAO,CAAE,GAAU,GAAU,IAElCzB,KAAK0B,aAAe,CAAEC,KAAM,OAAMxB,OAAQyB,OAAQ,OAAMxB,KAAMyB,MAAO,OAAMxB,KAI3EL,KAAK8B,OAAS,IAAI,OAElB,IAAIC,EAAM,KAENC,EAAe,IAAI,OACnBC,EAAW,EAEXC,EAASjC,EAAMC,KAClBiC,EAAYlC,EAAMC,KAElBkC,EAAO,IAAI,OAEXC,EAAY,IAAI,OAChBC,EAAY,IAAI,OAEhBC,EAAY,IAAI,OAChBC,EAAa,EAEbC,EAAa,IAAI,OACjBC,EAAW,IAAI,OAEfC,EAA0B,EAC1BC,EAAwB,EAExBC,EAAY,IAAI,OAChBC,EAAU,IAAI,OAIf9C,KAAK+C,QAAU/C,KAAK8B,OAAOkB,QAC3BhD,KAAKiD,UAAYjD,KAAKR,OAAO0D,SAASF,QACtChD,KAAKmD,IAAMnD,KAAKR,OAAO4D,GAAGJ,QAC1BhD,KAAKqD,MAAQrD,KAAKR,OAAO8D,KAIzB,IAAIC,EAAc,CAAEC,KAAM,UACtBC,EAAa,CAAED,KAAM,SACrBE,EAAW,CAAEF,KAAM,OAKvBxD,KAAK2D,aAAe,WAEnB,IAAIC,EAAM5D,KAAKP,WAAWoE,wBAEtBC,EAAI9D,KAAKP,WAAWsE,cAAcC,gBACtChE,KAAKS,OAAOC,KAAOkD,EAAIlD,KAAOuD,OAAOC,YAAcJ,EAAEK,WACrDnE,KAAKS,OAAOE,IAAMiD,EAAIjD,IAAMsD,OAAOG,YAAcN,EAAEO,UACnDrE,KAAKS,OAAOG,MAAQgD,EAAIhD,MACxBZ,KAAKS,OAAOI,OAAS+C,EAAI/C,QAI1B,IAAIyD,EAAqB,WAExB,IAAIC,EAAS,IAAI,OAEjB,OAAO,SAA2BC,EAAOC,GAOxC,OALAF,EAAOG,KACJF,EAAQzE,EAAMU,OAAOC,MAASX,EAAMU,OAAOG,OAC3C6D,EAAQ1E,EAAMU,OAAOE,KAAQZ,EAAMU,OAAOI,QAGtC0D,GAXc,GAiBnBI,EAAqB,WAExB,IAAIJ,EAAS,IAAI,OAEjB,OAAO,SAA2BC,EAAOC,GAOxC,OALAF,EAAOG,KACFF,EAA6B,GAArBzE,EAAMU,OAAOG,MAAcb,EAAMU,OAAOC,OAAgC,GAArBX,EAAMU,OAAOG,QACxEb,EAAMU,OAAOI,OAAS,GAAMd,EAAMU,OAAOE,IAAM8D,IAAY1E,EAAMU,OAAOG,OAGtE2D,GAXc,GA8RvB,SAASK,EAASC,IAEM,IAAlB9E,EAAMS,UAEXyD,OAAOa,oBAAqB,UAAWF,GAElCzC,IAAclC,EAAMC,OAIb2E,EAAME,UAAYhF,EAAM0B,KAAMxB,EAAME,SAAcJ,EAAMkB,SAIxD4D,EAAME,UAAYhF,EAAM0B,KAAMxB,EAAMG,OAAYL,EAAMmB,OAItD2D,EAAME,UAAYhF,EAAM0B,KAAMxB,EAAMI,MAAWN,EAAMoB,QAEhEgB,EAAYlC,EAAMI,KAJlB8B,EAAYlC,EAAMG,KAJlB+B,EAAYlC,EAAME,SAcpB,SAAS6E,KAEe,IAAlBjF,EAAMS,UAEX2B,EAAYlC,EAAMC,KAElB+D,OAAOgB,iBAAkB,UAAWL,GAAS,IAI9C,SAASM,EAAWL,GAEnB,IAAuB,IAAlB9E,EAAMS,QAAX,CAKA,GAHAqE,EAAMM,iBACNN,EAAMO,kBAEDlD,IAAWjC,EAAMC,KAErB,OAAS2E,EAAMQ,QAEd,KAAKtF,EAAM2B,aAAaC,KACvBO,EAASjC,EAAME,OACf,MAED,KAAKJ,EAAM2B,aAAaE,OACvBM,EAASjC,EAAMG,KACf,MAED,KAAKL,EAAM2B,aAAaG,MACvBK,EAASjC,EAAMI,IACf,MAED,QACC6B,EAASjC,EAAMC,KAMlB,IAAIoF,EAAUnD,IAAclC,EAAMC,KAASiC,EAAYD,EAElDoD,IAAUrF,EAAME,QAAYJ,EAAMkB,SAK3BqE,IAAUrF,EAAMG,MAAUL,EAAMmB,OAKhCoE,IAAUrF,EAAMI,KAASN,EAAMoB,QAE1C0B,EAAU0C,KAAMjB,EAAkBO,EAAML,MAAOK,EAAMJ,QACrD3B,EAAQyC,KAAM1C,KANdJ,EAAW8C,KAAMjB,EAAkBO,EAAML,MAAOK,EAAMJ,QACtD/B,EAAS6C,KAAM9C,KANfH,EAAUiD,KAAMZ,EAAkBE,EAAML,MAAOK,EAAMJ,QACrDpC,EAAUkD,KAAMjD,IAcjBzC,SAASoF,iBAAkB,YAAaO,GAAW,GACnD3F,SAASoF,iBAAkB,UAAWQ,GAAS,GAE/C1F,EAAM2F,cAAejC,IAItB,SAAS+B,EAAWX,GAEnB,IAAuB,IAAlB9E,EAAMS,QAAX,CAEAqE,EAAMM,iBACNN,EAAMO,kBAEN,IAAIE,EAAUnD,IAAclC,EAAMC,KAASiC,EAAYD,EAElDoD,IAAUrF,EAAME,QAAYJ,EAAMkB,SAK3BqE,IAAUrF,EAAMG,MAAUL,EAAMmB,OAIhCoE,IAAUrF,EAAMI,KAASN,EAAMoB,OAE1C2B,EAAQyC,KAAMjB,EAAkBO,EAAML,MAAOK,EAAMJ,QAJnD/B,EAAS6C,KAAMjB,EAAkBO,EAAML,MAAOK,EAAMJ,SALpDpC,EAAUkD,KAAMjD,GAChBA,EAAUiD,KAAMZ,EAAkBE,EAAML,MAAOK,EAAMJ,UAcvD,SAASgB,EAASZ,IAEM,IAAlB9E,EAAMS,UAEXqE,EAAMM,iBACNN,EAAMO,kBAENlD,EAASjC,EAAMC,KAEfL,SAASiF,oBAAqB,YAAaU,GAC3C3F,SAASiF,oBAAqB,UAAWW,GACzC1F,EAAM2F,cAAehC,IAItB,SAASiC,EAAYd,GAEpB,IAAuB,IAAlB9E,EAAMS,UAEW,IAAjBT,EAAMmB,OAAX,CAKA,OAHA2D,EAAMM,iBACNN,EAAMO,kBAEGP,EAAMe,WAEd,KAAK,EAEJnD,EAAWoD,GAAoB,KAAfhB,EAAMiB,OACtB,MAED,KAAK,EAEJrD,EAAWoD,GAAoB,IAAfhB,EAAMiB,OACtB,MAED,QAECrD,EAAWoD,GAAoB,MAAfhB,EAAMiB,OACtB,MAIF/F,EAAM2F,cAAejC,GACrB1D,EAAM2F,cAAehC,IAItB,SAASqC,EAAYlB,GAEpB,IAAuB,IAAlB9E,EAAMS,QAAX,CAIA,OAFAqE,EAAMM,iBAEGN,EAAMmB,QAAQC,QAEtB,KAAK,EACJ/D,EAASjC,EAAMK,aACfgC,EAAUiD,KAAMZ,EAAkBE,EAAMmB,QAAS,GAAIxB,MAAOK,EAAMmB,QAAS,GAAIvB,QAC/EpC,EAAUkD,KAAMjD,GAChB,MAED,QACCJ,EAASjC,EAAMM,eACf,IAAI2F,EAAKrB,EAAMmB,QAAS,GAAIxB,MAAQK,EAAMmB,QAAS,GAAIxB,MACnD2B,EAAKtB,EAAMmB,QAAS,GAAIvB,MAAQI,EAAMmB,QAAS,GAAIvB,MACvD7B,EAAwBD,EAA0ByD,KAAKC,KAAMH,EAAKA,EAAKC,EAAKA,GAE5E,IAAIG,GAAMzB,EAAMmB,QAAS,GAAIxB,MAAQK,EAAMmB,QAAS,GAAIxB,OAAU,EAC9DqB,GAAMhB,EAAMmB,QAAS,GAAIvB,MAAQI,EAAMmB,QAAS,GAAIvB,OAAU,EAClE5B,EAAU0C,KAAMjB,EAAkBgC,EAAGT,IACrC/C,EAAQyC,KAAM1C,GACd,MAIF9C,EAAM2F,cAAejC,IAItB,SAAS8C,EAAW1B,GAEnB,IAAuB,IAAlB9E,EAAMS,QAKX,OAHAqE,EAAMM,iBACNN,EAAMO,kBAEGP,EAAMmB,QAAQC,QAEtB,KAAK,EACJ5D,EAAUkD,KAAMjD,GAChBA,EAAUiD,KAAMZ,EAAkBE,EAAMmB,QAAS,GAAIxB,MAAOK,EAAMmB,QAAS,GAAIvB,QAC/E,MAED,QACC,IAAIyB,EAAKrB,EAAMmB,QAAS,GAAIxB,MAAQK,EAAMmB,QAAS,GAAIxB,MACnD2B,EAAKtB,EAAMmB,QAAS,GAAIvB,MAAQI,EAAMmB,QAAS,GAAIvB,MACvD7B,EAAwBwD,KAAKC,KAAMH,EAAKA,EAAKC,EAAKA,GAElD,IAAIG,GAAMzB,EAAMmB,QAAS,GAAIxB,MAAQK,EAAMmB,QAAS,GAAIxB,OAAU,EAC9DqB,GAAMhB,EAAMmB,QAAS,GAAIvB,MAAQI,EAAMmB,QAAS,GAAIvB,OAAU,EAClE3B,EAAQyC,KAAMjB,EAAkBgC,EAAGT,IACnC,OAMH,SAASW,EAAU3B,GAElB,IAAuB,IAAlB9E,EAAMS,QAAX,CAEA,OAASqE,EAAMmB,QAAQC,QAEtB,KAAK,EACJ/D,EAASjC,EAAMC,KACf,MAED,KAAK,EACJgC,EAASjC,EAAMK,aACfgC,EAAUiD,KAAMZ,EAAkBE,EAAMmB,QAAS,GAAIxB,MAAOK,EAAMmB,QAAS,GAAIvB,QAC/EpC,EAAUkD,KAAMjD,GAChB,MAIFvC,EAAM2F,cAAehC,IAItB,SAAS+C,EAAa5B,IAEE,IAAlB9E,EAAMS,SAEXqE,EAAMM,iBAzgBPnF,KAAK0G,aAAiB,WAErB,IAMCC,EANGC,EAAO,IAAI,OACdC,EAAa,IAAI,OACjBC,EAAe,IAAI,OACnBC,EAAoB,IAAI,OACxBC,EAA0B,IAAI,OAC9BC,EAAgB,IAAI,OAGrB,OAAO,WAENA,EAAcvC,IAAKpC,EAAUgE,EAAIjE,EAAUiE,EAAGhE,EAAUuD,EAAIxD,EAAUwD,EAAG,GACzEc,EAAQM,EAAchB,SAEjBU,GAEJvE,EAAKmD,KAAMxF,EAAMP,OAAO0D,UAAWgE,IAAKnH,EAAM+B,QAE9CgF,EAAavB,KAAMnD,GAAO+E,YAC1BJ,EAAkBxB,KAAMxF,EAAMP,OAAO4D,IAAK+D,YAC1CH,EAAwBI,aAAcL,EAAmBD,GAAeK,YAExEJ,EAAkBM,UAAW/E,EAAUuD,EAAIxD,EAAUwD,GACrDmB,EAAwBK,UAAW/E,EAAUgE,EAAIjE,EAAUiE,GAE3DW,EAAc1B,KAAMwB,EAAkBO,IAAKN,IAE3CJ,EAAKQ,aAAcH,EAAe7E,GAAO+E,YAEzCR,GAAS5G,EAAMe,YACf+F,EAAWU,iBAAkBX,EAAMD,GAEnCvE,EAAKoF,gBAAiBX,GACtB9G,EAAMP,OAAO4D,GAAGoE,gBAAiBX,GAEjCtE,EAAUgD,KAAMqB,GAChBpE,EAAamE,IAEA5G,EAAMqB,cAAgBoB,IAEnCA,GAAc4D,KAAKC,KAAM,EAAMtG,EAAMsB,sBACrCe,EAAKmD,KAAMxF,EAAMP,OAAO0D,UAAWgE,IAAKnH,EAAM+B,QAC9C+E,EAAWU,iBAAkBhF,EAAWC,GACxCJ,EAAKoF,gBAAiBX,GACtB9G,EAAMP,OAAO4D,GAAGoE,gBAAiBX,IAIlCxE,EAAUkD,KAAMjD,IAjDE,GAwDpBtC,KAAKyH,WAAa,WAEjB,IAAIC,EAECxF,IAAWjC,EAAMM,gBAErBmH,EAAS/E,EAA0BC,EACnCD,EAA0BC,EAErB7C,EAAMP,OAAOmI,oBAEjBvF,EAAKwF,eAAgBF,GAEV3H,EAAMP,OAAOqI,sBAExB9H,EAAMP,OAAO8D,MAAQoE,EACrB3H,EAAMP,OAAOsI,0BAIbnI,QAAQC,KAAM,sDAMf8H,EAAS,GAAQhF,EAASmD,EAAIpD,EAAWoD,GAAM9F,EAAMgB,UAErC,IAAX2G,GAAkBA,EAAS,IAE1B3H,EAAMP,OAAOmI,oBAEjBvF,EAAKwF,eAAgBF,GAEV3H,EAAMP,OAAOqI,sBAExB9H,EAAMP,OAAO8D,MAAQoE,EACrB3H,EAAMP,OAAOsI,0BAIbnI,QAAQC,KAAM,qDAMXG,EAAMqB,aAEVqB,EAAW8C,KAAM7C,GAIjBD,EAAWoD,IAAOnD,EAASmD,EAAIpD,EAAWoD,GAAM7F,KAAKqB,uBAQxDrB,KAAK+H,UAAc,WAElB,IAAIC,EAAc,IAAI,OACrBC,EAAW,IAAI,OACfC,EAAM,IAAI,OAEX,OAAO,WAIN,GAFAF,EAAYzC,KAAMzC,GAAUoE,IAAKrE,GAE5BmF,EAAYG,WAAa,CAE7B,GAAKpI,EAAMP,OAAOqI,qBAAuB,CAExC,IAAIO,GAAYrI,EAAMP,OAAO6I,MAAQtI,EAAMP,OAAOkB,MAASX,EAAMP,OAAO8D,KAAOvD,EAAMN,WAAW6I,YAC5FC,GAAYxI,EAAMP,OAAOmB,IAAMZ,EAAMP,OAAOgJ,QAAWzI,EAAMP,OAAO8D,KAAOvD,EAAMN,WAAW6I,YAEhGN,EAAY1B,GAAK8B,EACjBJ,EAAYnC,GAAK0C,EAIlBP,EAAYJ,eAAgBxF,EAAK6D,SAAWlG,EAAMiB,UAElDkH,EAAI3C,KAAMnD,GAAOqG,MAAO1I,EAAMP,OAAO4D,IAAKiE,UAAWW,EAAY1B,GACjE4B,EAAIZ,IAAKW,EAAS1C,KAAMxF,EAAMP,OAAO4D,IAAKiE,UAAWW,EAAYnC,IAEjE9F,EAAMP,OAAO0D,SAASoE,IAAKY,GAC3BnI,EAAM+B,OAAOwF,IAAKY,GAEbnI,EAAMqB,aAEVyB,EAAU0C,KAAMzC,GAIhBD,EAAUyE,IAAKU,EAAYU,WAAY5F,EAASD,GAAY+E,eAAgB7H,EAAMsB,yBApCrE,GA8CjBrB,KAAK2I,eAAiB,WAEd5I,EAAMmB,QAAYnB,EAAMoB,QAEzBiB,EAAK+F,WAAapI,EAAMwB,YAAcxB,EAAMwB,cAEhDxB,EAAMP,OAAO0D,SAAS0F,WAAY7I,EAAM+B,OAAQM,EAAKiF,UAAWtH,EAAMwB,cACtEkB,EAAW8C,KAAM7C,IAIbN,EAAK+F,WAAapI,EAAMuB,YAAcvB,EAAMuB,cAEhDvB,EAAMP,OAAO0D,SAAS0F,WAAY7I,EAAM+B,OAAQM,EAAKiF,UAAWtH,EAAMuB,cACtEmB,EAAW8C,KAAM7C,MAQpB1C,KAAK6I,OAAS,WAEbzG,EAAKsG,WAAY3I,EAAMP,OAAO0D,SAAUnD,EAAM+B,QAEvC/B,EAAMkB,UAEZlB,EAAM2G,eAIA3G,EAAMmB,QAEZnB,EAAM0H,aAIA1H,EAAMoB,OAEZpB,EAAMgI,YAIPhI,EAAMP,OAAO0D,SAAS0F,WAAY7I,EAAM+B,OAAQM,GAE3CrC,EAAMP,OAAOmI,qBAEjB5H,EAAM4I,iBAEN5I,EAAMP,OAAOsJ,OAAQ/I,EAAM+B,QAEtBE,EAAa+G,kBAAmBhJ,EAAMP,OAAO0D,UAAanB,IAE9DhC,EAAM2F,cAAenC,GAErBvB,EAAauD,KAAMxF,EAAMP,OAAO0D,YAItBnD,EAAMP,OAAOqI,sBAExB9H,EAAMP,OAAOsJ,OAAQ/I,EAAM+B,SAEtBE,EAAa+G,kBAAmBhJ,EAAMP,OAAO0D,UAAanB,GAAOE,IAAalC,EAAMP,OAAO8D,QAE/FvD,EAAM2F,cAAenC,GAErBvB,EAAauD,KAAMxF,EAAMP,OAAO0D,UAChCjB,EAAWlC,EAAMP,OAAO8D,OAMzB3D,QAAQC,KAAM,qDAMhBI,KAAKgJ,MAAQ,WAEZ9G,EAASjC,EAAMC,KACfiC,EAAYlC,EAAMC,KAElBH,EAAM+B,OAAOyD,KAAMxF,EAAMgD,SACzBhD,EAAMP,OAAO0D,SAASqC,KAAMxF,EAAMkD,WAClClD,EAAMP,OAAO4D,GAAGmC,KAAMxF,EAAMoD,KAC5BpD,EAAMP,OAAO8D,KAAOvD,EAAMsD,MAE1BtD,EAAMP,OAAOsI,yBAEb1F,EAAKsG,WAAY3I,EAAMP,OAAO0D,SAAUnD,EAAM+B,QAE9C/B,EAAMP,OAAOsJ,OAAQ/I,EAAM+B,QAE3B/B,EAAM2F,cAAenC,GAErBvB,EAAauD,KAAMxF,EAAMP,OAAO0D,UAChCjB,EAAWlC,EAAMP,OAAO8D,MAsQzBtD,KAAKiJ,QAAU,WAEdjJ,KAAKP,WAAWqF,oBAAqB,cAAe2B,GAAa,GACjEzG,KAAKP,WAAWqF,oBAAqB,YAAaI,GAAW,GAC7DlF,KAAKP,WAAWqF,oBAAqB,QAASa,GAAY,GAE1D3F,KAAKP,WAAWqF,oBAAqB,aAAciB,GAAY,GAC/D/F,KAAKP,WAAWqF,oBAAqB,WAAY0B,GAAU,GAC3DxG,KAAKP,WAAWqF,oBAAqB,YAAayB,GAAW,GAE7D1G,SAASiF,oBAAqB,YAAaU,GAAW,GACtD3F,SAASiF,oBAAqB,UAAWW,GAAS,GAElDxB,OAAOa,oBAAqB,UAAWF,GAAS,GAChDX,OAAOa,oBAAqB,QAASE,GAAO,IAI7ChF,KAAKP,WAAWwF,iBAAkB,cAAewB,GAAa,GAC9DzG,KAAKP,WAAWwF,iBAAkB,YAAaC,GAAW,GAC1DlF,KAAKP,WAAWwF,iBAAkB,QAASU,GAAY,GAEvD3F,KAAKP,WAAWwF,iBAAkB,aAAcc,GAAY,GAC5D/F,KAAKP,WAAWwF,iBAAkB,WAAYuB,GAAU,GACxDxG,KAAKP,WAAWwF,iBAAkB,YAAasB,GAAW,GAE1DtC,OAAOgB,iBAAkB,UAAWL,GAAS,GAC7CX,OAAOgB,iBAAkB,QAASD,GAAO,GAEzChF,KAAK2D,eAGL3D,KAAK6I,UAINtJ,EAAkB2J,UAAYC,OAAOC,OAAQ,OAAgBF,WAC7D3J,EAAkB2J,UAAUG,YAAc9J,G,kCClrB1C,SAAS+J,EAAiBC,GAEzB,GAAOA,GAKgB,qBAAXtF,OAAZ,CAMA,IAAIuF,EAAQ3J,SAAS4J,cAAe,SAMpC,OAJAD,EAAME,aAAc,OAAQ,YAC5BF,EAAMG,UAAYJ,EAClB1J,SAAS+J,KAAKC,YAAaL,GAEpBD,GAIR,SAASO,EAAeC,EAAOC,GAE9B,IAAIC,EAAcF,EAAMG,QAAQC,eAAeC,WAC3CC,EAAIjE,KAAKkE,MAAOP,EAAMM,GACtBE,EAAInE,KAAKkE,MAAOP,EAAMQ,GACtBC,EAAIpE,KAAKkE,MAAOP,EAAMS,GACtBC,EAAIV,EAAMU,EACVC,EAAItE,KAAKkE,MAAOP,EAAMW,GACtBC,EAAIZ,EAAMY,EAAEC,QAAS,GACrBC,EAAId,EAAMc,EAAED,QAAS,GACzB,GAAKZ,GAA+B,mBAAhBC,GAAoD,iBAAhBA,EAAiC,CAExF,IAAIa,EAAMf,EAAMgB,IAAIX,SAAU,IAC9B,MAAQU,EAAI7E,OAAS,EAEpB6E,EAAM,IAAMA,EAGb,MAAO,IAAMA,EAEP,MAAqB,YAAhBb,EAEJ,OAASI,EAAI,IAAME,EAAI,IAAMC,EAAI,IAEb,aAAhBP,EAEJ,QAAUI,EAAI,IAAME,EAAI,IAAMC,EAAI,IAAMC,EAAI,IAExB,QAAhBR,EAEJ,KAAOF,EAAMgB,IAAIX,SAAU,IAEP,cAAhBH,EAEJ,IAAMI,EAAI,IAAME,EAAI,IAAMC,EAAI,IAEV,eAAhBP,EAEJ,IAAMI,EAAI,IAAME,EAAI,IAAMC,EAAI,IAAMC,EAAI,IAEpB,YAAhBR,EAEJ,MAAQI,EAAI,MAAQE,EAAI,MAAQC,EAAI,IAEhB,aAAhBP,EAEJ,MAAQI,EAAI,MAAQE,EAAI,MAAQC,EAAI,MAAQC,EAAI,IAE5B,YAAhBR,EAEJ,MAAQS,EAAI,MAAQC,EAAI,MAAQE,EAAI,IAEhB,aAAhBZ,EAEJ,MAAQS,EAAI,MAAQC,EAAI,MAAQE,EAAI,MAAQJ,EAAI,IAGjD,iBA7FR,mCAiGA,IAAIO,EAAWC,MAAM/B,UAAUgC,QAC3BC,EAAYF,MAAM/B,UAAUkC,MAC5BC,EAAS,CACZC,MAAO,GACPC,OAAQ,SAAiBzJ,GAgBxB,OAdA9B,KAAKwL,KAAML,EAAUM,KAAMC,UAAW,IAAK,SAAWC,GAErD,IAAIlK,EAAOzB,KAAK4L,SAAUD,GAAQxC,OAAO1H,KAAMkK,GAAQ,GACvDlK,EAAKyJ,QAAS,SAAWW,GAEjB7L,KAAK8L,YAAaH,EAAKE,MAE7B/J,EAAQ+J,GAAQF,EAAKE,KAIrBE,KAAM/L,SAENA,MACI8B,GAGRkK,SAAU,SAAmBlK,GAgB5B,OAdA9B,KAAKwL,KAAML,EAAUM,KAAMC,UAAW,IAAK,SAAWC,GAErD,IAAIlK,EAAOzB,KAAK4L,SAAUD,GAAQxC,OAAO1H,KAAMkK,GAAQ,GACvDlK,EAAKyJ,QAAS,SAAWW,GAEnB7L,KAAK8L,YAAahK,EAAQ+J,MAE9B/J,EAAQ+J,GAAQF,EAAKE,KAIrBE,KAAM/L,SAENA,MACI8B,GAGRmK,QAAS,WAER,IAAIC,EAASf,EAAUM,KAAMC,WAC7B,OAAO,WAGN,IADA,IAAIS,EAAOhB,EAAUM,KAAMC,WACjBU,EAAIF,EAAOjG,OAAS,EAAGmG,GAAK,EAAGA,IAExCD,EAAO,CAAED,EAAQE,GAAIC,MAAOrM,KAAMmM,IAGnC,OAAOA,EAAM,KAKfX,KAAM,SAAeG,EAAKW,EAAKC,GAE9B,GAAOZ,EAKP,GAAKX,GAAYW,EAAIT,SAAWS,EAAIT,UAAYF,EAE/CW,EAAIT,QAASoB,EAAKC,QAEZ,GAAKZ,EAAI1F,SAAW0F,EAAI1F,OAAS,EAAI,CAE3C,IAAI4F,OAAM,EACNW,OAAI,EACR,IAAMX,EAAM,EAAGW,EAAIb,EAAI1F,OAAQ4F,EAAMW,EAAGX,IAEvC,GAAKA,KAAOF,GAAOW,EAAIb,KAAMc,EAAOZ,EAAKE,GAAOA,KAAU7L,KAAKsL,MAE9D,YAQF,IAAM,IAAImB,KAAQd,EAEjB,GAAKW,EAAIb,KAAMc,EAAOZ,EAAKc,GAAQA,KAAWzM,KAAKsL,MAElD,QASJoB,MAAO,SAAgBC,GAEtBC,WAAYD,EAAK,IAGlBE,SAAU,SAAmBC,EAAMC,EAAWC,GAE7C,IAAIC,OAAU,EACd,OAAO,WAEN,IAAItB,EAAM3L,KACNmM,EAAOT,UACX,SAASwB,IAERD,EAAU,KACHD,GAAkBF,EAAKT,MAAOV,EAAKQ,GAG3C,IAAIgB,EAAUH,IAAqBC,EACnCG,aAAcH,GACdA,EAAUL,WAAYM,EAASH,GAC1BI,GAEJL,EAAKT,MAAOV,EAAKQ,KAOpBkB,QAAS,SAAkB1B,GAE1B,OAAKA,EAAI0B,QAAiB1B,EAAI0B,UACvBlC,EAAUM,KAAME,IAGxBG,YAAa,SAAsBH,GAElC,YAAejM,IAARiM,GAGR2B,OAAQ,SAAiB3B,GAExB,OAAe,OAARA,GAGR4B,MAAO,SAAWC,GAEjB,SAASD,IAER,OAAOC,EAAOnB,MAAOrM,KAAM0L,WAQ5B,OALA6B,EAAMnD,SAAW,WAEhB,OAAOoD,EAAOpD,YAGRmD,EAZD,EAcJ,SAAW5B,GAEb,OAAO4B,MAAO5B,MAGf8B,QAASxC,MAAMwC,SAAW,SAAW9B,GAEpC,OAAOA,EAAItC,cAAgB4B,OAG5BW,SAAU,SAAmBD,GAE5B,OAAOA,IAAQxC,OAAQwC,IAGxB+B,SAAU,SAAmB/B,GAE5B,OAAOA,IAAQA,EAAM,GAGtBgC,SAAU,SAAmBhC,GAE5B,OAAOA,IAAQA,EAAM,IAGtBiC,UAAW,SAAoBjC,GAE9B,OAAe,IAARA,IAAyB,IAARA,GAGzBkC,WAAY,SAAqBlC,GAEhC,MAAiD,sBAA1CxC,OAAOD,UAAUkB,SAASqB,KAAME,KAKrCmC,EAAkB,CACrB,CACCC,OAAQ1C,EAAOsC,SACfK,YAAa,CACZC,eAAgB,CACfC,KAAM,SAAeC,GAEpB,IAAIC,EAAOD,EAASE,MAAO,sCAC3B,OAAc,OAATD,GAKE,CACNE,MAAO,MACPvD,IAAKwD,SAAU,KAAOH,EAAM,GAAIhE,WAAagE,EAAM,GAAIhE,WAAagE,EAAM,GAAIhE,WAAagE,EAAM,GAAIhE,WAAagE,EAAM,GAAIhE,WAAagE,EAAM,GAAIhE,WAAY,KAIjKoE,MAAO1E,GAER2E,aAAc,CACbP,KAAM,SAAeC,GAEpB,IAAIC,EAAOD,EAASE,MAAO,qBAC3B,OAAc,OAATD,GAKE,CACNE,MAAO,MACPvD,IAAKwD,SAAU,KAAOH,EAAM,GAAIhE,WAAY,KAI9CoE,MAAO1E,GAER4E,QAAS,CACRR,KAAM,SAAeC,GAEpB,IAAIC,EAAOD,EAASE,MAAO,4CAC3B,OAAc,OAATD,GAKE,CACNE,MAAO,MACPjE,EAAGsE,WAAYP,EAAM,IACrB7D,EAAGoE,WAAYP,EAAM,IACrB5D,EAAGmE,WAAYP,EAAM,MAIvBI,MAAO1E,GAER8E,SAAU,CACTV,KAAM,SAAeC,GAEpB,IAAIC,EAAOD,EAASE,MAAO,wDAC3B,OAAc,OAATD,GAKE,CACNE,MAAO,MACPjE,EAAGsE,WAAYP,EAAM,IACrB7D,EAAGoE,WAAYP,EAAM,IACrB5D,EAAGmE,WAAYP,EAAM,IACrB3D,EAAGkE,WAAYP,EAAM,MAIvBI,MAAO1E,KAIV,CACCiE,OAAQ1C,EAAOqC,SACfM,YAAa,CACZa,IAAK,CACJX,KAAM,SAAeC,GAEpB,MAAO,CACNG,MAAO,MACPvD,IAAKoD,EACLhE,eAAgB,QAIlBqE,MAAO,SAAgBzE,GAEtB,OAAOA,EAAMgB,QAMjB,CACCgD,OAAQ1C,EAAOoC,QACfO,YAAa,CACZc,UAAW,CACVZ,KAAM,SAAeC,GAEpB,OAAyB,IAApBA,EAASlI,QAKP,CACNqI,MAAO,MACPjE,EAAG8D,EAAU,GACb5D,EAAG4D,EAAU,GACb3D,EAAG2D,EAAU,KAIfK,MAAO,SAAgBzE,GAEtB,MAAO,CAAEA,EAAMM,EAAGN,EAAMQ,EAAGR,EAAMS,KAInCuE,WAAY,CACXb,KAAM,SAAeC,GAEpB,OAAyB,IAApBA,EAASlI,QACP,CACNqI,MAAO,MACPjE,EAAG8D,EAAU,GACb5D,EAAG4D,EAAU,GACb3D,EAAG2D,EAAU,GACb1D,EAAG0D,EAAU,KAIfK,MAAO,SAAgBzE,GAEtB,MAAO,CAAEA,EAAMM,EAAGN,EAAMQ,EAAGR,EAAMS,EAAGT,EAAMU,OAM9C,CACCsD,OAAQ1C,EAAOO,SACfoC,YAAa,CACZgB,SAAU,CACTd,KAAM,SAAeC,GAEpB,SAAK9C,EAAOqC,SAAUS,EAAS9D,IAAOgB,EAAOqC,SAAUS,EAAS5D,IAAOc,EAAOqC,SAAUS,EAAS3D,IAAOa,EAAOqC,SAAUS,EAAS1D,KAE1H,CACN6D,MAAO,MACPjE,EAAG8D,EAAS9D,EACZE,EAAG4D,EAAS5D,EACZC,EAAG2D,EAAS3D,EACZC,EAAG0D,EAAS1D,IAOf+D,MAAO,SAAgBzE,GAEtB,MAAO,CACNM,EAAGN,EAAMM,EACTE,EAAGR,EAAMQ,EACTC,EAAGT,EAAMS,EACTC,EAAGV,EAAMU,KAKZwE,QAAS,CACRf,KAAM,SAAeC,GAEpB,SAAK9C,EAAOqC,SAAUS,EAAS9D,IAAOgB,EAAOqC,SAAUS,EAAS5D,IAAOc,EAAOqC,SAAUS,EAAS3D,KAEzF,CACN8D,MAAO,MACPjE,EAAG8D,EAAS9D,EACZE,EAAG4D,EAAS5D,EACZC,EAAG2D,EAAS3D,IAOfgE,MAAO,SAAgBzE,GAEtB,MAAO,CACNM,EAAGN,EAAMM,EACTE,EAAGR,EAAMQ,EACTC,EAAGT,EAAMS,KAKZ0E,SAAU,CACThB,KAAM,SAAeC,GAEpB,SAAK9C,EAAOqC,SAAUS,EAASzD,IAAOW,EAAOqC,SAAUS,EAASxD,IAAOU,EAAOqC,SAAUS,EAAStD,IAAOQ,EAAOqC,SAAUS,EAAS1D,KAE1H,CACN6D,MAAO,MACP5D,EAAGyD,EAASzD,EACZC,EAAGwD,EAASxD,EACZE,EAAGsD,EAAStD,EACZJ,EAAG0D,EAAS1D,IAOf+D,MAAO,SAAgBzE,GAEtB,MAAO,CACNW,EAAGX,EAAMW,EACTC,EAAGZ,EAAMY,EACTE,EAAGd,EAAMc,EACTJ,EAAGV,EAAMU,KAKZ0E,QAAS,CACRjB,KAAM,SAAeC,GAEpB,SAAK9C,EAAOqC,SAAUS,EAASzD,IAAOW,EAAOqC,SAAUS,EAASxD,IAAOU,EAAOqC,SAAUS,EAAStD,KAEzF,CACNyD,MAAO,MACP5D,EAAGyD,EAASzD,EACZC,EAAGwD,EAASxD,EACZE,EAAGsD,EAAStD,IAOf2D,MAAO,SAAgBzE,GAEtB,MAAO,CACNW,EAAGX,EAAMW,EACTC,EAAGZ,EAAMY,EACTE,EAAGd,EAAMc,QAOXuE,OAAS,EACTC,OAAW,EACXC,EAAY,WAEfD,GAAW,EACX,IAAIlB,EAAWzC,UAAUzF,OAAS,EAAIoF,EAAOgC,QAAS3B,WAAcA,UAAW,GAuB/E,OAtBAL,EAAOG,KAAMsC,GAAiB,SAAWyB,GAExC,GAAKA,EAAOxB,OAAQI,GAenB,OAbA9C,EAAOG,KAAM+D,EAAOvB,aAAa,SAAWwB,EAAYrF,GAGvD,GADAiF,EAASI,EAAWtB,KAAMC,IACR,IAAbkB,IAAiC,IAAXD,EAK1B,OAHAC,EAAWD,EACXA,EAAOjF,eAAiBA,EACxBiF,EAAOI,WAAaA,EACbnE,EAAOC,SAKTD,EAAOC,SAKT+D,GAIJI,OAAe,EACfC,EAAY,CACfC,WAAY,SAAqBjF,EAAGC,EAAGE,GAEtC,IAAI+E,EAAKxJ,KAAKyJ,MAAOnF,EAAI,IAAO,EAC5BoF,EAAIpF,EAAI,GAAKtE,KAAKyJ,MAAOnF,EAAI,IAC7BqF,EAAIlF,GAAM,EAAMF,GAChBqF,EAAInF,GAAM,EAAMiF,EAAInF,GACpBsF,EAAIpF,GAAM,GAAQ,EAAMiF,GAAMnF,GAC9BuF,EAAI,CAAC,CAAErF,EAAGoF,EAAGF,GAAK,CAAEC,EAAGnF,EAAGkF,GAAK,CAAEA,EAAGlF,EAAGoF,GAAK,CAAEF,EAAGC,EAAGnF,GAAK,CAAEoF,EAAGF,EAAGlF,GAAK,CAAEA,EAAGkF,EAAGC,IAAMJ,GACxF,MAAO,CACNvF,EAAY,IAAT6F,EAAG,GACN3F,EAAY,IAAT2F,EAAG,GACN1F,EAAY,IAAT0F,EAAG,KAIRC,WAAY,SAAqB9F,EAAGE,EAAGC,GAEtC,IAAI4F,EAAMhK,KAAKgK,IAAK/F,EAAGE,EAAGC,GACtB6F,EAAMjK,KAAKiK,IAAKhG,EAAGE,EAAGC,GACtB8F,EAAQD,EAAMD,EACd1F,OAAI,EACJC,OAAI,EACR,OAAa,IAAR0F,EAMG,CACN3F,EAAG6F,IACH5F,EAAG,EACHE,EAAG,IAPJF,EAAI2F,EAAQD,EAaZ3F,EAFIL,IAAMgG,GAEJ9F,EAAIC,GAAM8F,EAEL/F,IAAM8F,EAEb,GAAM7F,EAAIH,GAAMiG,EAIhB,GAAMjG,EAAIE,GAAM+F,EAGrB5F,GAAK,EACAA,EAAI,IAERA,GAAK,GAGC,CACNA,EAAO,IAAJA,EACHC,EAAGA,EACHE,EAAGwF,EAAM,OAIXG,WAAY,SAAqBnG,EAAGE,EAAGC,GAEtC,IAAIO,EAAM/K,KAAKyQ,mBAAoB,EAAG,EAAGpG,GAGzC,OAFAU,EAAM/K,KAAKyQ,mBAAoB1F,EAAK,EAAGR,GACvCQ,EAAM/K,KAAKyQ,mBAAoB1F,EAAK,EAAGP,GAChCO,GAGR2F,mBAAoB,SAA6B3F,EAAK4F,GAErD,OAAO5F,GAAwB,EAAjB4F,EAAqB,KAGpCF,mBAAoB,SAA6B1F,EAAK4F,EAAgBC,GAErE,OAAOA,IAAWnB,EAAgC,EAAjBkB,GAAuB5F,IAAU,KAAQ0E,KAKxEoB,EAA4B,oBAAXC,QAAoD,kBAApBA,OAAOC,SAAwB,SAAWpF,GAE9F,cAAcA,GAEX,SAAWA,GAEd,OAAOA,GAAyB,oBAAXmF,QAAyBnF,EAAItC,cAAgByH,QAAUnF,IAAQmF,OAAO5H,UAAY,gBAAkByC,GActHqF,EAAiB,SAAWC,EAAUC,GAEzC,KAASD,aAAoBC,GAE5B,MAAM,IAAIC,UAAW,sCAMnBC,EAAc,WAEjB,SAASC,EAAkBvP,EAAQwP,GAElC,IAAM,IAAIlF,EAAI,EAAGA,EAAIkF,EAAMrL,OAAQmG,IAAO,CAEzC,IAAImF,EAAaD,EAAOlF,GACxBmF,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACrB,UAAWF,IAAaA,EAAWG,UAAW,GACnDvI,OAAOwI,eAAgB7P,EAAQyP,EAAW1F,IAAK0F,IAMjD,OAAO,SAAWL,EAAaU,EAAYC,GAI1C,OAFKD,GAAaP,EAAkBH,EAAYhI,UAAW0I,GACtDC,GAAcR,EAAkBH,EAAaW,GAC3CX,GApBS,GAgCdY,EAAM,SAASA,EAAKtS,EAAQuS,EAAUC,GAEzB,OAAXxS,IAAkBA,EAASyS,SAAS/I,WACzC,IAAIgJ,EAAO/I,OAAOgJ,yBAA0B3S,EAAQuS,GAEpD,QAAcrS,IAATwS,EAAqB,CAEzB,IAAIE,EAASjJ,OAAOkJ,eAAgB7S,GAEpC,OAAgB,OAAX4S,OAEJ,EAION,EAAKM,EAAQL,EAAUC,GAIzB,GAAK,UAAWE,EAEtB,OAAOA,EAAKtB,MAIZ,IAAI0B,EAASJ,EAAKJ,IAElB,YAAgBpS,IAAX4S,EAMEA,EAAO7G,KAAMuG,QANpB,GAYEO,EAAW,SAAWC,EAAUC,GAEnC,GAA2B,oBAAfA,GAA4C,OAAfA,EAExC,MAAM,IAAItB,UAAW,kEAAoEsB,GAI1FD,EAAStJ,UAAYC,OAAOC,OAAQqJ,GAAcA,EAAWvJ,UAAW,CACvEG,YAAa,CACZuH,MAAO4B,EACPhB,YAAY,EACZE,UAAU,EACVD,cAAc,KAGXgB,IAAatJ,OAAOuJ,eAAiBvJ,OAAOuJ,eAAgBF,EAAUC,GAAeD,EAASG,UAAYF,IAc5GG,EAA4B,SAAWC,EAAMpH,GAEhD,IAAOoH,EAEN,MAAM,IAAIC,eAAgB,6DAI3B,OAAOrH,GAA0B,kBAATA,GAAqC,oBAATA,EAA+BoH,EAAPpH,GAIzEsH,EAAQ,WAEX,SAASA,IAIR,GAFA/B,EAAgBhR,KAAM+S,GACtB/S,KAAKkK,QAAUoF,EAAUjD,MAAOrM,KAAM0L,YAChB,IAAjB1L,KAAKkK,QAET,MAAM,IAAI8I,MAAO,uCAGlBhT,KAAKkK,QAAQO,EAAIzK,KAAKkK,QAAQO,GAAK,EAyBpC,OAtBA2G,EAAa2B,EAAO,CAAE,CACrBlH,IAAK,WACL+E,MAAO,WAEN,OAAO9G,EAAe9J,QAGrB,CACF6L,IAAK,cACL+E,MAAO,WAEN,OAAO9G,EAAe9J,MAAM,KAG3B,CACF6L,IAAK,aACL+E,MAAO,WAEN,OAAO5Q,KAAKkK,QAAQsF,WAAWhB,MAAOxO,UAIjC+S,EApCI,GAuCZ,SAASE,EAAoBnR,EAAQoR,EAAWC,GAE/ChK,OAAOwI,eAAgB7P,EAAQoR,EAAW,CACzCpB,IAAK,WAEJ,MAA4B,QAAvB9R,KAAKkK,QAAQoE,MAEVtO,KAAKkK,QAASgJ,IAGtBH,EAAMK,eAAgBpT,KAAMkT,EAAWC,GAChCnT,KAAKkK,QAASgJ,KAGtBxO,IAAK,SAAiBmG,GAEO,QAAvB7K,KAAKkK,QAAQoE,QAEjByE,EAAMK,eAAgBpT,KAAMkT,EAAWC,GACvCnT,KAAKkK,QAAQoE,MAAQ,OAGtBtO,KAAKkK,QAASgJ,GAAcrI,KAM/B,SAASwI,EAAoBvR,EAAQoR,GAEpC/J,OAAOwI,eAAgB7P,EAAQoR,EAAW,CACzCpB,IAAK,WAEJ,MAA4B,QAAvB9R,KAAKkK,QAAQoE,MAEVtO,KAAKkK,QAASgJ,IAGtBH,EAAMO,eAAgBtT,MACfA,KAAKkK,QAASgJ,KAGtBxO,IAAK,SAAiBmG,GAEO,QAAvB7K,KAAKkK,QAAQoE,QAEjByE,EAAMO,eAAgBtT,MACtBA,KAAKkK,QAAQoE,MAAQ,OAGtBtO,KAAKkK,QAASgJ,GAAcrI,KAM/BkI,EAAMK,eAAiB,SAAWrJ,EAAOmJ,EAAWC,GAEnD,GAA6B,QAAxBpJ,EAAMG,QAAQoE,MAElBvE,EAAMG,QAASgJ,GAAcxD,EAAUgB,mBAAoB3G,EAAMG,QAAQa,IAAKoI,OAExE,IAA6B,QAAxBpJ,EAAMG,QAAQoE,MAMzB,MAAM,IAAI0E,MAAO,yBAJjB3H,EAAOE,OAAQxB,EAAMG,QAASwF,EAAUC,WAAY5F,EAAMG,QAAQQ,EAAGX,EAAMG,QAAQS,EAAGZ,EAAMG,QAAQW,MAStGkI,EAAMO,eAAiB,SAAWvJ,GAEjC,IAAIqF,EAASM,EAAUS,WAAYpG,EAAMM,EAAGN,EAAMQ,EAAGR,EAAMS,GAC3Da,EAAOE,OAAQxB,EAAMG,QAAS,CAC7BS,EAAGyE,EAAOzE,EACVE,EAAGuE,EAAOvE,IAEJQ,EAAOkC,MAAO6B,EAAO1E,GAIhBW,EAAOS,YAAa/B,EAAMG,QAAQQ,KAE7CX,EAAMG,QAAQQ,EAAI,GAJlBX,EAAMG,QAAQQ,EAAI0E,EAAO1E,GAS3BqI,EAAMQ,WAAa,CAAE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAO,KAC1DN,EAAoBF,EAAM7J,UAAW,IAAK,GAC1C+J,EAAoBF,EAAM7J,UAAW,IAAK,GAC1C+J,EAAoBF,EAAM7J,UAAW,IAAK,GAC1CmK,EAAoBN,EAAM7J,UAAW,KACrCmK,EAAoBN,EAAM7J,UAAW,KACrCmK,EAAoBN,EAAM7J,UAAW,KACrCC,OAAOwI,eAAgBoB,EAAM7J,UAAW,IAAK,CAC5C4I,IAAK,WAEJ,OAAO9R,KAAKkK,QAAQO,GAGrB/F,IAAK,SAAiBmG,GAErB7K,KAAKkK,QAAQO,EAAII,KAInB1B,OAAOwI,eAAgBoB,EAAM7J,UAAW,MAAO,CAC9C4I,IAAK,WAOJ,MAL8B,SAAvB9R,KAAKkK,QAAQoE,QAEnBtO,KAAKkK,QAAQa,IAAM2E,EAAUc,WAAYxQ,KAAKqK,EAAGrK,KAAKuK,EAAGvK,KAAKwK,IAGxDxK,KAAKkK,QAAQa,KAGrBrG,IAAK,SAAiBmG,GAErB7K,KAAKkK,QAAQoE,MAAQ,MACrBtO,KAAKkK,QAAQa,IAAMF,KAKrB,IAAI2I,EAAa,WAEhB,SAASA,EAAYhU,EAAQuS,GAE5Bf,EAAgBhR,KAAMwT,GACtBxT,KAAKyT,aAAejU,EAAQuS,GAC5B/R,KAAKP,WAAaI,SAAS4J,cAAe,OAC1CzJ,KAAKR,OAASA,EACdQ,KAAK+R,SAAWA,EAChB/R,KAAK0T,gBAAahU,EAClBM,KAAK2T,sBAAmBjU,EAuDzB,OApDA0R,EAAaoC,EAAY,CAAE,CAC1B3H,IAAK,WACL+E,MAAO,SAAmBjE,GAGzB,OADA3M,KAAK0T,WAAa/G,EACX3M,OAGN,CACF6L,IAAK,iBACL+E,MAAO,SAAyBjE,GAG/B,OADA3M,KAAK2T,iBAAmBhH,EACjB3M,OAGN,CACF6L,IAAK,WACL+E,MAAO,SAAmBgD,GASzB,OAPA5T,KAAKR,OAAQQ,KAAK+R,UAAa6B,EAC1B5T,KAAK0T,YAET1T,KAAK0T,WAAWjI,KAAMzL,KAAM4T,GAG7B5T,KAAK6T,gBACE7T,OAGN,CACF6L,IAAK,WACL+E,MAAO,WAEN,OAAO5Q,KAAKR,OAAQQ,KAAK+R,YAGxB,CACFlG,IAAK,gBACL+E,MAAO,WAEN,OAAO5Q,OAGN,CACF6L,IAAK,aACL+E,MAAO,WAEN,OAAO5Q,KAAKyT,eAAiBzT,KAAK8T,eAI7BN,EAjES,GAqEbO,EAAY,CACfC,WAAY,CAAE,UACdC,YAAa,CAAE,QAAS,YAAa,YAAa,UAAW,aAC7DC,eAAgB,CAAE,YAEfC,EAAgB,GACpB9I,EAAOG,KAAMuI,GAAW,SAAWlJ,EAAGuJ,GAErC/I,EAAOG,KAAMX,GAAG,SAAWwJ,GAE1BF,EAAeE,GAAMD,QAKvB,IAAIE,EAAmB,kBACvB,SAASC,EAAkBC,GAE1B,GAAa,MAARA,GAAenJ,EAAOS,YAAa0I,GAEvC,OAAO,EAGR,IAAInG,EAAQmG,EAAInG,MAAOiG,GACvB,OAAOjJ,EAAOiC,OAAQe,GAKf,EAHCM,WAAYN,EAAO,IAM5B,IAAIoG,EAAM,CACTC,eAAgB,SAAyBC,EAAMC,QAEhClV,IAATiV,QAAqCjV,IAAfiV,EAAKnL,QAChCmL,EAAKE,cAAgBD,EAAa,WAEjC,OAAO,GAEJ,aACJD,EAAKnL,MAAMsL,cAAgBF,EAAa,OAAS,OACjDD,EAAKnL,MAAMuL,gBAAkBH,EAAa,OAAS,OACnDD,EAAKK,aAAeJ,EAAa,KAAO,QAGzCK,eAAgB,SAAyBN,EAAMO,EAAKC,GAEnD,IAAIC,EAAWD,EACXE,EAAaH,EACZ7J,EAAOS,YAAauJ,KAExBA,GAAa,GAGThK,EAAOS,YAAasJ,KAExBA,GAAW,GAGZT,EAAKnL,MAAMtG,SAAW,WACjBmS,IAEJV,EAAKnL,MAAM9I,KAAO,EAClBiU,EAAKnL,MAAMnB,MAAQ,GAGf+M,IAEJT,EAAKnL,MAAM7I,IAAM,EACjBgU,EAAKnL,MAAMhB,OAAS,IAKtB8M,UAAW,SAAoBX,EAAMY,EAAWC,EAAMC,GAErD,IAAIC,EAASF,GAAQ,GACjBG,EAAYxB,EAAeoB,GAC/B,IAAOI,EAEN,MAAM,IAAI3C,MAAO,cAAgBuC,EAAY,mBAG9C,IAAIK,EAAM/V,SAASgW,YAAaF,GAChC,OAASA,GAER,IAAK,cAGJ,IAAIG,EAAUJ,EAAOpP,GAAKoP,EAAOI,SAAW,EACxCC,EAAUL,EAAO7P,GAAK6P,EAAOK,SAAW,EAC5CH,EAAII,eAAgBT,EAAWG,EAAOO,UAAW,EAAOP,EAAOQ,aAAc,EAAMjS,OAAQyR,EAAOS,YAAc,EAAG,EAClH,EACAL,EACAC,GACA,GAAO,GAAO,GAAO,EAAO,EAAG,MAChC,MAGD,IAAK,iBAGJ,IAAIK,EAAOR,EAAIS,mBAAqBT,EAAIU,aACxCjL,EAAOW,SAAU0J,EAAQ,CACxBQ,YAAY,EACZK,SAAS,EACTC,QAAQ,EACRC,UAAU,EACVC,SAAS,EACT3R,aAASrF,EACTiX,cAAUjX,IAEX0W,EAAMb,EAAWG,EAAOO,UAAW,EAAOP,EAAOQ,WAAYjS,OAAQyR,EAAOa,QAASb,EAAOc,OAAQd,EAAOe,SAAUf,EAAOgB,QAAShB,EAAO3Q,QAAS2Q,EAAOiB,UAC5J,MAGD,QAGCf,EAAIgB,UAAWrB,EAAWG,EAAOO,UAAW,EAAOP,EAAOQ,aAAc,GACxE,MAKF7K,EAAOW,SAAU4J,EAAKH,GACtBd,EAAKjP,cAAekQ,IAGrB7J,KAAM,SAAe4I,EAAM9P,EAAOiI,EAAM+J,GAEvC,IAAIC,EAAOD,IAAW,EAUtB,OATKlC,EAAK1P,iBAET0P,EAAK1P,iBAAkBJ,EAAOiI,EAAMgK,GAEzBnC,EAAKoC,aAEhBpC,EAAKoC,YAAa,KAAOlS,EAAOiI,GAG1B2H,GAGRuC,OAAQ,SAAiBrC,EAAM9P,EAAOiI,EAAM+J,GAE3C,IAAIC,EAAOD,IAAW,EAUtB,OATKlC,EAAK7P,oBAET6P,EAAK7P,oBAAqBD,EAAOiI,EAAMgK,GAE5BnC,EAAKsC,aAEhBtC,EAAKsC,YAAa,KAAOpS,EAAOiI,GAG1B2H,GAGRyC,SAAU,SAAmBvC,EAAMgB,GAElC,QAAwBjW,IAAnBiV,EAAKgB,UAEThB,EAAKgB,UAAYA,OAEX,GAAKhB,EAAKgB,YAAcA,EAAY,CAE1C,IAAIwB,EAAUxC,EAAKgB,UAAUyB,MAAO,OACI,IAAnCD,EAAQE,QAAS1B,KAErBwB,EAAQG,KAAM3B,GACdhB,EAAKgB,UAAYwB,EAAQI,KAAM,KAAMC,QAAS,OAAQ,IAAKA,QAAS,OAAQ,KAK9E,OAAO/C,GAGRgD,YAAa,SAAsB9C,EAAMgB,GAExC,GAAKA,EAEJ,GAAKhB,EAAKgB,YAAcA,EAEvBhB,EAAK+C,gBAAiB,aAEhB,CAEN,IAAIP,EAAUxC,EAAKgB,UAAUyB,MAAO,MAChCO,EAAQR,EAAQE,QAAS1B,IACZ,IAAZgC,IAEJR,EAAQS,OAAQD,EAAO,GACvBhD,EAAKgB,UAAYwB,EAAQI,KAAM,WAQjC5C,EAAKgB,eAAYjW,EAGlB,OAAO+U,GAGRoD,SAAU,SAAmBlD,EAAMgB,GAElC,OAAO,IAAImC,OAAQ,aAAenC,EAAY,cAAevH,KAAMuG,EAAKgB,aAAe,GAGxFoC,SAAU,SAAmBpD,GAE5B,IAAInL,EAAQwO,iBAAkBrD,GAC9B,OAAOJ,EAAkB/K,EAAO,sBAA0B+K,EAAkB/K,EAAO,uBAA2B+K,EAAkB/K,EAAO,iBAAqB+K,EAAkB/K,EAAO,kBAAsB+K,EAAkB/K,EAAM5I,QAGpOqX,UAAW,SAAoBtD,GAE9B,IAAInL,EAAQwO,iBAAkBrD,GAC9B,OAAOJ,EAAkB/K,EAAO,qBAAyB+K,EAAkB/K,EAAO,wBAA4B+K,EAAkB/K,EAAO,gBAAoB+K,EAAkB/K,EAAO,mBAAuB+K,EAAkB/K,EAAM3I,SAGpOqX,UAAW,SAAoBC,GAE9B,IAAIxD,EAAOwD,EACPC,EAAS,CAAE1X,KAAM,EAAGC,IAAK,GAC7B,GAAKgU,EAAK0D,aAET,GAECD,EAAO1X,MAAQiU,EAAK2D,WACpBF,EAAOzX,KAAOgU,EAAK4D,UACnB5D,EAAOA,EAAK0D,mBAEH1D,GAGX,OAAOyD,GAGRI,SAAU,SAAmB7D,GAE5B,OAAOA,IAAS9U,SAAS4Y,gBAAmB9D,EAAKnR,MAAQmR,EAAK+D,QAK5DC,EAAoB,SAAWC,GAGlC,SAASD,EAAmBnZ,EAAQuS,GAEnCf,EAAgBhR,KAAM2Y,GACtB,IAAIE,EAASjG,EAA2B5S,MAAQ2Y,EAAkBhG,WAAaxJ,OAAOkJ,eAAgBsG,IAAsBlN,KAAMzL,KAAMR,EAAQuS,IAC5IhS,EAAQ8Y,EAIZ,SAASC,IAER/Y,EAAMgZ,UAAYhZ,EAAMiZ,QAMzB,OAXAH,EAAOG,OAASH,EAAO/E,WACvB+E,EAAOI,WAAapZ,SAAS4J,cAAe,SAC5CoP,EAAOI,WAAWvP,aAAc,OAAQ,YAMxC+K,EAAI1I,KAAM8M,EAAOI,WAAY,SAAUH,GAAU,GACjDD,EAAOpZ,WAAWoK,YAAagP,EAAOI,YACtCJ,EAAOhF,gBACAgF,EAqCR,OAtDAtG,EAAUoG,EAAmBC,GAoB7BxH,EAAauH,EAAmB,CAAE,CACjC9M,IAAK,WACL+E,MAAO,SAAmB/F,GAEzB,IAAIwE,EAAWyC,EAAK6G,EAAkBzP,UAAUyJ,WAAaxJ,OAAOkJ,eAAgBsG,EAAkBzP,WAAa,WAAYlJ,MAAOyL,KAAMzL,KAAM6K,GAOlJ,OANK7K,KAAK2T,kBAET3T,KAAK2T,iBAAiBlI,KAAMzL,KAAMA,KAAK8T,YAGxC9T,KAAKgZ,OAAShZ,KAAK8T,WACZzE,IAGN,CACFxD,IAAK,gBACL+E,MAAO,WAcN,OAZyB,IAApB5Q,KAAK8T,YAET9T,KAAKiZ,WAAWvP,aAAc,UAAW,WACzC1J,KAAKiZ,WAAWC,SAAU,EAC1BlZ,KAAKgZ,QAAS,IAIdhZ,KAAKiZ,WAAWC,SAAU,EAC1BlZ,KAAKgZ,QAAS,GAGRlH,EAAK6G,EAAkBzP,UAAUyJ,WAAaxJ,OAAOkJ,eAAgBsG,EAAkBzP,WAAa,gBAAiBlJ,MAAOyL,KAAMzL,UAIpI2Y,EAxDgB,CA0DrBnF,GAEC2F,EAAmB,SAAWP,GAGjC,SAASO,EAAkB3Z,EAAQuS,EAAUqH,GAE5CpI,EAAgBhR,KAAMmZ,GACtB,IAAIN,EAASjG,EAA2B5S,MAAQmZ,EAAiBxG,WAAaxJ,OAAOkJ,eAAgB8G,IAAqB1N,KAAMzL,KAAMR,EAAQuS,IAC1IsH,EAAUD,EACVrZ,EAAQ8Y,EAEZ,GADAA,EAAOS,SAAWzZ,SAAS4J,cAAe,UACrC4B,EAAOoC,QAAS4L,GAAY,CAEhC,IAAIE,EAAM,GACVlO,EAAOG,KAAM6N,GAAS,SAAWG,GAEhCD,EAAKC,GAAYA,KAGlBH,EAAUE,EAmBX,OAhBAlO,EAAOG,KAAM6N,GAAS,SAAWzI,EAAO/E,GAEvC,IAAI4N,EAAM5Z,SAAS4J,cAAe,UAClCgQ,EAAI9P,UAAYkC,EAChB4N,EAAI/P,aAAc,QAASkH,GAC3B7Q,EAAMuZ,SAASzP,YAAa4P,MAG7BZ,EAAOhF,gBACPY,EAAI1I,KAAM8M,EAAOS,SAAU,UAAU,WAEpC,IAAII,EAAe1Z,KAAKqZ,QAASrZ,KAAK2Z,eAAgB/I,MACtD7Q,EAAMgZ,SAAUW,MAGjBb,EAAOpZ,WAAWoK,YAAagP,EAAOS,UAC/BT,EA0BR,OA7DAtG,EAAU4G,EAAkBP,GAsC5BxH,EAAa+H,EAAkB,CAAE,CAChCtN,IAAK,WACL+E,MAAO,SAAmB/F,GAEzB,IAAIwE,EAAWyC,EAAKqH,EAAiBjQ,UAAUyJ,WAAaxJ,OAAOkJ,eAAgB8G,EAAiBjQ,WAAa,WAAYlJ,MAAOyL,KAAMzL,KAAM6K,GAMhJ,OALK7K,KAAK2T,kBAET3T,KAAK2T,iBAAiBlI,KAAMzL,KAAMA,KAAK8T,YAGjCzE,IAGN,CACFxD,IAAK,gBACL+E,MAAO,WAEN,OAAK6D,EAAI+D,SAAUxY,KAAKsZ,UAAoBtZ,MAC5CA,KAAKsZ,SAAS1I,MAAQ5Q,KAAK8T,WACpBhC,EAAKqH,EAAiBjQ,UAAUyJ,WAAaxJ,OAAOkJ,eAAgB8G,EAAiBjQ,WAAa,gBAAiBlJ,MAAOyL,KAAMzL,WAIlImZ,EA/De,CAiEpB3F,GAECoG,EAAmB,SAAWhB,GAGjC,SAASgB,EAAkBpa,EAAQuS,GAElCf,EAAgBhR,KAAM4Z,GACtB,IAAIf,EAASjG,EAA2B5S,MAAQ4Z,EAAiBjH,WAAaxJ,OAAOkJ,eAAgBuH,IAAqBnO,KAAMzL,KAAMR,EAAQuS,IAC1IhS,EAAQ8Y,EACZ,SAASC,IAER/Y,EAAMgZ,SAAUhZ,EAAM8Z,QAAQjJ,OAG/B,SAASkJ,IAEH/Z,EAAM4T,kBAEV5T,EAAM4T,iBAAiBlI,KAAM1L,EAAOA,EAAM+T,YAqB5C,OAhBA+E,EAAOgB,QAAUha,SAAS4J,cAAe,SACzCoP,EAAOgB,QAAQnQ,aAAc,OAAQ,QACrC+K,EAAI1I,KAAM8M,EAAOgB,QAAS,QAASf,GACnCrE,EAAI1I,KAAM8M,EAAOgB,QAAS,SAAUf,GACpCrE,EAAI1I,KAAM8M,EAAOgB,QAAS,OAAQC,GAClCrF,EAAI1I,KAAM8M,EAAOgB,QAAS,WAAW,SAAWxF,GAE5B,KAAdA,EAAEtP,SAEN/E,KAAK+Z,UAKPlB,EAAOhF,gBACPgF,EAAOpZ,WAAWoK,YAAagP,EAAOgB,SAC/BhB,EAgBR,OApDAtG,EAAUqH,EAAkBhB,GAuC5BxH,EAAawI,EAAkB,CAAE,CAChC/N,IAAK,gBACL+E,MAAO,WAON,OALO6D,EAAI+D,SAAUxY,KAAK6Z,WAEzB7Z,KAAK6Z,QAAQjJ,MAAQ5Q,KAAK8T,YAGpBhC,EAAK8H,EAAiB1Q,UAAUyJ,WAAaxJ,OAAOkJ,eAAgBuH,EAAiB1Q,WAAa,gBAAiBlJ,MAAOyL,KAAMzL,UAIlI4Z,EAtDe,CAwDpBpG,GAEH,SAASwG,EAAa1T,GAErB,IAAI2T,EAAK3T,EAAE8D,WACX,OAAK6P,EAAG5C,QAAS,MAAU,EAEnB4C,EAAGhU,OAASgU,EAAG5C,QAAS,KAAQ,EAGjC,EAGR,IAAI6C,EAAmB,SAAWtB,GAGjC,SAASsB,EAAkB1a,EAAQuS,EAAU2D,GAE5C1E,EAAgBhR,KAAMka,GACtB,IAAIna,EAAQ6S,EAA2B5S,MAAQka,EAAiBvH,WAAaxJ,OAAOkJ,eAAgB6H,IAAqBzO,KAAMzL,KAAMR,EAAQuS,IACzIoI,EAAUzE,GAAU,GAsBxB,OArBA3V,EAAMqa,MAAQD,EAAQ/J,IACtBrQ,EAAMsa,MAAQF,EAAQ9J,IACtBtQ,EAAMua,OAASH,EAAQI,KAClBlP,EAAOS,YAAa/L,EAAMua,QAEF,IAAvBva,EAAM0T,aAEV1T,EAAMya,cAAgB,EAItBza,EAAMya,cAAgBpU,KAAKqU,IAAK,GAAIrU,KAAKyJ,MAAOzJ,KAAKsU,IAAKtU,KAAKuU,IAAK5a,EAAM0T,eAAmBrN,KAAKwU,OAAW,GAM9G7a,EAAMya,cAAgBza,EAAMua,OAG7Bva,EAAM8a,YAAcb,EAAaja,EAAMya,eAChCza,EAoDR,OA/EAwS,EAAU2H,EAAkBtB,GA8B5BxH,EAAa8I,EAAkB,CAAE,CAChCrO,IAAK,WACL+E,MAAO,SAAmB/F,GAEzB,IAAIiQ,EAAKjQ,EAeT,YAdoBnL,IAAfM,KAAKoa,OAAuBU,EAAK9a,KAAKoa,MAE1CU,EAAK9a,KAAKoa,WAEgB1a,IAAfM,KAAKqa,OAAuBS,EAAK9a,KAAKqa,QAEjDS,EAAK9a,KAAKqa,YAGU3a,IAAhBM,KAAKsa,QAAwBQ,EAAK9a,KAAKsa,SAAW,IAEtDQ,EAAK1U,KAAKkE,MAAOwQ,EAAK9a,KAAKsa,QAAWta,KAAKsa,QAGrCxI,EAAKoI,EAAiBhR,UAAUyJ,WAAaxJ,OAAOkJ,eAAgB6H,EAAiBhR,WAAa,WAAYlJ,MAAOyL,KAAMzL,KAAM8a,KAGvI,CACFjP,IAAK,MACL+E,MAAO,SAAcmK,GAGpB,OADA/a,KAAKoa,MAAQW,EACN/a,OAGN,CACF6L,IAAK,MACL+E,MAAO,SAAcoK,GAGpB,OADAhb,KAAKqa,MAAQW,EACNhb,OAGN,CACF6L,IAAK,OACL+E,MAAO,SAAeqK,GAKrB,OAHAjb,KAAKsa,OAASW,EACdjb,KAAKwa,cAAgBS,EACrBjb,KAAK6a,YAAcb,EAAaiB,GACzBjb,SAIFka,EAjFe,CAmFpB1G,GAEH,SAAS0H,EAAgBtK,EAAOuK,GAE/B,IAAIC,EAAQhV,KAAKqU,IAAK,GAAIU,GAC1B,OAAO/U,KAAKkE,MAAOsG,EAAQwK,GAAUA,EAGtC,IAAIC,EAAsB,SAAWC,GAGpC,SAASD,EAAqB7b,EAAQuS,EAAU2D,GAE/C1E,EAAgBhR,KAAMqb,GACtB,IAAIxC,EAASjG,EAA2B5S,MAAQqb,EAAoB1I,WAAaxJ,OAAOkJ,eAAgBgJ,IAAwB5P,KAAMzL,KAAMR,EAAQuS,EAAU2D,IAC9JmD,EAAO0C,uBAAwB,EAC/B,IAAIxb,EAAQ8Y,EACR2C,OAAQ,EACZ,SAAS1C,IAER,IAAI2C,EAAY9M,WAAY5O,EAAM8Z,QAAQjJ,OACnCvF,EAAOkC,MAAOkO,IAEpB1b,EAAMgZ,SAAU0C,GAKlB,SAASC,IAEH3b,EAAM4T,kBAEV5T,EAAM4T,iBAAiBlI,KAAM1L,EAAOA,EAAM+T,YAK5C,SAASgG,IAER4B,IAGD,SAASC,EAAatH,GAErB,IAAIuH,EAAOJ,EAAQnH,EAAE0B,QACrBhW,EAAMgZ,SAAUhZ,EAAM+T,WAAa8H,EAAO7b,EAAMya,eAChDgB,EAAQnH,EAAE0B,QAGX,SAAS8F,IAERpH,EAAIuC,OAAQ/S,OAAQ,YAAa0X,GACjClH,EAAIuC,OAAQ/S,OAAQ,UAAW4X,GAC/BH,IAGD,SAASI,EAAazH,GAErBI,EAAI1I,KAAM9H,OAAQ,YAAa0X,GAC/BlH,EAAI1I,KAAM9H,OAAQ,UAAW4X,GAC7BL,EAAQnH,EAAE0B,QAsBX,OAnBA8C,EAAOgB,QAAUha,SAAS4J,cAAe,SACzCoP,EAAOgB,QAAQnQ,aAAc,OAAQ,QACrC+K,EAAI1I,KAAM8M,EAAOgB,QAAS,SAAUf,GACpCrE,EAAI1I,KAAM8M,EAAOgB,QAAS,OAAQC,GAClCrF,EAAI1I,KAAM8M,EAAOgB,QAAS,YAAaiC,GACvCrH,EAAI1I,KAAM8M,EAAOgB,QAAS,WAAW,SAAWxF,GAE5B,KAAdA,EAAEtP,UAENhF,EAAMwb,uBAAwB,EAC9Bvb,KAAK+Z,OACLha,EAAMwb,uBAAwB,EAC9BG,QAKF7C,EAAOhF,gBACPgF,EAAOpZ,WAAWoK,YAAagP,EAAOgB,SAC/BhB,EAYR,OApFAtG,EAAU8I,EAAqBC,GA2E/BlK,EAAaiK,EAAqB,CAAE,CACnCxP,IAAK,gBACL+E,MAAO,WAGN,OADA5Q,KAAK6Z,QAAQjJ,MAAQ5Q,KAAKub,sBAAwBvb,KAAK8T,WAAaoH,EAAgBlb,KAAK8T,WAAY9T,KAAK6a,aACnG/I,EAAKuJ,EAAoBnS,UAAUyJ,WAAaxJ,OAAOkJ,eAAgBgJ,EAAoBnS,WAAa,gBAAiBlJ,MAAOyL,KAAMzL,UAIxIqb,EAtFkB,CAwFvBnB,GAEH,SAASX,EAAK1O,EAAGkR,EAAIC,EAAIC,EAAIC,GAE5B,OAAOD,GAAuBpR,EAAIkR,IAASC,EAAKD,IAAlCG,EAAKD,GAGpB,IAAIE,EAAyB,SAAWb,GAGvC,SAASa,EAAwB3c,EAAQuS,EAAU3B,EAAKC,EAAKkK,GAE5DvJ,EAAgBhR,KAAMmc,GACtB,IAAItD,EAASjG,EAA2B5S,MAAQmc,EAAuBxJ,WAAaxJ,OAAOkJ,eAAgB8J,IAA2B1Q,KAAMzL,KAAMR,EAAQuS,EAAU,CAAE3B,IAAKA,EAAKC,IAAKA,EAAKkK,KAAMA,KAC5Lxa,EAAQ8Y,EAOZ,SAASiD,EAAazH,GAErBxU,SAAS4Y,cAAcsB,OACvBtF,EAAI1I,KAAM9H,OAAQ,YAAa0X,GAC/BlH,EAAI1I,KAAM9H,OAAQ,UAAW4X,GAC7BF,EAAatH,GAGd,SAASsH,EAAatH,GAErBA,EAAElP,iBACF,IAAIiX,EAASrc,EAAMsc,aAAaxY,wBAEhC,OADA9D,EAAMgZ,SAAUQ,EAAKlF,EAAEyB,QAASsG,EAAO1b,KAAM0b,EAAO/T,MAAOtI,EAAMqa,MAAOra,EAAMsa,SACvE,EAGR,SAASwB,IAERpH,EAAIuC,OAAQ/S,OAAQ,YAAa0X,GACjClH,EAAIuC,OAAQ/S,OAAQ,UAAW4X,GAC1B9b,EAAM4T,kBAEV5T,EAAM4T,iBAAiBlI,KAAM1L,EAAOA,EAAM+T,YAK5C,SAASwI,EAAcjI,GAEI,IAArBA,EAAErO,QAAQC,SAKfwO,EAAI1I,KAAM9H,OAAQ,YAAasY,GAC/B9H,EAAI1I,KAAM9H,OAAQ,WAAYuY,GAC9BD,EAAalI,IAGd,SAASkI,EAAalI,GAErB,IAAIyB,EAAUzB,EAAErO,QAAS,GAAI8P,QACzBsG,EAASrc,EAAMsc,aAAaxY,wBAChC9D,EAAMgZ,SAAUQ,EAAKzD,EAASsG,EAAO1b,KAAM0b,EAAO/T,MAAOtI,EAAMqa,MAAOra,EAAMsa,QAG7E,SAASmC,IAER/H,EAAIuC,OAAQ/S,OAAQ,YAAasY,GACjC9H,EAAIuC,OAAQ/S,OAAQ,WAAYuY,GAC3Bzc,EAAM4T,kBAEV5T,EAAM4T,iBAAiBlI,KAAM1L,EAAOA,EAAM+T,YAQ5C,OAlEA+E,EAAOwD,aAAexc,SAAS4J,cAAe,OAC9CoP,EAAO4D,aAAe5c,SAAS4J,cAAe,OAC9CgL,EAAI1I,KAAM8M,EAAOwD,aAAc,YAAaP,GAC5CrH,EAAI1I,KAAM8M,EAAOwD,aAAc,aAAcC,GAC7C7H,EAAIyC,SAAU2B,EAAOwD,aAAc,UACnC5H,EAAIyC,SAAU2B,EAAO4D,aAAc,aA0DnC5D,EAAOhF,gBACPgF,EAAOwD,aAAaxS,YAAagP,EAAO4D,cACxC5D,EAAOpZ,WAAWoK,YAAagP,EAAOwD,cAC/BxD,EAaR,OArFAtG,EAAU4J,EAAwBb,GA2ElClK,EAAa+K,EAAwB,CAAE,CACtCtQ,IAAK,gBACL+E,MAAO,WAEN,IAAI8L,GAAQ1c,KAAK8T,WAAa9T,KAAKoa,QAAYpa,KAAKqa,MAAQra,KAAKoa,OAEjE,OADApa,KAAKyc,aAAajT,MAAM5I,MAAc,IAAN8b,EAAY,IACrC5K,EAAKqK,EAAuBjT,UAAUyJ,WAAaxJ,OAAOkJ,eAAgB8J,EAAuBjT,WAAa,gBAAiBlJ,MAAOyL,KAAMzL,UAI9Imc,EAvFqB,CAyF1BjC,GAECyC,EAAqB,SAAW/D,GAGnC,SAAS+D,EAAoBnd,EAAQuS,EAAU6K,GAE9C5L,EAAgBhR,KAAM2c,GACtB,IAAI9D,EAASjG,EAA2B5S,MAAQ2c,EAAmBhK,WAAaxJ,OAAOkJ,eAAgBsK,IAAuBlR,KAAMzL,KAAMR,EAAQuS,IAC9IhS,EAAQ8Y,EAYZ,OAXAA,EAAOgE,SAAWhd,SAAS4J,cAAe,OAC1CoP,EAAOgE,SAASlT,eAAqBjK,IAATkd,EAAqB,OAASA,EAC1DnI,EAAI1I,KAAM8M,EAAOgE,SAAU,SAAS,SAAWxI,GAI9C,OAFAA,EAAElP,iBACFpF,EAAM+c,QACC,KAGRrI,EAAIyC,SAAU2B,EAAOgE,SAAU,UAC/BhE,EAAOpZ,WAAWoK,YAAagP,EAAOgE,UAC/BhE,EAqBR,OAtCAtG,EAAUoK,EAAoB/D,GAoB9BxH,EAAauL,EAAoB,CAAE,CAClC9Q,IAAK,OACL+E,MAAO,WAED5Q,KAAK0T,YAET1T,KAAK0T,WAAWjI,KAAMzL,MAGvBA,KAAK8T,WAAWrI,KAAMzL,KAAKR,QACtBQ,KAAK2T,kBAET3T,KAAK2T,iBAAiBlI,KAAMzL,KAAMA,KAAK8T,gBAMnC6I,EAxCiB,CA0CtBnJ,GAECuJ,EAAkB,SAAWnE,GAGhC,SAASmE,EAAiBvd,EAAQuS,GAEjCf,EAAgBhR,KAAM+c,GACtB,IAAIlE,EAASjG,EAA2B5S,MAAQ+c,EAAgBpK,WAAaxJ,OAAOkJ,eAAgB0K,IAAoBtR,KAAMzL,KAAMR,EAAQuS,IAC5I8G,EAAOmE,QAAU,IAAIjK,EAAO8F,EAAO/E,YACnC+E,EAAOoE,OAAS,IAAIlK,EAAO,GAC3B,IAAIhT,EAAQ8Y,EACZA,EAAOpZ,WAAaI,SAAS4J,cAAe,OAC5CgL,EAAIC,eAAgBmE,EAAOpZ,YAAY,GACvCoZ,EAAOqE,WAAard,SAAS4J,cAAe,OAC5CoP,EAAOqE,WAAWvH,UAAY,WAC9BkD,EAAOsE,mBAAqBtd,SAAS4J,cAAe,OACpDoP,EAAOsE,mBAAmBxH,UAAY,mBACtCkD,EAAOuE,aAAevd,SAAS4J,cAAe,OAC9CoP,EAAOuE,aAAazH,UAAY,aAChCkD,EAAOwE,oBAAsB,aAC7BxE,EAAOyE,WAAazd,SAAS4J,cAAe,OAC5CoP,EAAOyE,WAAW3H,UAAY,WAC9BkD,EAAO0E,YAAc1d,SAAS4J,cAAe,OAC7CoP,EAAO0E,YAAY5H,UAAY,YAC/BkD,EAAOgB,QAAUha,SAAS4J,cAAe,SACzCoP,EAAOgB,QAAQrW,KAAO,OACtBqV,EAAO2E,mBAAqB,aAC5B/I,EAAI1I,KAAM8M,EAAOgB,QAAS,WAAW,SAAWxF,GAE5B,KAAdA,EAAEtP,SAEN+U,EAAOrO,KAAMzL,SAKfyU,EAAI1I,KAAM8M,EAAOgB,QAAS,OAAQC,GAClCrF,EAAI1I,KAAM8M,EAAOqE,WAAY,aAAa,WAEzCzI,EAAIyC,SAAUlX,KAAM,QAAS+L,KAAM9H,OAAQ,WAAW,WAErDwQ,EAAIgD,YAAa1X,EAAMmd,WAAY,cAKrCzI,EAAI1I,KAAM8M,EAAOqE,WAAY,cAAc,WAE1CzI,EAAIyC,SAAUlX,KAAM,QAAS+L,KAAM9H,OAAQ,YAAY,WAEtDwQ,EAAIgD,YAAa1X,EAAMmd,WAAY,cAKrC,IAAIO,EAAa5d,SAAS4J,cAAe,OA8DzC,SAASiU,EAAWrJ,GAEnBsJ,EAAOtJ,GACPI,EAAI1I,KAAM9H,OAAQ,YAAa0Z,GAC/BlJ,EAAI1I,KAAM9H,OAAQ,YAAa0Z,GAC/BlJ,EAAI1I,KAAM9H,OAAQ,UAAW2Z,GAC7BnJ,EAAI1I,KAAM9H,OAAQ,WAAY2Z,GAG/B,SAASC,EAAYxJ,GAEpByJ,EAAMzJ,GACNI,EAAI1I,KAAM9H,OAAQ,YAAa6Z,GAC/BrJ,EAAI1I,KAAM9H,OAAQ,YAAa6Z,GAC/BrJ,EAAI1I,KAAM9H,OAAQ,UAAW8Z,GAC7BtJ,EAAI1I,KAAM9H,OAAQ,WAAY8Z,GAG/B,SAASH,IAERnJ,EAAIuC,OAAQ/S,OAAQ,YAAa0Z,GACjClJ,EAAIuC,OAAQ/S,OAAQ,YAAa0Z,GACjClJ,EAAIuC,OAAQ/S,OAAQ,UAAW2Z,GAC/BnJ,EAAIuC,OAAQ/S,OAAQ,WAAY2Z,GAChClC,IAGD,SAASqC,IAERtJ,EAAIuC,OAAQ/S,OAAQ,YAAa6Z,GACjCrJ,EAAIuC,OAAQ/S,OAAQ,YAAa6Z,GACjCrJ,EAAIuC,OAAQ/S,OAAQ,UAAW8Z,GAC/BtJ,EAAIuC,OAAQ/S,OAAQ,WAAY8Z,GAChCrC,IAGD,SAAS5B,IAER,IAAI1N,EAAIkD,EAAWtP,KAAK4Q,QACb,IAANxE,GAEJrM,EAAMid,QAAQ9S,QAAUkC,EACxBrM,EAAMgZ,SAAUhZ,EAAMid,QAAQgB,eAI9Bhe,KAAK4Q,MAAQ7Q,EAAMid,QAAQ5S,WAK7B,SAASsR,IAEH3b,EAAM4T,kBAEV5T,EAAM4T,iBAAiBlI,KAAM1L,EAAOA,EAAMid,QAAQgB,cAapD,SAASL,EAAOtJ,IAEsB,IAAhCA,EAAE7Q,KAAK6T,QAAS,UAEpBhD,EAAElP,iBAGH,IAAI8Y,EAAYle,EAAMod,mBAAmBtZ,wBACrCqa,EAAO7J,EAAErO,SAAWqO,EAAErO,QAAS,IAAOqO,EACzCyB,EAAUoI,EAAKpI,QACfC,EAAUmI,EAAKnI,QACZpL,GAAMmL,EAAUmI,EAAUvd,OAAWud,EAAU5V,MAAQ4V,EAAUvd,MACjEmK,EAAI,GAAMkL,EAAUkI,EAAUtd,MAAUsd,EAAUzV,OAASyV,EAAUtd,KAsBzE,OArBKkK,EAAI,EAERA,EAAI,EAEOA,EAAI,IAEfA,EAAI,GAGAF,EAAI,EAERA,EAAI,EAEOA,EAAI,IAEfA,EAAI,GAGL5K,EAAMid,QAAQnS,EAAIA,EAClB9K,EAAMid,QAAQrS,EAAIA,EAClB5K,EAAMgZ,SAAUhZ,EAAMid,QAAQgB,eACvB,EAGR,SAASF,EAAMzJ,IAEuB,IAAhCA,EAAE7Q,KAAK6T,QAAS,UAEpBhD,EAAElP,iBAGH,IAAI8Y,EAAYle,EAAMwd,YAAY1Z,wBAC9Bsa,EAAQ9J,EAAErO,SAAWqO,EAAErO,QAAS,IAAOqO,EAC1C0B,EAAUoI,EAAMpI,QACbrL,EAAI,GAAMqL,EAAUkI,EAAUtd,MAAUsd,EAAUzV,OAASyV,EAAUtd,KAYzE,OAXK+J,EAAI,EAERA,EAAI,EAEOA,EAAI,IAEfA,EAAI,GAGL3K,EAAMid,QAAQtS,EAAQ,IAAJA,EAClB3K,EAAMgZ,SAAUhZ,EAAMid,QAAQgB,eACvB,EAGR,OA/LA3S,EAAOE,OAAQsN,EAAOqE,WAAW1T,MAAO,CACvC5I,MAAO,QACPC,OAAQ,QACRud,QAAS,MACTC,gBAAiB,OACjBC,UAAW,gCAEZjT,EAAOE,OAAQsN,EAAOuE,aAAa5T,MAAO,CACzCtG,SAAU,WACVtC,MAAO,OACPC,OAAQ,OACR0d,OAAQ1F,EAAOwE,qBAAwBxE,EAAOmE,QAAQnS,EAAI,GAAM,OAAS,QACzEyT,UAAW,8BACXE,aAAc,OACdC,OAAQ,IAETpT,EAAOE,OAAQsN,EAAOyE,WAAW9T,MAAO,CACvCtG,SAAU,WACVtC,MAAO,OACPC,OAAQ,MACR6d,YAAa,iBACbD,OAAQ,IAETpT,EAAOE,OAAQsN,EAAOsE,mBAAmB3T,MAAO,CAC/C5I,MAAO,QACPC,OAAQ,QACR0d,OAAQ,iBACRI,YAAa,MACbC,QAAS,eACTC,OAAQ,YAETxT,EAAOE,OAAQkS,EAAWjU,MAAO,CAChC5I,MAAO,OACPC,OAAQ,OACRie,WAAY,SAEbC,EAAgBtB,EAAY,MAAO,gBAAiB,QACpDpS,EAAOE,OAAQsN,EAAO0E,YAAY/T,MAAO,CACxC5I,MAAO,OACPC,OAAQ,QACR0d,OAAQ,iBACRM,OAAQ,YACR3b,SAAU,WACVvC,IAAK,MACL0H,MAAO,QAER2W,EAAanG,EAAO0E,aACpBlS,EAAOE,OAAQsN,EAAOgB,QAAQrQ,MAAO,CACpCyV,QAAS,OACTC,UAAW,SACXnV,MAAO,OACPwU,OAAQ,EACRY,WAAY,OACZC,WAAYvG,EAAO2E,mBAAqB,oBAEzC/I,EAAI1I,KAAM8M,EAAOsE,mBAAoB,YAAaO,GAClDjJ,EAAI1I,KAAM8M,EAAOsE,mBAAoB,aAAcO,GACnDjJ,EAAI1I,KAAM8M,EAAOuE,aAAc,YAAaM,GAC5CjJ,EAAI1I,KAAM8M,EAAOuE,aAAc,aAAcM,GAC7CjJ,EAAI1I,KAAM8M,EAAO0E,YAAa,YAAaM,GAC3CpJ,EAAI1I,KAAM8M,EAAO0E,YAAa,aAAcM,GA6D5ChF,EAAOsE,mBAAmBtT,YAAa4T,GACvC5E,EAAOqE,WAAWrT,YAAagP,EAAOuE,cACtCvE,EAAOqE,WAAWrT,YAAagP,EAAOsE,oBACtCtE,EAAOqE,WAAWrT,YAAagP,EAAO0E,aACtC1E,EAAO0E,YAAY1T,YAAagP,EAAOyE,YACvCzE,EAAOpZ,WAAWoK,YAAagP,EAAOgB,SACtChB,EAAOpZ,WAAWoK,YAAagP,EAAOqE,YACtCrE,EAAOhF,gBA+DAgF,EAmDR,OAvSAtG,EAAUwK,EAAiBnE,GAuP3BxH,EAAa2L,EAAiB,CAAE,CAC/BlR,IAAK,gBACL+E,MAAO,WAEN,IAAIxE,EAAIkD,EAAWtP,KAAK8T,YACxB,IAAW,IAAN1H,EAAc,CAElB,IAAIiT,GAAW,EACfhU,EAAOG,KAAMuH,EAAMQ,YAAY,SAAWL,GAEzC,IAAO7H,EAAOS,YAAaM,EAAG8G,MAAmB7H,EAAOS,YAAa9L,KAAKgd,QAAQ9S,QAASgJ,KAAiB9G,EAAG8G,KAAgBlT,KAAKgd,QAAQ9S,QAASgJ,GAGpJ,OADAmM,GAAW,EACJ,KAINrf,MACEqf,GAEJhU,EAAOE,OAAQvL,KAAKgd,QAAQ9S,QAASkC,GAKvCf,EAAOE,OAAQvL,KAAKid,OAAO/S,QAASlK,KAAKgd,QAAQ9S,SACjDlK,KAAKid,OAAOxS,EAAI,EAChB,IAAI6U,EAAOtf,KAAKgd,QAAQnS,EAAI,IAAO7K,KAAKgd,QAAQrS,EAAI,GAAM,IAAM,EAC5D4U,EAAQ,IAAMD,EAClBjU,EAAOE,OAAQvL,KAAKod,aAAa5T,MAAO,CACvCgW,WAAY,IAAMxf,KAAKgd,QAAQrS,EAAI,EAAI,KACvC8U,UAAW,KAAQ,EAAIzf,KAAKgd,QAAQnS,GAAM,EAAI,KAC9CwT,gBAAiBre,KAAKid,OAAOyC,cAC7BnB,OAAQve,KAAKqd,oBAAsB,OAASiC,EAAO,IAAMA,EAAO,IAAMA,EAAO,MAE9Etf,KAAKsd,WAAW9T,MAAMiW,UAA2C,KAA7B,EAAIzf,KAAKgd,QAAQtS,EAAI,KAAc,KACvE1K,KAAKid,OAAOtS,EAAI,EAChB3K,KAAKid,OAAOpS,EAAI,EAChBkU,EAAgB/e,KAAKmd,mBAAoB,OAAQ,OAAQnd,KAAKid,OAAOyC,eACrE1f,KAAK6Z,QAAQjJ,MAAQ5Q,KAAKgd,QAAQ5S,WAClCiB,EAAOE,OAAQvL,KAAK6Z,QAAQrQ,MAAO,CAClC6U,gBAAiBre,KAAKgd,QAAQ0C,cAC9B3V,MAAO,OAASuV,EAAO,IAAMA,EAAO,IAAMA,EAAO,IACjDF,WAAYpf,KAAKwd,mBAAqB,QAAU+B,EAAQ,IAAMA,EAAQ,IAAMA,EAAQ,aAKhFxC,EAzSc,CA2SnBvJ,GACCmM,EAAU,CAAE,QAAS,MAAO,WAAY,OAAQ,IACpD,SAASZ,EAAgBpK,EAAMrO,EAAGmE,EAAGD,GAEpCmK,EAAKnL,MAAMsV,WAAa,GACxBzT,EAAOG,KAAMmU,GAAS,SAAWC,GAEhCjL,EAAKnL,MAAMqW,SAAW,eAAiBD,EAAS,mBAAqBtZ,EAAI,KAAOmE,EAAI,QAAUD,EAAI,cAKpG,SAASwU,EAAarK,GAErBA,EAAKnL,MAAMsV,WAAa,GACxBnK,EAAKnL,MAAMqW,SAAW,qIACtBlL,EAAKnL,MAAMqW,SAAW,kIACtBlL,EAAKnL,MAAMqW,SAAW,6HACtBlL,EAAKnL,MAAMqW,SAAW,8HACtBlL,EAAKnL,MAAMqW,SAAW,0HAIvB,IAAItW,EAAM,CACTuW,KAAM,SAAeC,EAAKC,GAEzB,IAAIC,EAAMD,GAASngB,SACfqgB,EAAOD,EAAIxW,cAAe,QAC9ByW,EAAK1c,KAAO,WACZ0c,EAAKC,IAAM,aACXD,EAAKxH,KAAOqH,EACZE,EAAIG,qBAAsB,QAAU,GAAIvW,YAAaqW,IAGtDG,OAAQ,SAAiBC,EAAYN,GAEpC,IAAIC,EAAMD,GAASngB,SACf0gB,EAAW1gB,SAAS4J,cAAe,SACvC8W,EAAS/c,KAAO,WAChB+c,EAAS5W,UAAY2W,EACrB,IAAI1W,EAAOqW,EAAIG,qBAAsB,QAAU,GAC/C,IAECxW,EAAKC,YAAa0W,GAEjB,MAAQlM,OAMRmM,EAAqB,4pBAErBC,EAAoB,SAA4BjhB,EAAQuS,GAE3D,IAAI0B,EAAejU,EAAQuS,GAC3B,OAAK1G,EAAOoC,QAAS/B,UAAW,KAASL,EAAOO,SAAUF,UAAW,IAE7D,IAAIyN,EAAkB3Z,EAAQuS,EAAUrG,UAAW,IAGtDL,EAAOqC,SAAU+F,GAEhBpI,EAAOqC,SAAUhC,UAAW,KAASL,EAAOqC,SAAUhC,UAAW,IAEhEL,EAAOqC,SAAUhC,UAAW,IAEzB,IAAIyQ,EAAwB3c,EAAQuS,EAAUrG,UAAW,GAAKA,UAAW,GAAKA,UAAW,IAG1F,IAAIyQ,EAAwB3c,EAAQuS,EAAUrG,UAAW,GAAKA,UAAW,IAG5EL,EAAOqC,SAAUhC,UAAW,IAEzB,IAAI2P,EAAqB7b,EAAQuS,EAAU,CAAE3B,IAAK1E,UAAW,GAAK2E,IAAK3E,UAAW,GAAK6O,KAAM7O,UAAW,KAGzG,IAAI2P,EAAqB7b,EAAQuS,EAAU,CAAE3B,IAAK1E,UAAW,GAAK2E,IAAK3E,UAAW,KAGrFL,EAAOsC,SAAU8F,GAEd,IAAImG,EAAkBpa,EAAQuS,GAGjC1G,EAAOwC,WAAY4F,GAEhB,IAAIkJ,EAAoBnd,EAAQuS,EAAU,IAG7C1G,EAAOuC,UAAW6F,GAEf,IAAIkF,EAAmBnZ,EAAQuS,GAGhC,MAIR,SAAS2O,EAAuBC,GAE/B/T,WAAY+T,EAAU,IAAO,IAG9B,IAAIC,EAA0B3c,OAAOyc,uBAAyBzc,OAAO4c,6BAA+B5c,OAAO6c,0BAA4B7c,OAAO8c,wBAA0B9c,OAAO+c,yBAA2BN,EAEtMO,EAAc,WAEjB,SAASA,IAERjQ,EAAgBhR,KAAMihB,GACtBjhB,KAAKkhB,kBAAoBrhB,SAAS4J,cAAe,OACjD4B,EAAOE,OAAQvL,KAAKkhB,kBAAkB1X,MAAO,CAC5C6U,gBAAiB,kBACjB1d,IAAK,EACLD,KAAM,EACNke,QAAS,OACTH,OAAQ,OACR0C,QAAS,EACTC,iBAAkB,sBAClBC,WAAY,wBAEb5M,EAAIQ,eAAgBjV,KAAKkhB,mBACzBlhB,KAAKkhB,kBAAkB1X,MAAMtG,SAAW,QACxClD,KAAKP,WAAaI,SAAS4J,cAAe,OAC1C4B,EAAOE,OAAQvL,KAAKP,WAAW+J,MAAO,CACrCtG,SAAU,QACV0b,QAAS,OACTH,OAAQ,OACR0C,QAAS,EACTC,iBAAkB,uDAClBC,WAAY,iDAEbxhB,SAASyhB,KAAKzX,YAAa7J,KAAKkhB,mBAChCrhB,SAASyhB,KAAKzX,YAAa7J,KAAKP,YAChC,IAAIM,EAAQC,KACZyU,EAAI1I,KAAM/L,KAAKkhB,kBAAmB,SAAS,WAE1CnhB,EAAMwhB,UAuDR,OAlDAnQ,EAAa6P,EAAa,CAAE,CAC3BpV,IAAK,OACL+E,MAAO,WAEN,IAAI7Q,EAAQC,KACZA,KAAKkhB,kBAAkB1X,MAAMoV,QAAU,QACvC5e,KAAKP,WAAW+J,MAAMoV,QAAU,QAChC5e,KAAKP,WAAW+J,MAAM2X,QAAU,EAChCnhB,KAAKP,WAAW+J,MAAMgY,gBAAkB,aACxCxhB,KAAKyhB,SACLpW,EAAOqB,OAAO,WAEb3M,EAAMmhB,kBAAkB1X,MAAM2X,QAAU,EACxCphB,EAAMN,WAAW+J,MAAM2X,QAAU,EACjCphB,EAAMN,WAAW+J,MAAMgY,gBAAkB,gBAKzC,CACF3V,IAAK,OACL+E,MAAO,WAEN,IAAI7Q,EAAQC,KACRuhB,EAAO,SAASA,IAEnBxhB,EAAMN,WAAW+J,MAAMoV,QAAU,OACjC7e,EAAMmhB,kBAAkB1X,MAAMoV,QAAU,OACxCnK,EAAIuC,OAAQjX,EAAMN,WAAY,sBAAuB8hB,GACrD9M,EAAIuC,OAAQjX,EAAMN,WAAY,gBAAiB8hB,GAC/C9M,EAAIuC,OAAQjX,EAAMN,WAAY,iBAAkB8hB,IAGjD9M,EAAI1I,KAAM/L,KAAKP,WAAY,sBAAuB8hB,GAClD9M,EAAI1I,KAAM/L,KAAKP,WAAY,gBAAiB8hB,GAC5C9M,EAAI1I,KAAM/L,KAAKP,WAAY,iBAAkB8hB,GAC7CvhB,KAAKkhB,kBAAkB1X,MAAM2X,QAAU,EACvCnhB,KAAKP,WAAW+J,MAAM2X,QAAU,EAChCnhB,KAAKP,WAAW+J,MAAMgY,gBAAkB,eAGvC,CACF3V,IAAK,SACL+E,MAAO,WAEN5Q,KAAKP,WAAW+J,MAAM9I,KAAOuD,OAAOyd,WAAa,EAAIjN,EAAIsD,SAAU/X,KAAKP,YAAe,EAAI,KAC3FO,KAAKP,WAAW+J,MAAM7I,IAAMsD,OAAO0d,YAAc,EAAIlN,EAAIwD,UAAWjY,KAAKP,YAAe,EAAI,SAIvFwhB,EAvFU,GA2FdW,EAAatY,EAAiB,srLAElCC,EAAI8W,OAAQuB,GACZ,IAAIC,EAAgB,KAChBC,EAAgB,GAChBC,EAAsB,GACtBC,EAA8B,UAC9BC,GAAyB,WAE5B,IAEC,QAAUhe,OAAOie,aAEhB,MAAQ7N,GAET,OAAO,GARoB,GAazB8N,QAAgB,EAChBC,IAAkB,EAClBC,QAAqB,EACrBd,IAAO,EACPe,GAAe,GACfC,GAAM,SAASA,EAAK/M,GAEvB,IAAIzV,EAAQC,KACR0V,EAASF,GAAQ,GACrBxV,KAAKP,WAAaI,SAAS4J,cAAe,OAC1CzJ,KAAKwiB,KAAO3iB,SAAS4J,cAAe,MACpCzJ,KAAKP,WAAWoK,YAAa7J,KAAKwiB,MAClC/N,EAAIyC,SAAUlX,KAAKP,WAAYoiB,GAC/B7hB,KAAKyiB,UAAY,GACjBziB,KAAK0iB,cAAgB,GACrB1iB,KAAK2iB,oBAAsB,GAC3B3iB,KAAK4iB,uCAAyC,GAC9C5iB,KAAK6iB,YAAc,GACnBnN,EAASrK,EAAOW,SAAU0J,EAAQ,CACjCoN,YAAY,EACZC,WAAW,EACXniB,MAAO2hB,EAAIS,gBAEZtN,EAASrK,EAAOW,SAAU0J,EAAQ,CACjCuN,UAAWvN,EAAOqN,UAClBG,SAAUxN,EAAOqN,YAEX1X,EAAOS,YAAa4J,EAAOoK,MAUjCpK,EAAOoK,KAAO,CAAEqD,OAAQnB,GARnBtM,EAAOyN,SAEXzN,EAAOoK,KAAKqD,OAASzN,EAAOyN,QASzB9X,EAAOS,YAAa4J,EAAOtD,SAAYsD,EAAOwN,UAElDZ,GAAahL,KAAMtX,MAGpB0V,EAAOuN,UAAY5X,EAAOS,YAAa4J,EAAOtD,SAAYsD,EAAOuN,UAC5DvN,EAAOqN,WAAa1X,EAAOS,YAAa4J,EAAO0N,cAEnD1N,EAAO0N,YAAa,GAGrB,IAAIC,EAAkBpB,IAA6F,SAAnEC,aAAaoB,QAASC,GAAqBvjB,KAAM,YAC7FwjB,OAAqB,EACrBC,OAAW,EAqJf,GApJAta,OAAOkI,iBAAkBrR,KACxB,CACCoS,OAAQ,CACPN,IAAK,WAEJ,OAAO4D,EAAOtD,SAIhBgR,WAAY,CACXtR,IAAK,WAEJ,OAAO4D,EAAO0N,aAIhBL,UAAW,CACVjR,IAAK,WAEJ,OAAO4D,EAAOqN,YAIhBD,WAAY,CACXhR,IAAK,WAEJ,OAAO4D,EAAOoN,aAIhBK,OAAQ,CACPrR,IAAK,WAEJ,OAAK/R,EAAMqS,OAEHrS,EAAM2jB,UAAUP,OAGjBzN,EAAOoK,KAAKqD,QAGpBze,IAAK,SAAiBmG,GAEhB9K,EAAMqS,OAEVrS,EAAM2jB,UAAUP,OAAStY,EAIzB6K,EAAOoK,KAAKqD,OAAStY,EAGtB8Y,GAAsB3jB,MACtBD,EAAM6jB,WAIRhjB,MAAO,CACNkR,IAAK,WAEJ,OAAO4D,EAAO9U,OAGf8D,IAAK,SAAiBmG,GAErB6K,EAAO9U,MAAQiK,EACfgZ,GAAU9jB,EAAO8K,KAInBiZ,KAAM,CACLhS,IAAK,WAEJ,OAAO4D,EAAOoO,MAGfpf,IAAK,SAAiBmG,GAErB6K,EAAOoO,KAAOjZ,EACT4Y,IAEJA,EAAS9Z,UAAY+L,EAAOoO,QAM/BC,OAAQ,CACPjS,IAAK,WAEJ,OAAO4D,EAAOqO,QAGfrf,IAAK,SAAiBmG,GAErB6K,EAAOqO,OAASlZ,EACX6K,EAAOqO,OAEXtP,EAAIyC,SAAUnX,EAAMyiB,KAAMD,EAAIyB,cAI9BvP,EAAIgD,YAAa1X,EAAMyiB,KAAMD,EAAIyB,cAGlChkB,KAAKikB,WACAlkB,EAAMmkB,gBAEVnkB,EAAMmkB,cAAcva,UAAYkB,EAAI0X,EAAI4B,UAAY5B,EAAI6B,eAM3DtE,KAAM,CACLhO,IAAK,WAEJ,OAAO4D,EAAOoK,OAIhBuD,gBAAiB,CAChBvR,IAAK,WAEJ,OAAOuR,GAGR3e,IAAK,SAAiBoS,GAEhBmL,KAEJoB,EAAkBvM,EACbA,EAEJrC,EAAI1I,KAAM9H,OAAQ,SAAUuf,GAI5B/O,EAAIuC,OAAQ/S,OAAQ,SAAUuf,GAG/BtB,aAAamC,QAASd,GAAqBxjB,EAAO,WAAa+W,QAO/DzL,EAAOS,YAAa4J,EAAOtD,QAAW,CAK1C,GAHApS,KAAK+jB,OAASrO,EAAOqO,SAAU,EAC/BtP,EAAIyC,SAAUlX,KAAKP,WAAY8iB,EAAI+B,YACnC7P,EAAIC,eAAgB1U,KAAKP,YAAY,GAChCwiB,IAECoB,EAAkB,CAEtBtjB,EAAMsjB,iBAAkB,EACxB,IAAIkB,EAAWrC,aAAaoB,QAASC,GAAqBvjB,KAAM,QAC3DukB,IAEJ7O,EAAOoK,KAAO0E,KAAKC,MAAOF,IAO7BvkB,KAAKkkB,cAAgBrkB,SAAS4J,cAAe,OAC7CzJ,KAAKkkB,cAAcva,UAAY4Y,EAAI6B,YACnC3P,EAAIyC,SAAUlX,KAAKkkB,cAAe3B,EAAImC,oBACjChP,EAAOoN,YAEXrO,EAAIyC,SAAUlX,KAAKkkB,cAAe3B,EAAIoC,iBACtC3kB,KAAKP,WAAWmlB,aAAc5kB,KAAKkkB,cAAelkB,KAAKP,WAAWolB,WAAY,MAI9EpQ,EAAIyC,SAAUlX,KAAKkkB,cAAe3B,EAAIuC,oBACtC9kB,KAAKP,WAAWoK,YAAa7J,KAAKkkB,gBAGnCzP,EAAI1I,KAAM/L,KAAKkkB,cAAe,SAAS,WAEtCnkB,EAAMgkB,QAAWhkB,EAAMgkB,cAIlB,MAEiBrkB,IAAlBgW,EAAOqO,SAEXrO,EAAOqO,QAAS,GAGjB,IAAIgB,EAAellB,SAASmlB,eAAgBtP,EAAOoO,MACnDrP,EAAIyC,SAAU6N,EAAc,mBAC5BtB,EAAWwB,GAAQllB,EAAOglB,GAC1B,IAAIG,EAAe,SAAuB7Q,GAIzC,OAFAA,EAAElP,iBACFpF,EAAMgkB,QAAWhkB,EAAMgkB,QAChB,GAGRtP,EAAIyC,SAAUlX,KAAKwiB,KAAMD,EAAIyB,cAC7BvP,EAAIyC,SAAUuM,EAAU,SACxBhP,EAAI1I,KAAM0X,EAAU,QAASyB,GACtBxP,EAAOqO,SAEb/jB,KAAK+jB,QAAS,GAsDhB,SAASoB,IAER,IAAIC,EAAOrlB,EAAM2jB,UACjB0B,EAAKxkB,OAAS,EACdyK,EAAOqB,OAAO,WAEb0Y,EAAKxkB,OAAS,KAvDX8U,EAAOqN,YAEN1X,EAAOS,YAAa4J,EAAOtD,UAE1BgQ,KAEJC,GAAqBxiB,SAAS4J,cAAe,OAC7CgL,EAAIyC,SAAUmL,GAAoBR,GAClCpN,EAAIyC,SAAUmL,GAAoBE,EAAI8C,4BACtCxlB,SAASyhB,KAAKzX,YAAawY,IAC3BD,IAAkB,GAGnBC,GAAmBxY,YAAa7J,KAAKP,YACrCgV,EAAIyC,SAAUlX,KAAKP,WAAY8iB,EAAI+C,mBAG7BtlB,KAAKoS,QAEXyR,GAAU9jB,EAAO2V,EAAO9U,QAK1BZ,KAAKulB,gBAAkB,WAEtBxlB,EAAMylB,qBAGP/Q,EAAI1I,KAAM9H,OAAQ,SAAUjE,KAAKulB,iBACjC9Q,EAAI1I,KAAM/L,KAAKwiB,KAAM,sBAAuBxiB,KAAKulB,iBACjD9Q,EAAI1I,KAAM/L,KAAKwiB,KAAM,gBAAiBxiB,KAAKulB,iBAC3C9Q,EAAI1I,KAAM/L,KAAKwiB,KAAM,iBAAkBxiB,KAAKulB,iBAC5CvlB,KAAKikB,WACAvO,EAAOuN,WAEXwC,GAAiBzlB,MAGlBwjB,EAAqB,WAEfvB,IAA8F,SAApEC,aAAaoB,QAASC,GAAqBxjB,EAAO,aAEhFmiB,aAAamC,QAASd,GAAqBxjB,EAAO,OAASykB,KAAKkB,UAAW3lB,EAAM4lB,mBAKnF3lB,KAAK4lB,6BAA+BpC,EAY7B9N,EAAOtD,QAEb+S,KAyWF,SAASF,GAAQY,EAAKC,EAAQC,GAE7B,IAAIC,EAAKnmB,SAAS4J,cAAe,MAgBjC,OAfKqc,GAEJE,EAAGnc,YAAaic,GAGZC,EAEJF,EAAIrD,KAAKoC,aAAcoB,EAAID,GAI3BF,EAAIrD,KAAK3Y,YAAamc,GAGvBH,EAAI5B,WACG+B,EAGR,SAASC,GAAiBJ,GAEzBpR,EAAIuC,OAAQ/S,OAAQ,SAAU4hB,EAAIN,iBAC7BM,EAAID,8BAERnR,EAAIuC,OAAQ/S,OAAQ,SAAU4hB,EAAID,8BAKpC,SAASM,GAAoBL,EAAKM,GAEjC,IAAI1M,EAAMoM,EAAIO,gBAAiBP,EAAIO,gBAAgBzM,eAGlDF,EAAI9P,UAFAwc,EAEY1M,EAAI7I,MAAQ,IAIZ6I,EAAI7I,MAKtB,SAASyV,GAAmBR,EAAKG,EAAIM,GAgDpC,GA9CAA,EAAWC,KAAOP,EAClBM,EAAWE,MAAQX,EACnBxa,EAAOE,OAAQ+a,EAAY,CAC1BjN,QAAS,SAAkBoN,GAE1B,GAAK/a,UAAUzF,OAAS,EAAI,CAE3B,IAAIygB,EAAcJ,EAAWC,KAAKI,mBAElC,OADAL,EAAWM,SACJC,GAAMhB,EAAKS,EAAW9mB,OAAQ8mB,EAAWvU,SAAU,CACzD+U,OAAQJ,EACRK,YAAa,CAAE1b,EAAOgC,QAAS3B,cAIjC,GAAKL,EAAOoC,QAASgZ,IAAcpb,EAAOO,SAAU6a,GAAa,CAEhE,IAAIO,EAAeV,EAAWC,KAAKI,mBAEnC,OADAL,EAAWM,SACJC,GAAMhB,EAAKS,EAAW9mB,OAAQ8mB,EAAWvU,SAAU,CACzD+U,OAAQE,EACRD,YAAa,CAAEN,OAMlB3C,KAAM,SAAemD,GAGpB,OADAX,EAAWC,KAAKW,kBAAkBA,kBAAkBvd,UAAYsd,EACzDX,GAGRa,OAAQ,WAGP,OADAb,EAAWE,MAAMW,OAAQb,GAClBA,GAGRM,OAAQ,WAGP,OADAN,EAAWE,MAAMI,OAAQN,GAClBA,KAIJA,aAAsBnK,EAAyB,CAEnD,IAAIvY,EAAM,IAAIyX,EAAqBiL,EAAW9mB,OAAQ8mB,EAAWvU,SAAU,CAAE3B,IAAKkW,EAAWlM,MAAO/J,IAAKiW,EAAWjM,MAAOE,KAAM+L,EAAWhM,SAC5IjP,EAAOG,KAAM,CAAE,gBAAiB,WAAY,iBAAkB,OAAQ,MAAO,QAAS,SAAW4b,GAEhG,IAAIC,EAAKf,EAAYc,GACjBE,EAAK1jB,EAAKwjB,GACdd,EAAYc,GAAWxjB,EAAKwjB,GAAW,WAEtC,IAAIjb,EAAOlB,MAAM/B,UAAUkC,MAAMK,KAAMC,WAEvC,OADA4b,EAAGjb,MAAOzI,EAAKuI,GACRkb,EAAGhb,MAAOia,EAAYna,OAK/BsI,EAAIyC,SAAU8O,EAAI,cAClBM,EAAW7mB,WAAWmlB,aAAchhB,EAAInE,WAAY6mB,EAAW7mB,WAAWynB,wBAEpE,GAAKZ,aAAsBjL,EAAsB,CAEvD,IAAIhR,EAAI,SAAYkd,GAEnB,GAAKlc,EAAOqC,SAAU4Y,EAAWlM,QAAW/O,EAAOqC,SAAU4Y,EAAWjM,OAAU,CAEjF,IAAImN,EAAUlB,EAAWC,KAAKW,kBAAkBA,kBAAkBvd,UAC9D8d,EAAenB,EAAWE,MAAM3D,YAAYxL,QAASiP,IAAiB,EAC1EA,EAAWM,SACX,IAAIc,EAAgBb,GAAMhB,EAAKS,EAAW9mB,OAAQ8mB,EAAWvU,SAAU,CACtE+U,OAAQR,EAAWC,KAAKI,mBACxBI,YAAa,CAAET,EAAWlM,MAAOkM,EAAWjM,MAAOiM,EAAWhM,UAI/D,OAFAoN,EAAc5D,KAAM0D,GACfC,GAAeC,EAAcP,SAC3BO,EAGR,OAAOH,GAGRjB,EAAWlW,IAAM/E,EAAOY,QAAS5B,EAAGic,EAAWlW,KAC/CkW,EAAWjW,IAAMhF,EAAOY,QAAS5B,EAAGic,EAAWjW,UAEpCiW,aAAsB3N,GAEjClE,EAAI1I,KAAMia,EAAI,SAAS,WAEtBvR,EAAIa,UAAWgR,EAAWrN,WAAY,YAGvCxE,EAAI1I,KAAMua,EAAWrN,WAAY,SAAS,SAAW5E,GAEpDA,EAAEjP,sBAIQkhB,aAAsB3J,GAEjClI,EAAI1I,KAAMia,EAAI,SAAS,WAEtBvR,EAAIa,UAAWgR,EAAWzJ,SAAU,YAGrCpI,EAAI1I,KAAMia,EAAI,aAAa,WAE1BvR,EAAIyC,SAAUoP,EAAWzJ,SAAU,YAGpCpI,EAAI1I,KAAMia,EAAI,YAAY,WAEzBvR,EAAIgD,YAAa6O,EAAWzJ,SAAU,aAI5ByJ,aAAsBvJ,IAEjCtI,EAAIyC,SAAU8O,EAAI,SAClBM,EAAWzS,cAAgBxI,EAAOY,SAAS,SAAWuI,GAGrD,OADAwR,EAAGxc,MAAMme,gBAAkBrB,EAAWtJ,QAAQ5S,WACvCoK,IAEL8R,EAAWzS,eACdyS,EAAWzS,iBAGZyS,EAAWvN,SAAW1N,EAAOY,SAAS,SAAWuI,GAOhD,OALKqR,EAAInC,UAAU0C,iBAAmBE,EAAWsB,cAEhD1B,GAAoBL,EAAInC,WAAW,GAG7BlP,IAEL8R,EAAWvN,UAGf,SAAS8O,GAAkBhC,EAAKS,GAE/B,IAAIlB,EAAOS,EAAInC,UACXoE,EAAe1C,EAAKzC,oBAAoBtL,QAASiP,EAAW9mB,QAChE,IAAwB,IAAnBsoB,EAAuB,CAE3B,IAAIC,EAAgB3C,EAAKxC,uCAAwCkF,GAQjE,QAPuBpoB,IAAlBqoB,IAEJA,EAAgB,GAChB3C,EAAKxC,uCAAwCkF,GAAiBC,GAG/DA,EAAezB,EAAWvU,UAAauU,EAClClB,EAAKtF,MAAQsF,EAAKtF,KAAKkI,WAAa,CAExC,IAAIC,EAAY7C,EAAKtF,KAAKkI,WACtB7E,OAAS,EACb,GAAK8E,EAAWpC,EAAI1C,QAEnBA,EAAS8E,EAAWpC,EAAI1C,YAElB,KAAK8E,EAAWjG,GAMtB,OAJAmB,EAAS8E,EAAWjG,GAOrB,GAAKmB,EAAQ2E,SAAoEpoB,IAAlDyjB,EAAQ2E,GAAgBxB,EAAWvU,UAA2B,CAE5F,IAAInB,EAAQuS,EAAQ2E,GAAgBxB,EAAWvU,UAC/CuU,EAAW7S,aAAe7C,EAC1B0V,EAAWvN,SAAUnI,MASzB,SAASiW,GAAMhB,EAAKrmB,EAAQuS,EAAU2D,GAErC,QAA4BhW,IAAvBF,EAAQuS,GAEZ,MAAM,IAAIiB,MAAO,WAAaxT,EAAS,sBAAwBuS,EAAW,KAG3E,IAAIuU,OAAa,EACjB,GAAK5Q,EAAO3L,MAEXuc,EAAa,IAAIvJ,EAAiBvd,EAAQuS,OAEpC,CAEN,IAAIgV,EAAc,CAAEvnB,EAAQuS,GAAWmW,OAAQxS,EAAOqR,aACtDT,EAAa7F,EAAkBpU,MAAOwZ,EAAKkB,GAGvCrR,EAAOoR,kBAAkBtT,IAE7BkC,EAAOoR,OAASpR,EAAOoR,OAAOP,MAG/BsB,GAAkBhC,EAAKS,GACvB7R,EAAIyC,SAAUoP,EAAW7mB,WAAY,KACrC,IAAIqkB,EAAOjkB,SAAS4J,cAAe,QACnCgL,EAAIyC,SAAU4M,EAAM,iBACpBA,EAAKna,UAAY2c,EAAWvU,SAC5B,IAAIoW,EAAYtoB,SAAS4J,cAAe,OACxC0e,EAAUte,YAAaia,GACvBqE,EAAUte,YAAayc,EAAW7mB,YAClC,IAAIumB,EAAKf,GAAQY,EAAKsC,EAAWzS,EAAOoR,QAaxC,OAZArS,EAAIyC,SAAU8O,EAAIzD,GAAI6F,sBACjB9B,aAAsBvJ,EAE1BtI,EAAIyC,SAAU8O,EAAI,SAIlBvR,EAAIyC,SAAU8O,EAAInV,EAASyV,EAAWxS,aAGvCuS,GAAmBR,EAAKG,EAAIM,GAC5BT,EAAInD,cAAcpL,KAAMgP,GACjBA,EAGR,SAAS/C,GAAqBsC,EAAKha,GAElC,OAAOhM,SAASwoB,SAAS3P,KAAO,IAAM7M,EAGvC,SAASyc,GAAiBzC,EAAK/B,EAAMyE,GAEpC,IAAI9O,EAAM5Z,SAAS4J,cAAe,UAClCgQ,EAAI9P,UAAYma,EAChBrK,EAAI7I,MAAQkT,EACZ+B,EAAIO,gBAAgBvc,YAAa4P,GAC5B8O,IAEJ1C,EAAIO,gBAAgBzM,cAAgBkM,EAAIO,gBAAgBngB,OAAS,GAKnE,SAASuiB,GAAiB3C,EAAK4C,GAE9BA,EAAQjf,MAAMoV,QAAUiH,EAAIxC,gBAAkB,QAAU,OAGzD,SAASqF,GAAa7C,GAErB,IAAI8C,EAAM9C,EAAI+C,WAAa/oB,SAAS4J,cAAe,MACnDgL,EAAIyC,SAAU2O,EAAIpmB,WAAY,YAC9BomB,EAAIrD,KAAKoC,aAAc+D,EAAK9C,EAAIrD,KAAKqG,YACrCpU,EAAIyC,SAAUyR,EAAK,YACnB,IAAIG,EAAQjpB,SAAS4J,cAAe,QACpCqf,EAAMnf,UAAY,SAClB8K,EAAIyC,SAAU4R,EAAO,gBACrB,IAAIzjB,EAASxF,SAAS4J,cAAe,QACrCpE,EAAOsE,UAAY,OACnB8K,EAAIyC,SAAU7R,EAAQ,UACtBoP,EAAIyC,SAAU7R,EAAQ,QACtB,IAAI0jB,EAAUlpB,SAAS4J,cAAe,QACtCsf,EAAQpf,UAAY,MACpB8K,EAAIyC,SAAU6R,EAAS,UACvBtU,EAAIyC,SAAU6R,EAAS,WACvB,IAAIC,EAAUnpB,SAAS4J,cAAe,QACtCuf,EAAQrf,UAAY,SACpB8K,EAAIyC,SAAU8R,EAAS,UACvBvU,EAAIyC,SAAU8R,EAAS,UACvB,IAAIC,EAASpD,EAAIO,gBAAkBvmB,SAAS4J,cAAe,UA6B3D,GA5BKoc,EAAI/F,MAAQ+F,EAAI/F,KAAKkI,WAEzB3c,EAAOG,KAAMqa,EAAI/F,KAAKkI,YAAY,SAAWpX,EAAO/E,GAEnDyc,GAAiBzC,EAAKha,EAAKA,IAAQga,EAAI1C,WAMxCmF,GAAiBzC,EAAK7D,GAA6B,GAGpDvN,EAAI1I,KAAMkd,EAAQ,UAAU,WAE3B,IAAM,IAAItR,EAAQ,EAAGA,EAAQkO,EAAIO,gBAAgBngB,OAAQ0R,IAExDkO,EAAIO,gBAAiBzO,GAAQhO,UAAYkc,EAAIO,gBAAiBzO,GAAQ/G,MAGvEiV,EAAI1C,OAASnjB,KAAK4Q,SAGnB+X,EAAI9e,YAAaof,GACjBN,EAAI9e,YAAaif,GACjBH,EAAI9e,YAAaxE,GACjBsjB,EAAI9e,YAAakf,GACjBJ,EAAI9e,YAAamf,GACZ/G,GAAyB,CAE7B,IAAIwG,EAAU5oB,SAASqpB,eAAgB,oBACnCC,EAAuBtpB,SAASqpB,eAAgB,oBAChDE,EAAcvpB,SAASqpB,eAAgB,mBAC3CE,EAAY5f,MAAMoV,QAAU,QAC2C,SAAlEsD,aAAaoB,QAASC,GAAqBsC,EAAK,aAEpDsD,EAAqBzf,aAAc,UAAW,WAG/C8e,GAAiB3C,EAAK4C,GACtBhU,EAAI1I,KAAMod,EAAsB,UAAU,WAEzCtD,EAAIxC,iBAAoBwC,EAAIxC,gBAC5BmF,GAAiB3C,EAAK4C,MAKxB,IAAIY,EAAyBxpB,SAASqpB,eAAgB,sBACtDzU,EAAI1I,KAAMsd,EAAwB,WAAW,SAAWhV,IAElDA,EAAEqC,SAAyB,KAAZrC,EAAEiV,OAA8B,KAAdjV,EAAEtP,SAEvCod,GAAcZ,UAKhB9M,EAAI1I,KAAM+c,EAAO,SAAS,WAEzBO,EAAuB1f,UAAY6a,KAAKkB,UAAWG,EAAIF,qBAAiBjmB,EAAW,GACnFyiB,GAAcoH,OACdF,EAAuBG,QACvBH,EAAuBJ,YAGxBxU,EAAI1I,KAAM1G,EAAQ,SAAS,WAE1BwgB,EAAI4D,UAGLhV,EAAI1I,KAAMgd,EAAS,SAAS,WAE3B,IAAIW,EAAaC,OAAQ,4BACpBD,GAEJ7D,EAAI+D,OAAQF,MAKdjV,EAAI1I,KAAMid,EAAS,SAAS,WAE3BnD,EAAIjC,YAKN,SAAS6B,GAAiBI,GAEzB,IAAIgE,OAAU,EASd,SAASC,EAAMzV,GAMd,OAJAA,EAAElP,iBACF0gB,EAAIjlB,OAASipB,EAAUxV,EAAEyB,QACzB+P,EAAI5B,WACJ4F,EAAUxV,EAAEyB,SACL,EAGR,SAASiU,IAERtV,EAAIgD,YAAaoO,EAAI3B,cAAe3B,GAAIyH,YACxCvV,EAAIuC,OAAQ/S,OAAQ,YAAa6lB,GACjCrV,EAAIuC,OAAQ/S,OAAQ,UAAW8lB,GAGhC,SAASE,EAAW5V,GAOnB,OALAA,EAAElP,iBACF0kB,EAAUxV,EAAEyB,QACZrB,EAAIyC,SAAU2O,EAAI3B,cAAe3B,GAAIyH,YACrCvV,EAAI1I,KAAM9H,OAAQ,YAAa6lB,GAC/BrV,EAAI1I,KAAM9H,OAAQ,UAAW8lB,IACtB,EA/BRlE,EAAIqE,gBAAkBrqB,SAAS4J,cAAe,OAC9C4B,EAAOE,OAAQsa,EAAIqE,gBAAgB1gB,MAAO,CACzC5I,MAAO,MACP4e,WAAY,OACZ3e,OAAQ,QACRge,OAAQ,YACR3b,SAAU,aA4BXuR,EAAI1I,KAAM8Z,EAAIqE,gBAAiB,YAAaD,GAC5CxV,EAAI1I,KAAM8Z,EAAI3B,cAAe,YAAa+F,GAC1CpE,EAAIpmB,WAAWmlB,aAAciB,EAAIqE,gBAAiBrE,EAAIpmB,WAAWynB,mBAGlE,SAASrD,GAAUgC,EAAKsE,GAEvBtE,EAAIpmB,WAAW+J,MAAM5I,MAAQupB,EAAI,KAC5BtE,EAAI+C,YAAc/C,EAAI9C,YAE1B8C,EAAI+C,WAAWpf,MAAM5I,MAAQupB,EAAI,MAG7BtE,EAAI3B,gBAER2B,EAAI3B,cAAc1a,MAAM5I,MAAQupB,EAAI,MAKtC,SAASC,GAAkBvE,EAAKwE,GAE/B,IAAIhb,EAAW,GAaf,OAZAhE,EAAOG,KAAMqa,EAAIlD,qBAAqB,SAAWnO,EAAKmD,GAErD,IAAI2S,EAAc,GACdvC,EAAgBlC,EAAIjD,uCAAwCjL,GAChEtM,EAAOG,KAAMuc,GAAe,SAAWzB,EAAYvU,GAElDuY,EAAavY,GAAasY,EAAmB/D,EAAW7S,aAAe6S,EAAWxS,cAGnFzE,EAAUsI,GAAU2S,KAGdjb,EAGR,SAASsU,GAAsBkC,GAE9B,IAAM,IAAIlO,EAAQ,EAAGA,EAAQkO,EAAIO,gBAAgBngB,OAAQ0R,IAEnDkO,EAAIO,gBAAiBzO,GAAQ/G,QAAUiV,EAAI1C,SAE/C0C,EAAIO,gBAAgBzM,cAAgBhC,GAOvC,SAAS4S,GAAgBC,GAEQ,IAA3BA,EAAgBvkB,QAEpB2a,EAAwBnV,KAAMxH,QAAQ,WAErCsmB,GAAgBC,MAKlBnf,EAAOG,KAAMgf,GAAiB,SAAWta,GAExCA,EAAE2D,mBAx2BJ0O,GAAIkI,WAAa,WAEhBlJ,IAASA,GACTlW,EAAOG,KAAM8W,IAAc,SAAWuD,GAErCA,EAAIpmB,WAAW+J,MAAMoV,QAAU2C,GAAO,OAAS,OAKjDgB,GAAI+C,iBAAmB,IACvB/C,GAAI8C,2BAA6B,KACjC9C,GAAI+B,WAAa,OACjB/B,GAAI6F,qBAAuB,KAC3B7F,GAAImI,eAAiB,qBACrBnI,GAAIyB,aAAe,SACnBzB,GAAImC,mBAAqB,eACzBnC,GAAIoC,gBAAkB,YACtBpC,GAAIuC,mBAAqB,eACzBvC,GAAIyH,WAAa,OACjBzH,GAAIS,cAAgB,IACpBT,GAAI6B,YAAc,iBAClB7B,GAAI4B,UAAY,gBAChB5B,GAAIoI,gBAAkB,SAAWtW,GAEK,SAAhCxU,SAAS4Y,cAAcjV,MAAqB6Q,EAAEiV,QAAUxH,GAAiBzN,EAAEtP,UAAY+c,GAE3FS,GAAIkI,cAKNhW,EAAI1I,KAAM9H,OAAQ,UAAWse,GAAIoI,iBAAiB,GAClDtf,EAAOE,OAAQgX,GAAIrZ,UAClB,CACC5B,IAAK,SAAc9H,EAAQuS,GAE1B,OAAO8U,GAAM7mB,KAAMR,EAAQuS,EAAU,CACpCgV,YAAa9b,MAAM/B,UAAUkC,MAAMK,KAAMC,UAAW,MAItDkf,SAAU,SAAmBprB,EAAQuS,GAEpC,OAAO8U,GAAM7mB,KAAMR,EAAQuS,EAAU,CACpChI,OAAO,KAIT6c,OAAQ,SAAiBN,GAExBtmB,KAAKwiB,KAAKqI,YAAavE,EAAWC,MAClCvmB,KAAK0iB,cAAc9K,OAAQ5X,KAAK0iB,cAAcrL,QAASiP,GAAc,GACrE,IAAIvmB,EAAQC,KACZqL,EAAOqB,OAAO,WAEb3M,EAAMkkB,eAKR6G,QAAS,WAER,GAAK9qB,KAAKoS,OAET,MAAM,IAAIY,MAAO,8GAGbhT,KAAK+iB,WAETV,GAAmBwI,YAAa7qB,KAAKP,YAGtC,IAAIM,EAAQC,KACZqL,EAAOG,KAAMxL,KAAKyiB,WAAW,SAAWsI,GAEvChrB,EAAMirB,aAAcD,MAGrBtW,EAAIuC,OAAQ/S,OAAQ,UAAWse,GAAIoI,iBAAiB,GACpD1E,GAAiBjmB,OAGlBirB,UAAW,SAAoBnH,GAE9B,QAAgCpkB,IAA3BM,KAAKyiB,UAAWqB,GAEpB,MAAM,IAAI9Q,MAAO,sDAA6D8Q,EAAO,KAGtF,IAAIoH,EAAe,CAAEpH,KAAMA,EAAM1R,OAAQpS,MACzCkrB,EAAanI,UAAY/iB,KAAK+iB,UACzB/iB,KAAK8f,MACT9f,KAAK8f,KAAKqL,SACVnrB,KAAK8f,KAAKqL,QAASrH,KAEnBoH,EAAanH,OAAS/jB,KAAK8f,KAAKqL,QAASrH,GAAOC,OAChDmH,EAAapL,KAAO9f,KAAK8f,KAAKqL,QAASrH,IAGxC,IAAI+B,EAAM,IAAItD,GAAK2I,GACnBlrB,KAAKyiB,UAAWqB,GAAS+B,EACzB,IAAIG,EAAKf,GAAQjlB,KAAM6lB,EAAIpmB,YAE3B,OADAgV,EAAIyC,SAAU8O,EAAI,UACXH,GAGRmF,aAAc,SAAuBI,GAEpCprB,KAAKwiB,KAAKqI,YAAaO,EAAO3rB,WAAW4rB,sBAClCrrB,KAAKyiB,UAAW2I,EAAOtH,MACzB9jB,KAAK8f,MACT9f,KAAK8f,KAAKqL,SACVnrB,KAAK8f,KAAKqL,QAASC,EAAOtH,cAEnB9jB,KAAK8f,KAAKqL,QAASC,EAAOtH,MAGlCmC,GAAiBmF,GACjB,IAAIrrB,EAAQC,KACZqL,EAAOG,KAAM4f,EAAO3I,WAAW,SAAWsI,GAEzCK,EAAOJ,aAAcD,MAGtB1f,EAAOqB,OAAO,WAEb3M,EAAMkkB,eAKRqH,KAAM,WAELtrB,KAAK+jB,QAAS,GAGfwH,MAAO,WAENvrB,KAAK+jB,QAAS,GAGfxC,KAAM,WAELvhB,KAAKP,WAAW+J,MAAMoV,QAAU,QAGjC2K,KAAM,WAELvpB,KAAKP,WAAW+J,MAAMoV,QAAU,IAGjCqF,SAAU,WAET,IAAImB,EAAOplB,KAAK0jB,UAChB,GAAK0B,EAAKhC,WAAa,CAEtB,IAAIziB,EAAM8T,EAAIyD,UAAWkN,EAAK5C,MAAO7hB,IACjC+J,EAAI,EACRW,EAAOG,KAAM4Z,EAAK5C,KAAKqC,YAAY,SAAW2G,GAEpCpG,EAAKrC,WAAayI,IAASpG,EAAKwD,aAExCle,GAAK+J,EAAIwD,UAAWuT,OAKjBvnB,OAAO0d,YAAchhB,EAAMohB,EAAsBrX,GAErD+J,EAAIyC,SAAUkO,EAAK3lB,WAAY8iB,GAAImI,gBACnCtF,EAAK5C,KAAKhZ,MAAM3I,OAASoD,OAAO0d,YAAchhB,EAAMohB,EAAsB,OAI1EtN,EAAIgD,YAAa2N,EAAK3lB,WAAY8iB,GAAImI,gBACtCtF,EAAK5C,KAAKhZ,MAAM3I,OAAS,QAKtBukB,EAAK8E,iBAET7e,EAAOqB,OAAO,WAEb0Y,EAAK8E,gBAAgB1gB,MAAM3I,OAASukB,EAAK5C,KAAKiJ,aAAe,QAK1DrG,EAAKlB,gBAETkB,EAAKlB,cAAc1a,MAAM5I,MAAQwkB,EAAKxkB,MAAQ,OAKhD4kB,kBAAmBna,EAAOwB,UAAU,WAEnC7M,KAAKikB,aAEH,IACHyH,SAAU,WAQT,GANKrgB,EAAOS,YAAaqW,MAExBA,GAAgB,IAAIlB,EACpBkB,GAAc1iB,WAAWkK,UAAY6W,GAGjCxgB,KAAKoS,OAET,MAAM,IAAIY,MAAO,kDAGlB,IAAIjT,EAAQC,KACZqL,EAAOG,KAAMP,MAAM/B,UAAUkC,MAAMK,KAAMC,YAAa,SAAWlM,GAEtB,IAArCO,EAAM4iB,oBAAoB1c,QAE9ByiB,GAAa3oB,IAGyC,IAAlDA,EAAM4iB,oBAAoBtL,QAAS7X,IAEvCO,EAAM4iB,oBAAoBrL,KAAM9X,MAK7BQ,KAAK+iB,WAETc,GAAU7jB,KAAMA,KAAKY,QAKvB8iB,QAAS,WAER,IAAImC,EAAM7lB,KACV,MAAQ6lB,EAAIzT,OAEXyT,EAAMA,EAAIzT,OAGX,OAAOyT,GAGRF,cAAe,WAEd,IAAItW,EAAWrP,KAAK8f,KAmBpB,OAlBAzQ,EAAS0U,OAAS/jB,KAAK+jB,OAClB/jB,KAAK2iB,oBAAoB1c,OAAS,IAEtCoJ,EAAS8T,OAASnjB,KAAKmjB,OAChB9T,EAAS2Y,aAEf3Y,EAAS2Y,WAAa,IAGvB3Y,EAAS2Y,WAAYhoB,KAAKmjB,QAAWiH,GAAkBpqB,OAGxDqP,EAAS8b,QAAU,GACnB9f,EAAOG,KAAMxL,KAAKyiB,WAAW,SAAWjJ,EAAS3N,GAEhDwD,EAAS8b,QAAStf,GAAQ2N,EAAQmM,mBAG5BtW,GAGRoa,KAAM,WAEEzpB,KAAK8f,KAAKkI,aAEhBhoB,KAAK8f,KAAKkI,WAAa,IAGxBhoB,KAAK8f,KAAKkI,WAAYhoB,KAAKmjB,QAAWiH,GAAkBpqB,MACxDkmB,GAAoBlmB,MAAM,GAC1BA,KAAK4lB,gCAGNgE,OAAQ,SAAiBF,GAEjB1pB,KAAK8f,KAAKkI,aAEhBhoB,KAAK8f,KAAKkI,WAAa,GACvBhoB,KAAK8f,KAAKkI,WAAYhG,GAAgCoI,GAAkBpqB,MAAM,IAG/EA,KAAK8f,KAAKkI,WAAY0B,GAAeU,GAAkBpqB,MACvDA,KAAKmjB,OAASuG,EACdpB,GAAiBtoB,KAAM0pB,GAAY,GACnC1pB,KAAK4lB,gCAGNhC,OAAQ,SAAiBiC,GAExBxa,EAAOG,KAAMxL,KAAK0iB,eAAe,SAAW4D,GAEpCtmB,KAAK0jB,UAAU5D,KAAKkI,WAM1BH,GAAkBhC,GAAO7lB,KAAK0jB,UAAW4C,GAJzCA,EAAWvN,SAAUuN,EAAW7S,cAO5B6S,EAAW3S,kBAEf2S,EAAW3S,iBAAiBlI,KAAM6a,EAAYA,EAAWxS,cAIxD9T,MACHqL,EAAOG,KAAMxL,KAAKyiB,WAAW,SAAW2I,GAEvCA,EAAOxH,OAAQwH,MAGTvF,GAENK,GAAoBlmB,KAAK0jB,WAAW,IAKtCyD,OAAQ,SAAiBb,GAExB,IAAIlQ,EAAmC,IAA5BpW,KAAK6iB,YAAY5c,OAC5BjG,KAAK6iB,YAAYvL,KAAMgP,GAClBlQ,GAEJmU,GAAgBvqB,KAAK6iB,cAKvBhP,cAAe,WAEdxI,EAAOG,KAAMxL,KAAK0iB,eAAe,SAAW4D,GAE3CA,EAAWzS,mBAGZxI,EAAOG,KAAMxL,KAAKyiB,WAAW,SAAW2I,GAEvCA,EAAOvX,sBAghBX,IAkBI8X,GAAQpJ","file":"js/home~three.6be964a6.js","sourcesContent":["/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga \t/ http://lantiga.github.io\n */\n\nimport {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar TrackballControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.TrackballControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tvar _this = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.ZOOM, RIGHT: MOUSE.PAN };\n\n\t// internals\n\n\tthis.target = new Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new Vector3();\n\tvar lastZoom = 1;\n\n\tvar _state = STATE.NONE,\n\t\t_keyState = STATE.NONE,\n\n\t\t_eye = new Vector3(),\n\n\t\t_movePrev = new Vector2(),\n\t\t_moveCurr = new Vector2(),\n\n\t\t_lastAxis = new Vector3(),\n\t\t_lastAngle = 0,\n\n\t\t_zoomStart = new Vector2(),\n\t\t_zoomEnd = new Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new Vector2(),\n\t\t_panEnd = new Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tthis.screen.width = box.width;\n\t\tthis.screen.height = box.height;\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function () {\n\n\t\tvar axis = new Vector3(),\n\t\t\tquaternion = new Quaternion(),\n\t\t\teyeDirection = new Vector3(),\n\t\t\tobjectUpDirection = new Vector3(),\n\t\t\tobjectSidewaysDirection = new Vector3(),\n\t\t\tmoveDirection = new Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t_this.object.zoom *= factor;\n\t\t\t\t_this.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t\t_this.object.zoom /= factor;\n\t\t\t\t\t_this.object.updateProjectionMatrix();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function () {\n\n\t\tvar mouseChange = new Vector2(),\n\t\t\tobjectUp = new Vector3(),\n\t\t\tpan = new Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tif ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tvar scale_x = ( _this.object.right - _this.object.left ) / _this.object.zoom / _this.domElement.clientWidth;\n\t\t\t\t\tvar scale_y = ( _this.object.top - _this.object.bottom ) / _this.object.zoom / _this.domElement.clientWidth;\n\n\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t}\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.object.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\tif ( ! _this.noRotate ) {\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors( _this.target, _eye );\n\n\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t_this.checkDistances();\n\n\t\t\t_this.object.lookAt( _this.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n\t\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( _this.object.position );\n\n\t\t\t}\n\n\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t_this.object.lookAt( _this.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS || lastZoom !== _this.object.zoom ) {\n\n\t\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( _this.object.position );\n\t\t\t\tlastZoom = _this.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_keyState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.object.position.copy( _this.position0 );\n\t\t_this.object.up.copy( _this.up0 );\n\t\t_this.object.zoom = _this.zoom0;\n\n\t\t_this.object.updateProjectionMatrix();\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.object.position );\n\t\tlastZoom = _this.object.zoom;\n\n\t};\n\n\t// listeners\n\n\tfunction keydown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\n\n\t\t\t_keyState = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\n\n\t\t\t_keyState = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\n\n\t\t\t_keyState = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup() {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\t_keyState = STATE.NONE;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction mousedown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase _this.mouseButtons.LEFT:\n\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase _this.mouseButtons.MIDDLE:\n\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase _this.mouseButtons.RIGHT:\n\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t_state = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tif ( _this.noZoom === true ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.deltaMode ) {\n\n\t\t\tcase 2:\n\t\t\t\t// Zoom in pages\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// Zoom in lines\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 0:\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\n\t\tthis.domElement.removeEventListener( 'wheel', mousewheel, false );\n\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTrackballControls.prototype = Object.create( EventDispatcher.prototype );\nTrackballControls.prototype.constructor = TrackballControls;\n\nexport { TrackballControls };\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle( css ) {\n\n\tif ( ! css ) {\n\n\t\treturn;\n\n\t}\n\tif ( typeof window === 'undefined' ) {\n\n\t\treturn;\n\n\t}\n\n\tvar style = document.createElement( 'style' );\n\n\tstyle.setAttribute( 'type', 'text/css' );\n\tstyle.innerHTML = css;\n\tdocument.head.appendChild( style );\n\n\treturn css;\n\n}\n\nfunction colorToString( color, forceCSSHex ) {\n\n\tvar colorFormat = color.__state.conversionName.toString();\n\tvar r = Math.round( color.r );\n\tvar g = Math.round( color.g );\n\tvar b = Math.round( color.b );\n\tvar a = color.a;\n\tvar h = Math.round( color.h );\n\tvar s = color.s.toFixed( 1 );\n\tvar v = color.v.toFixed( 1 );\n\tif ( forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX' ) {\n\n\t\tvar str = color.hex.toString( 16 );\n\t\twhile ( str.length < 6 ) {\n\n\t\t\tstr = '0' + str;\n\n\t\t}\n\t\treturn '#' + str;\n\n\t} else if ( colorFormat === 'CSS_RGB' ) {\n\n\t\treturn 'rgb(' + r + ',' + g + ',' + b + ')';\n\n\t} else if ( colorFormat === 'CSS_RGBA' ) {\n\n\t\treturn 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n\n\t} else if ( colorFormat === 'HEX' ) {\n\n\t\treturn '0x' + color.hex.toString( 16 );\n\n\t} else if ( colorFormat === 'RGB_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ']';\n\n\t} else if ( colorFormat === 'RGBA_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ',' + a + ']';\n\n\t} else if ( colorFormat === 'RGB_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + '}';\n\n\t} else if ( colorFormat === 'RGBA_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n\n\t} else if ( colorFormat === 'HSV_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + '}';\n\n\t} else if ( colorFormat === 'HSVA_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n\n\t}\n\treturn 'unknown format';\n\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n\tBREAK: {},\n\textend: function extend( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( ! this.isUndefined( obj[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tdefaults: function defaults( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( this.isUndefined( target[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tcompose: function compose() {\n\n\t\tvar toCall = ARR_SLICE.call( arguments );\n\t\treturn function () {\n\n\t\t\tvar args = ARR_SLICE.call( arguments );\n\t\t\tfor ( var i = toCall.length - 1; i >= 0; i -- ) {\n\n\t\t\t\targs = [ toCall[ i ].apply( this, args ) ];\n\n\t\t\t}\n\t\t\treturn args[ 0 ];\n\n\t\t};\n\n\t},\n\teach: function each( obj, itr, scope ) {\n\n\t\tif ( ! obj ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tif ( ARR_EACH && obj.forEach && obj.forEach === ARR_EACH ) {\n\n\t\t\tobj.forEach( itr, scope );\n\n\t\t} else if ( obj.length === obj.length + 0 ) {\n\n\t\t\tvar key = void 0;\n\t\t\tvar l = void 0;\n\t\t\tfor ( key = 0, l = obj.length; key < l; key ++ ) {\n\n\t\t\t\tif ( key in obj && itr.call( scope, obj[ key ], key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var _key in obj ) {\n\n\t\t\t\tif ( itr.call( scope, obj[ _key ], _key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\tdefer: function defer( fnc ) {\n\n\t\tsetTimeout( fnc, 0 );\n\n\t},\n\tdebounce: function debounce( func, threshold, callImmediately ) {\n\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\n\t\t\tvar obj = this;\n\t\t\tvar args = arguments;\n\t\t\tfunction delayed() {\n\n\t\t\t\ttimeout = null;\n\t\t\t\tif ( ! callImmediately ) func.apply( obj, args );\n\n\t\t\t}\n\t\t\tvar callNow = callImmediately || ! timeout;\n\t\t\tclearTimeout( timeout );\n\t\t\ttimeout = setTimeout( delayed, threshold );\n\t\t\tif ( callNow ) {\n\n\t\t\t\tfunc.apply( obj, args );\n\n\t\t\t}\n\n\t\t};\n\n\t},\n\ttoArray: function toArray( obj ) {\n\n\t\tif ( obj.toArray ) return obj.toArray();\n\t\treturn ARR_SLICE.call( obj );\n\n\t},\n\tisUndefined: function isUndefined( obj ) {\n\n\t\treturn obj === undefined;\n\n\t},\n\tisNull: function isNull( obj ) {\n\n\t\treturn obj === null;\n\n\t},\n\tisNaN: function ( _isNaN ) {\n\n\t\tfunction isNaN() {\n\n\t\t\treturn _isNaN.apply( this, arguments );\n\n\t\t}\n\t\tisNaN.toString = function () {\n\n\t\t\treturn _isNaN.toString();\n\n\t\t};\n\t\treturn isNaN;\n\n\t}( function ( obj ) {\n\n\t\treturn isNaN( obj );\n\n\t} ),\n\tisArray: Array.isArray || function ( obj ) {\n\n\t\treturn obj.constructor === Array;\n\n\t},\n\tisObject: function isObject( obj ) {\n\n\t\treturn obj === Object( obj );\n\n\t},\n\tisNumber: function isNumber( obj ) {\n\n\t\treturn obj === obj + 0;\n\n\t},\n\tisString: function isString( obj ) {\n\n\t\treturn obj === obj + '';\n\n\t},\n\tisBoolean: function isBoolean( obj ) {\n\n\t\treturn obj === false || obj === true;\n\n\t},\n\tisFunction: function isFunction( obj ) {\n\n\t\treturn Object.prototype.toString.call( obj ) === '[object Function]';\n\n\t}\n};\n\nvar INTERPRETATIONS = [\n\t{\n\t\tlitmus: Common.isString,\n\t\tconversions: {\n\t\t\tTHREE_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9])([A-F0-9])([A-F0-9])$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString() + test[ 1 ].toString() + test[ 2 ].toString() + test[ 2 ].toString() + test[ 3 ].toString() + test[ 3 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tSIX_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9]{6})$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGB: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGBA: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] ),\n\t\t\t\t\t\ta: parseFloat( test[ 4 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isNumber,\n\t\tconversions: {\n\t\t\tHEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: original,\n\t\t\t\t\t\tconversionName: 'HEX'\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn color.hex;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isArray,\n\t\tconversions: {\n\t\t\tRGB_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 3 ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b ];\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGBA_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 4 ) return false;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ],\n\t\t\t\t\t\ta: original[ 3 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b, color.a ];\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isObject,\n\t\tconversions: {\n\t\t\tRGBA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGB_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSVA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSV_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} ];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n\n\ttoReturn = false;\n\tvar original = arguments.length > 1 ? Common.toArray( arguments ) : arguments[ 0 ];\n\tCommon.each( INTERPRETATIONS, function ( family ) {\n\n\t\tif ( family.litmus( original ) ) {\n\n\t\t\tCommon.each( family.conversions, function ( conversion, conversionName ) {\n\n\t\t\t\tresult = conversion.read( original );\n\t\t\t\tif ( toReturn === false && result !== false ) {\n\n\t\t\t\t\ttoReturn = result;\n\t\t\t\t\tresult.conversionName = conversionName;\n\t\t\t\t\tresult.conversion = conversion;\n\t\t\t\t\treturn Common.BREAK;\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\treturn Common.BREAK;\n\n\t\t}\n\n\t} );\n\treturn toReturn;\n\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n\thsv_to_rgb: function hsv_to_rgb( h, s, v ) {\n\n\t\tvar hi = Math.floor( h / 60 ) % 6;\n\t\tvar f = h / 60 - Math.floor( h / 60 );\n\t\tvar p = v * ( 1.0 - s );\n\t\tvar q = v * ( 1.0 - f * s );\n\t\tvar t = v * ( 1.0 - ( 1.0 - f ) * s );\n\t\tvar c = [[ v, t, p ], [ q, v, p ], [ p, v, t ], [ p, q, v ], [ t, p, v ], [ v, p, q ]][ hi ];\n\t\treturn {\n\t\t\tr: c[ 0 ] * 255,\n\t\t\tg: c[ 1 ] * 255,\n\t\t\tb: c[ 2 ] * 255\n\t\t};\n\n\t},\n\trgb_to_hsv: function rgb_to_hsv( r, g, b ) {\n\n\t\tvar min = Math.min( r, g, b );\n\t\tvar max = Math.max( r, g, b );\n\t\tvar delta = max - min;\n\t\tvar h = void 0;\n\t\tvar s = void 0;\n\t\tif ( max !== 0 ) {\n\n\t\t\ts = delta / max;\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\th: NaN,\n\t\t\t\ts: 0,\n\t\t\t\tv: 0\n\t\t\t};\n\n\t\t}\n\t\tif ( r === max ) {\n\n\t\t\th = ( g - b ) / delta;\n\n\t\t} else if ( g === max ) {\n\n\t\t\th = 2 + ( b - r ) / delta;\n\n\t\t} else {\n\n\t\t\th = 4 + ( r - g ) / delta;\n\n\t\t}\n\t\th /= 6;\n\t\tif ( h < 0 ) {\n\n\t\t\th += 1;\n\n\t\t}\n\t\treturn {\n\t\t\th: h * 360,\n\t\t\ts: s,\n\t\t\tv: max / 255\n\t\t};\n\n\t},\n\trgb_to_hex: function rgb_to_hex( r, g, b ) {\n\n\t\tvar hex = this.hex_with_component( 0, 2, r );\n\t\thex = this.hex_with_component( hex, 1, g );\n\t\thex = this.hex_with_component( hex, 0, b );\n\t\treturn hex;\n\n\t},\n\tcomponent_from_hex: function component_from_hex( hex, componentIndex ) {\n\n\t\treturn hex >> componentIndex * 8 & 0xFF;\n\n\t},\n\thex_with_component: function hex_with_component( hex, componentIndex, value ) {\n\n\t\treturn value << ( tmpComponent = componentIndex * 8 ) | hex & ~ ( 0xFF << tmpComponent );\n\n\t}\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function ( obj ) {\n\n\treturn typeof obj;\n\n} : function ( obj ) {\n\n\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function ( instance, Constructor ) {\n\n\tif ( ! ( instance instanceof Constructor ) ) {\n\n\t\tthrow new TypeError( \"Cannot call a class as a function\" );\n\n\t}\n\n};\n\nvar createClass = function () {\n\n\tfunction defineProperties( target, props ) {\n\n\t\tfor ( var i = 0; i < props.length; i ++ ) {\n\n\t\t\tvar descriptor = props[ i ];\n\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\tdescriptor.configurable = true;\n\t\t\tif ( \"value\" in descriptor ) descriptor.writable = true;\n\t\t\tObject.defineProperty( target, descriptor.key, descriptor );\n\n\t\t}\n\n\t}\n\n\treturn function ( Constructor, protoProps, staticProps ) {\n\n\t\tif ( protoProps ) defineProperties( Constructor.prototype, protoProps );\n\t\tif ( staticProps ) defineProperties( Constructor, staticProps );\n\t\treturn Constructor;\n\n\t};\n\n}();\n\n\n\n\n\n\n\nvar get = function get( object, property, receiver ) {\n\n\tif ( object === null ) object = Function.prototype;\n\tvar desc = Object.getOwnPropertyDescriptor( object, property );\n\n\tif ( desc === undefined ) {\n\n\t\tvar parent = Object.getPrototypeOf( object );\n\n\t\tif ( parent === null ) {\n\n\t\t\treturn undefined;\n\n\t\t} else {\n\n\t\t\treturn get( parent, property, receiver );\n\n\t\t}\n\n\t} else if ( \"value\" in desc ) {\n\n\t\treturn desc.value;\n\n\t} else {\n\n\t\tvar getter = desc.get;\n\n\t\tif ( getter === undefined ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn getter.call( receiver );\n\n\t}\n\n};\n\nvar inherits = function ( subClass, superClass ) {\n\n\tif ( typeof superClass !== \"function\" && superClass !== null ) {\n\n\t\tthrow new TypeError( \"Super expression must either be null or a function, not \" + typeof superClass );\n\n\t}\n\n\tsubClass.prototype = Object.create( superClass && superClass.prototype, {\n\t\tconstructor: {\n\t\t\tvalue: subClass,\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t}\n\t} );\n\tif ( superClass ) Object.setPrototypeOf ? Object.setPrototypeOf( subClass, superClass ) : subClass.__proto__ = superClass;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function ( self, call ) {\n\n\tif ( ! self ) {\n\n\t\tthrow new ReferenceError( \"this hasn't been initialised - super() hasn't been called\" );\n\n\t}\n\n\treturn call && ( typeof call === \"object\" || typeof call === \"function\" ) ? call : self;\n\n};\n\nvar Color = function () {\n\n\tfunction Color() {\n\n\t\tclassCallCheck( this, Color );\n\t\tthis.__state = interpret.apply( this, arguments );\n\t\tif ( this.__state === false ) {\n\n\t\t\tthrow new Error( 'Failed to interpret color arguments' );\n\n\t\t}\n\t\tthis.__state.a = this.__state.a || 1;\n\n\t}\n\tcreateClass( Color, [ {\n\t\tkey: 'toString',\n\t\tvalue: function toString() {\n\n\t\t\treturn colorToString( this );\n\n\t\t}\n\t}, {\n\t\tkey: 'toHexString',\n\t\tvalue: function toHexString() {\n\n\t\t\treturn colorToString( this, true );\n\n\t\t}\n\t}, {\n\t\tkey: 'toOriginal',\n\t\tvalue: function toOriginal() {\n\n\t\t\treturn this.__state.conversion.write( this );\n\n\t\t}\n\t} ] );\n\treturn Color;\n\n}();\nfunction defineRGBComponent( target, component, componentHexIndex ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'RGB' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'RGB' ) {\n\n\t\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\t\tthis.__state.space = 'RGB';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nfunction defineHSVComponent( target, component ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'HSV' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateHSV( this );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'HSV' ) {\n\n\t\t\t\tColor.recalculateHSV( this );\n\t\t\t\tthis.__state.space = 'HSV';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nColor.recalculateRGB = function ( color, component, componentHexIndex ) {\n\n\tif ( color.__state.space === 'HEX' ) {\n\n\t\tcolor.__state[ component ] = ColorMath.component_from_hex( color.__state.hex, componentHexIndex );\n\n\t} else if ( color.__state.space === 'HSV' ) {\n\n\t\tCommon.extend( color.__state, ColorMath.hsv_to_rgb( color.__state.h, color.__state.s, color.__state.v ) );\n\n\t} else {\n\n\t\tthrow new Error( 'Corrupted color state' );\n\n\t}\n\n};\nColor.recalculateHSV = function ( color ) {\n\n\tvar result = ColorMath.rgb_to_hsv( color.r, color.g, color.b );\n\tCommon.extend( color.__state, {\n\t\ts: result.s,\n\t\tv: result.v\n\t} );\n\tif ( ! Common.isNaN( result.h ) ) {\n\n\t\tcolor.__state.h = result.h;\n\n\t} else if ( Common.isUndefined( color.__state.h ) ) {\n\n\t\tcolor.__state.h = 0;\n\n\t}\n\n};\nColor.COMPONENTS = [ 'r', 'g', 'b', 'h', 's', 'v', 'hex', 'a' ];\ndefineRGBComponent( Color.prototype, 'r', 2 );\ndefineRGBComponent( Color.prototype, 'g', 1 );\ndefineRGBComponent( Color.prototype, 'b', 0 );\ndefineHSVComponent( Color.prototype, 'h' );\ndefineHSVComponent( Color.prototype, 's' );\ndefineHSVComponent( Color.prototype, 'v' );\nObject.defineProperty( Color.prototype, 'a', {\n\tget: function get$$1() {\n\n\t\treturn this.__state.a;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.a = v;\n\n\t}\n} );\nObject.defineProperty( Color.prototype, 'hex', {\n\tget: function get$$1() {\n\n\t\tif ( ! this.__state.space !== 'HEX' ) {\n\n\t\t\tthis.__state.hex = ColorMath.rgb_to_hex( this.r, this.g, this.b );\n\n\t\t}\n\t\treturn this.__state.hex;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.space = 'HEX';\n\t\tthis.__state.hex = v;\n\n\t}\n} );\n\nvar Controller = function () {\n\n\tfunction Controller( object, property ) {\n\n\t\tclassCallCheck( this, Controller );\n\t\tthis.initialValue = object[ property ];\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tthis.object = object;\n\t\tthis.property = property;\n\t\tthis.__onChange = undefined;\n\t\tthis.__onFinishChange = undefined;\n\n\t}\n\tcreateClass( Controller, [ {\n\t\tkey: 'onChange',\n\t\tvalue: function onChange( fnc ) {\n\n\t\t\tthis.__onChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'onFinishChange',\n\t\tvalue: function onFinishChange( fnc ) {\n\n\t\t\tthis.__onFinishChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( newValue ) {\n\n\t\t\tthis.object[ this.property ] = newValue;\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this, newValue );\n\n\t\t\t}\n\t\t\tthis.updateDisplay();\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'getValue',\n\t\tvalue: function getValue() {\n\n\t\t\treturn this.object[ this.property ];\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'isModified',\n\t\tvalue: function isModified() {\n\n\t\t\treturn this.initialValue !== this.getValue();\n\n\t\t}\n\t} ] );\n\treturn Controller;\n\n}();\n\nvar EVENT_MAP = {\n\tHTMLEvents: [ 'change' ],\n\tMouseEvents: [ 'click', 'mousemove', 'mousedown', 'mouseup', 'mouseover' ],\n\tKeyboardEvents: [ 'keydown' ]\n};\nvar EVENT_MAP_INV = {};\nCommon.each( EVENT_MAP, function ( v, k ) {\n\n\tCommon.each( v, function ( e ) {\n\n\t\tEVENT_MAP_INV[ e ] = k;\n\n\t} );\n\n} );\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels( val ) {\n\n\tif ( val === '0' || Common.isUndefined( val ) ) {\n\n\t\treturn 0;\n\n\t}\n\tvar match = val.match( CSS_VALUE_PIXELS );\n\tif ( ! Common.isNull( match ) ) {\n\n\t\treturn parseFloat( match[ 1 ] );\n\n\t}\n\treturn 0;\n\n}\nvar dom = {\n\tmakeSelectable: function makeSelectable( elem, selectable ) {\n\n\t\tif ( elem === undefined || elem.style === undefined ) return;\n\t\telem.onselectstart = selectable ? function () {\n\n\t\t\treturn false;\n\n\t\t} : function () {};\n\t\telem.style.MozUserSelect = selectable ? 'auto' : 'none';\n\t\telem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n\t\telem.unselectable = selectable ? 'on' : 'off';\n\n\t},\n\tmakeFullscreen: function makeFullscreen( elem, hor, vert ) {\n\n\t\tvar vertical = vert;\n\t\tvar horizontal = hor;\n\t\tif ( Common.isUndefined( horizontal ) ) {\n\n\t\t\thorizontal = true;\n\n\t\t}\n\t\tif ( Common.isUndefined( vertical ) ) {\n\n\t\t\tvertical = true;\n\n\t\t}\n\t\telem.style.position = 'absolute';\n\t\tif ( horizontal ) {\n\n\t\t\telem.style.left = 0;\n\t\t\telem.style.right = 0;\n\n\t\t}\n\t\tif ( vertical ) {\n\n\t\t\telem.style.top = 0;\n\t\t\telem.style.bottom = 0;\n\n\t\t}\n\n\t},\n\tfakeEvent: function fakeEvent( elem, eventType, pars, aux ) {\n\n\t\tvar params = pars || {};\n\t\tvar className = EVENT_MAP_INV[ eventType ];\n\t\tif ( ! className ) {\n\n\t\t\tthrow new Error( 'Event type ' + eventType + ' not supported.' );\n\n\t\t}\n\t\tvar evt = document.createEvent( className );\n\t\tswitch ( className ) {\n\n\t\t\tcase 'MouseEvents':\n\t\t\t{\n\n\t\t\t\tvar clientX = params.x || params.clientX || 0;\n\t\t\t\tvar clientY = params.y || params.clientY || 0;\n\t\t\t\tevt.initMouseEvent( eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n\t\t\t\t\t0,\n\t\t\t\t\tclientX,\n\t\t\t\t\tclientY,\n\t\t\t\t\tfalse, false, false, false, 0, null );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tcase 'KeyboardEvents':\n\t\t\t{\n\n\t\t\t\tvar init = evt.initKeyboardEvent || evt.initKeyEvent;\n\t\t\t\tCommon.defaults( params, {\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tctrlKey: false,\n\t\t\t\t\taltKey: false,\n\t\t\t\t\tshiftKey: false,\n\t\t\t\t\tmetaKey: false,\n\t\t\t\t\tkeyCode: undefined,\n\t\t\t\t\tcharCode: undefined\n\t\t\t\t} );\n\t\t\t\tinit( eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tdefault:\n\t\t\t{\n\n\t\t\t\tevt.initEvent( eventType, params.bubbles || false, params.cancelable || true );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\t\tCommon.defaults( evt, aux );\n\t\telem.dispatchEvent( evt );\n\n\t},\n\tbind: function bind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.addEventListener ) {\n\n\t\t\telem.addEventListener( event, func, bool );\n\n\t\t} else if ( elem.attachEvent ) {\n\n\t\t\telem.attachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tunbind: function unbind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.removeEventListener ) {\n\n\t\t\telem.removeEventListener( event, func, bool );\n\n\t\t} else if ( elem.detachEvent ) {\n\n\t\t\telem.detachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\taddClass: function addClass( elem, className ) {\n\n\t\tif ( elem.className === undefined ) {\n\n\t\t\telem.className = className;\n\n\t\t} else if ( elem.className !== className ) {\n\n\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\tif ( classes.indexOf( className ) === - 1 ) {\n\n\t\t\t\tclasses.push( className );\n\t\t\t\telem.className = classes.join( ' ' ).replace( /^\\s+/, '' ).replace( /\\s+$/, '' );\n\n\t\t\t}\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tremoveClass: function removeClass( elem, className ) {\n\n\t\tif ( className ) {\n\n\t\t\tif ( elem.className === className ) {\n\n\t\t\t\telem.removeAttribute( 'class' );\n\n\t\t\t} else {\n\n\t\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\t\tvar index = classes.indexOf( className );\n\t\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\t\tclasses.splice( index, 1 );\n\t\t\t\t\telem.className = classes.join( ' ' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\telem.className = undefined;\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\thasClass: function hasClass( elem, className ) {\n\n\t\treturn new RegExp( '(?:^|\\\\s+)' + className + '(?:\\\\s+|$)' ).test( elem.className ) || false;\n\n\t},\n\tgetWidth: function getWidth( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-left-width' ] ) + cssValueToPixels( style[ 'border-right-width' ] ) + cssValueToPixels( style[ 'padding-left' ] ) + cssValueToPixels( style[ 'padding-right' ] ) + cssValueToPixels( style.width );\n\n\t},\n\tgetHeight: function getHeight( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-top-width' ] ) + cssValueToPixels( style[ 'border-bottom-width' ] ) + cssValueToPixels( style[ 'padding-top' ] ) + cssValueToPixels( style[ 'padding-bottom' ] ) + cssValueToPixels( style.height );\n\n\t},\n\tgetOffset: function getOffset( el ) {\n\n\t\tvar elem = el;\n\t\tvar offset = { left: 0, top: 0 };\n\t\tif ( elem.offsetParent ) {\n\n\t\t\tdo {\n\n\t\t\t\toffset.left += elem.offsetLeft;\n\t\t\t\toffset.top += elem.offsetTop;\n\t\t\t\telem = elem.offsetParent;\n\n\t\t\t} while ( elem );\n\n\t\t}\n\t\treturn offset;\n\n\t},\n\tisActive: function isActive( elem ) {\n\n\t\treturn elem === document.activeElement && ( elem.type || elem.href );\n\n\t}\n};\n\nvar BooleanController = function ( _Controller ) {\n\n\tinherits( BooleanController, _Controller );\n\tfunction BooleanController( object, property ) {\n\n\t\tclassCallCheck( this, BooleanController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( BooleanController.__proto__ || Object.getPrototypeOf( BooleanController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__prev = _this2.getValue();\n\t\t_this2.__checkbox = document.createElement( 'input' );\n\t\t_this2.__checkbox.setAttribute( 'type', 'checkbox' );\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( ! _this.__prev );\n\n\t\t}\n\t\tdom.bind( _this2.__checkbox, 'change', onChange, false );\n\t\t_this2.domElement.appendChild( _this2.__checkbox );\n\t\t_this2.updateDisplay();\n\t\treturn _this2;\n\n\t}\n\tcreateClass( BooleanController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\tthis.__prev = this.getValue();\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( this.getValue() === true ) {\n\n\t\t\t\tthis.__checkbox.setAttribute( 'checked', 'checked' );\n\t\t\t\tthis.__checkbox.checked = true;\n\t\t\t\tthis.__prev = true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.__checkbox.checked = false;\n\t\t\t\tthis.__prev = false;\n\n\t\t\t}\n\t\t\treturn get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn BooleanController;\n\n}( Controller );\n\nvar OptionController = function ( _Controller ) {\n\n\tinherits( OptionController, _Controller );\n\tfunction OptionController( object, property, opts ) {\n\n\t\tclassCallCheck( this, OptionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( OptionController.__proto__ || Object.getPrototypeOf( OptionController ) ).call( this, object, property ) );\n\t\tvar options = opts;\n\t\tvar _this = _this2;\n\t\t_this2.__select = document.createElement( 'select' );\n\t\tif ( Common.isArray( options ) ) {\n\n\t\t\tvar map = {};\n\t\t\tCommon.each( options, function ( element ) {\n\n\t\t\t\tmap[ element ] = element;\n\n\t\t\t} );\n\t\t\toptions = map;\n\n\t\t}\n\t\tCommon.each( options, function ( value, key ) {\n\n\t\t\tvar opt = document.createElement( 'option' );\n\t\t\topt.innerHTML = key;\n\t\t\topt.setAttribute( 'value', value );\n\t\t\t_this.__select.appendChild( opt );\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\tdom.bind( _this2.__select, 'change', function () {\n\n\t\t\tvar desiredValue = this.options[ this.selectedIndex ].value;\n\t\t\t_this.setValue( desiredValue );\n\n\t\t} );\n\t\t_this2.domElement.appendChild( _this2.__select );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( OptionController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( dom.isActive( this.__select ) ) return this;\n\t\t\tthis.__select.value = this.getValue();\n\t\t\treturn get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn OptionController;\n\n}( Controller );\n\nvar StringController = function ( _Controller ) {\n\n\tinherits( StringController, _Controller );\n\tfunction StringController( object, property ) {\n\n\t\tclassCallCheck( this, StringController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( StringController.__proto__ || Object.getPrototypeOf( StringController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( _this.__input.value );\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'keyup', onChange );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tthis.blur();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( StringController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( ! dom.isActive( this.__input ) ) {\n\n\t\t\t\tthis.__input.value = this.getValue();\n\n\t\t\t}\n\t\t\treturn get( StringController.prototype.__proto__ || Object.getPrototypeOf( StringController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn StringController;\n\n}( Controller );\n\nfunction numDecimals( x ) {\n\n\tvar _x = x.toString();\n\tif ( _x.indexOf( '.' ) > - 1 ) {\n\n\t\treturn _x.length - _x.indexOf( '.' ) - 1;\n\n\t}\n\treturn 0;\n\n}\nvar NumberController = function ( _Controller ) {\n\n\tinherits( NumberController, _Controller );\n\tfunction NumberController( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberController );\n\t\tvar _this = possibleConstructorReturn( this, ( NumberController.__proto__ || Object.getPrototypeOf( NumberController ) ).call( this, object, property ) );\n\t\tvar _params = params || {};\n\t\t_this.__min = _params.min;\n\t\t_this.__max = _params.max;\n\t\t_this.__step = _params.step;\n\t\tif ( Common.isUndefined( _this.__step ) ) {\n\n\t\t\tif ( _this.initialValue === 0 ) {\n\n\t\t\t\t_this.__impliedStep = 1;\n\n\t\t\t} else {\n\n\t\t\t\t_this.__impliedStep = Math.pow( 10, Math.floor( Math.log( Math.abs( _this.initialValue ) ) / Math.LN10 ) ) / 10;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_this.__impliedStep = _this.__step;\n\n\t\t}\n\t\t_this.__precision = numDecimals( _this.__impliedStep );\n\t\treturn _this;\n\n\t}\n\tcreateClass( NumberController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar _v = v;\n\t\t\tif ( this.__min !== undefined && _v < this.__min ) {\n\n\t\t\t\t_v = this.__min;\n\n\t\t\t} else if ( this.__max !== undefined && _v > this.__max ) {\n\n\t\t\t\t_v = this.__max;\n\n\t\t\t}\n\t\t\tif ( this.__step !== undefined && _v % this.__step !== 0 ) {\n\n\t\t\t\t_v = Math.round( _v / this.__step ) * this.__step;\n\n\t\t\t}\n\t\t\treturn get( NumberController.prototype.__proto__ || Object.getPrototypeOf( NumberController.prototype ), 'setValue', this ).call( this, _v );\n\n\t\t}\n\t}, {\n\t\tkey: 'min',\n\t\tvalue: function min( minValue ) {\n\n\t\t\tthis.__min = minValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'max',\n\t\tvalue: function max( maxValue ) {\n\n\t\t\tthis.__max = maxValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step( stepValue ) {\n\n\t\t\tthis.__step = stepValue;\n\t\t\tthis.__impliedStep = stepValue;\n\t\t\tthis.__precision = numDecimals( stepValue );\n\t\t\treturn this;\n\n\t\t}\n\t} ] );\n\treturn NumberController;\n\n}( Controller );\n\nfunction roundToDecimal( value, decimals ) {\n\n\tvar tenTo = Math.pow( 10, decimals );\n\treturn Math.round( value * tenTo ) / tenTo;\n\n}\nvar NumberControllerBox = function ( _NumberController ) {\n\n\tinherits( NumberControllerBox, _NumberController );\n\tfunction NumberControllerBox( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberControllerBox );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerBox.__proto__ || Object.getPrototypeOf( NumberControllerBox ) ).call( this, object, property, params ) );\n\t\t_this2.__truncationSuspended = false;\n\t\tvar _this = _this2;\n\t\tvar prevY = void 0;\n\t\tfunction onChange() {\n\n\t\t\tvar attempted = parseFloat( _this.__input.value );\n\t\t\tif ( ! Common.isNaN( attempted ) ) {\n\n\t\t\t\t_this.setValue( attempted );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\tvar diff = prevY - e.clientY;\n\t\t\t_this.setValue( _this.getValue() + diff * _this.__impliedStep );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\t_this.__truncationSuspended = true;\n\t\t\t\tthis.blur();\n\t\t\t\t_this.__truncationSuspended = false;\n\t\t\t\tonFinish();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerBox, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tthis.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal( this.getValue(), this.__precision );\n\t\t\treturn get( NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf( NumberControllerBox.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerBox;\n\n}( NumberController );\n\nfunction map( v, i1, i2, o1, o2 ) {\n\n\treturn o1 + ( o2 - o1 ) * ( ( v - i1 ) / ( i2 - i1 ) );\n\n}\nvar NumberControllerSlider = function ( _NumberController ) {\n\n\tinherits( NumberControllerSlider, _NumberController );\n\tfunction NumberControllerSlider( object, property, min, max, step ) {\n\n\t\tclassCallCheck( this, NumberControllerSlider );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerSlider.__proto__ || Object.getPrototypeOf( NumberControllerSlider ) ).call( this, object, property, { min: min, max: max, step: step } ) );\n\t\tvar _this = _this2;\n\t\t_this2.__background = document.createElement( 'div' );\n\t\t_this2.__foreground = document.createElement( 'div' );\n\t\tdom.bind( _this2.__background, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__background, 'touchstart', onTouchStart );\n\t\tdom.addClass( _this2.__background, 'slider' );\n\t\tdom.addClass( _this2.__foreground, 'slider-fg' );\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdocument.activeElement.blur();\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tonMouseDrag( e );\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\te.preventDefault();\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onTouchStart( e ) {\n\n\t\t\tif ( e.touches.length !== 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tdom.bind( window, 'touchmove', onTouchMove );\n\t\t\tdom.bind( window, 'touchend', onTouchEnd );\n\t\t\tonTouchMove( e );\n\n\t\t}\n\t\tfunction onTouchMove( e ) {\n\n\t\t\tvar clientX = e.touches[ 0 ].clientX;\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\n\t\t}\n\t\tfunction onTouchEnd() {\n\n\t\t\tdom.unbind( window, 'touchmove', onTouchMove );\n\t\t\tdom.unbind( window, 'touchend', onTouchEnd );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.updateDisplay();\n\t\t_this2.__background.appendChild( _this2.__foreground );\n\t\t_this2.domElement.appendChild( _this2.__background );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerSlider, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar pct = ( this.getValue() - this.__min ) / ( this.__max - this.__min );\n\t\t\tthis.__foreground.style.width = pct * 100 + '%';\n\t\t\treturn get( NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf( NumberControllerSlider.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerSlider;\n\n}( NumberController );\n\nvar FunctionController = function ( _Controller ) {\n\n\tinherits( FunctionController, _Controller );\n\tfunction FunctionController( object, property, text ) {\n\n\t\tclassCallCheck( this, FunctionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( FunctionController.__proto__ || Object.getPrototypeOf( FunctionController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__button = document.createElement( 'div' );\n\t\t_this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n\t\tdom.bind( _this2.__button, 'click', function ( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.fire();\n\t\t\treturn false;\n\n\t\t} );\n\t\tdom.addClass( _this2.__button, 'button' );\n\t\t_this2.domElement.appendChild( _this2.__button );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( FunctionController, [ {\n\t\tkey: 'fire',\n\t\tvalue: function fire() {\n\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this );\n\n\t\t\t}\n\t\t\tthis.getValue().call( this.object );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t} ] );\n\treturn FunctionController;\n\n}( Controller );\n\nvar ColorController = function ( _Controller ) {\n\n\tinherits( ColorController, _Controller );\n\tfunction ColorController( object, property ) {\n\n\t\tclassCallCheck( this, ColorController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( ColorController.__proto__ || Object.getPrototypeOf( ColorController ) ).call( this, object, property ) );\n\t\t_this2.__color = new Color( _this2.getValue() );\n\t\t_this2.__temp = new Color( 0 );\n\t\tvar _this = _this2;\n\t\t_this2.domElement = document.createElement( 'div' );\n\t\tdom.makeSelectable( _this2.domElement, false );\n\t\t_this2.__selector = document.createElement( 'div' );\n\t\t_this2.__selector.className = 'selector';\n\t\t_this2.__saturation_field = document.createElement( 'div' );\n\t\t_this2.__saturation_field.className = 'saturation-field';\n\t\t_this2.__field_knob = document.createElement( 'div' );\n\t\t_this2.__field_knob.className = 'field-knob';\n\t\t_this2.__field_knob_border = '2px solid ';\n\t\t_this2.__hue_knob = document.createElement( 'div' );\n\t\t_this2.__hue_knob.className = 'hue-knob';\n\t\t_this2.__hue_field = document.createElement( 'div' );\n\t\t_this2.__hue_field.className = 'hue-field';\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.type = 'text';\n\t\t_this2.__input_textShadow = '0 1px 1px ';\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tonBlur.call( this );\n\n\t\t\t}\n\n\t\t} );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__selector, 'mousedown', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'mouseup', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tdom.bind( _this2.__selector, 'touchstart', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'touchend', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tvar valueField = document.createElement( 'div' );\n\t\tCommon.extend( _this2.__selector.style, {\n\t\t\twidth: '122px',\n\t\t\theight: '102px',\n\t\t\tpadding: '3px',\n\t\t\tbackgroundColor: '#222',\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n\t\t} );\n\t\tCommon.extend( _this2.__field_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '12px',\n\t\t\theight: '12px',\n\t\t\tborder: _this2.__field_knob_border + ( _this2.__color.v < 0.5 ? '#fff' : '#000' ),\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n\t\t\tborderRadius: '12px',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__hue_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '15px',\n\t\t\theight: '2px',\n\t\t\tborderRight: '4px solid #fff',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__saturation_field.style, {\n\t\t\twidth: '100px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tmarginRight: '3px',\n\t\t\tdisplay: 'inline-block',\n\t\t\tcursor: 'pointer'\n\t\t} );\n\t\tCommon.extend( valueField.style, {\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tbackground: 'none'\n\t\t} );\n\t\tlinearGradient( valueField, 'top', 'rgba(0,0,0,0)', '#000' );\n\t\tCommon.extend( _this2.__hue_field.style, {\n\t\t\twidth: '15px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tcursor: 'ns-resize',\n\t\t\tposition: 'absolute',\n\t\t\ttop: '3px',\n\t\t\tright: '3px'\n\t\t} );\n\t\thueGradient( _this2.__hue_field );\n\t\tCommon.extend( _this2.__input.style, {\n\t\t\toutline: 'none',\n\t\t\ttextAlign: 'center',\n\t\t\tcolor: '#fff',\n\t\t\tborder: 0,\n\t\t\tfontWeight: 'bold',\n\t\t\ttextShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n\t\t} );\n\t\tdom.bind( _this2.__saturation_field, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__saturation_field, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__hue_field, 'mousedown', fieldDownH );\n\t\tdom.bind( _this2.__hue_field, 'touchstart', fieldDownH );\n\t\tfunction fieldDown( e ) {\n\n\t\t\tsetSV( e );\n\t\t\tdom.bind( window, 'mousemove', setSV );\n\t\t\tdom.bind( window, 'touchmove', setSV );\n\t\t\tdom.bind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.bind( window, 'touchend', fieldUpSV );\n\n\t\t}\n\t\tfunction fieldDownH( e ) {\n\n\t\t\tsetH( e );\n\t\t\tdom.bind( window, 'mousemove', setH );\n\t\t\tdom.bind( window, 'touchmove', setH );\n\t\t\tdom.bind( window, 'mouseup', fieldUpH );\n\t\t\tdom.bind( window, 'touchend', fieldUpH );\n\n\t\t}\n\t\tfunction fieldUpSV() {\n\n\t\t\tdom.unbind( window, 'mousemove', setSV );\n\t\t\tdom.unbind( window, 'touchmove', setSV );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.unbind( window, 'touchend', fieldUpSV );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction fieldUpH() {\n\n\t\t\tdom.unbind( window, 'mousemove', setH );\n\t\t\tdom.unbind( window, 'touchmove', setH );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpH );\n\t\t\tdom.unbind( window, 'touchend', fieldUpH );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tvar i = interpret( this.value );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\t_this.__color.__state = i;\n\t\t\t\t_this.setValue( _this.__color.toOriginal() );\n\n\t\t\t} else {\n\n\t\t\t\tthis.value = _this.__color.toString();\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.__color.toOriginal() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__saturation_field.appendChild( valueField );\n\t\t_this2.__selector.appendChild( _this2.__field_knob );\n\t\t_this2.__selector.appendChild( _this2.__saturation_field );\n\t\t_this2.__selector.appendChild( _this2.__hue_field );\n\t\t_this2.__hue_field.appendChild( _this2.__hue_knob );\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\t_this2.domElement.appendChild( _this2.__selector );\n\t\t_this2.updateDisplay();\n\t\tfunction setSV( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__saturation_field.getBoundingClientRect();\n\t\t\tvar _ref = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientX = _ref.clientX,\n\t\t\t\tclientY = _ref.clientY;\n\t\t\tvar s = ( clientX - fieldRect.left ) / ( fieldRect.right - fieldRect.left );\n\t\t\tvar v = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( v > 1 ) {\n\n\t\t\t\tv = 1;\n\n\t\t\t} else if ( v < 0 ) {\n\n\t\t\t\tv = 0;\n\n\t\t\t}\n\t\t\tif ( s > 1 ) {\n\n\t\t\t\ts = 1;\n\n\t\t\t} else if ( s < 0 ) {\n\n\t\t\t\ts = 0;\n\n\t\t\t}\n\t\t\t_this.__color.v = v;\n\t\t\t_this.__color.s = s;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction setH( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__hue_field.getBoundingClientRect();\n\t\t\tvar _ref2 = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientY = _ref2.clientY;\n\t\t\tvar h = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( h > 1 ) {\n\n\t\t\t\th = 1;\n\n\t\t\t} else if ( h < 0 ) {\n\n\t\t\t\th = 0;\n\n\t\t\t}\n\t\t\t_this.__color.h = h * 360;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\treturn _this2;\n\n\t}\n\tcreateClass( ColorController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar i = interpret( this.getValue() );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\tvar mismatch = false;\n\t\t\t\tCommon.each( Color.COMPONENTS, function ( component ) {\n\n\t\t\t\t\tif ( ! Common.isUndefined( i[ component ] ) && ! Common.isUndefined( this.__color.__state[ component ] ) && i[ component ] !== this.__color.__state[ component ] ) {\n\n\t\t\t\t\t\tmismatch = true;\n\t\t\t\t\t\treturn {};\n\n\t\t\t\t\t}\n\n\t\t\t\t}, this );\n\t\t\t\tif ( mismatch ) {\n\n\t\t\t\t\tCommon.extend( this.__color.__state, i );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tCommon.extend( this.__temp.__state, this.__color.__state );\n\t\t\tthis.__temp.a = 1;\n\t\t\tvar flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n\t\t\tvar _flip = 255 - flip;\n\t\t\tCommon.extend( this.__field_knob.style, {\n\t\t\t\tmarginLeft: 100 * this.__color.s - 7 + 'px',\n\t\t\t\tmarginTop: 100 * ( 1 - this.__color.v ) - 7 + 'px',\n\t\t\t\tbackgroundColor: this.__temp.toHexString(),\n\t\t\t\tborder: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n\t\t\t} );\n\t\t\tthis.__hue_knob.style.marginTop = ( 1 - this.__color.h / 360 ) * 100 + 'px';\n\t\t\tthis.__temp.s = 1;\n\t\t\tthis.__temp.v = 1;\n\t\t\tlinearGradient( this.__saturation_field, 'left', '#fff', this.__temp.toHexString() );\n\t\t\tthis.__input.value = this.__color.toString();\n\t\t\tCommon.extend( this.__input.style, {\n\t\t\t\tbackgroundColor: this.__color.toHexString(),\n\t\t\t\tcolor: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n\t\t\t\ttextShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n\t\t\t} );\n\n\t\t}\n\t} ] );\n\treturn ColorController;\n\n}( Controller );\nvar vendors = [ '-moz-', '-o-', '-webkit-', '-ms-', '' ];\nfunction linearGradient( elem, x, a, b ) {\n\n\telem.style.background = '';\n\tCommon.each( vendors, function ( vendor ) {\n\n\t\telem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n\n\t} );\n\n}\nfunction hueGradient( elem ) {\n\n\telem.style.background = '';\n\telem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n\telem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\n}\n\nvar css = {\n\tload: function load( url, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar link = doc.createElement( 'link' );\n\t\tlink.type = 'text/css';\n\t\tlink.rel = 'stylesheet';\n\t\tlink.href = url;\n\t\tdoc.getElementsByTagName( 'head' )[ 0 ].appendChild( link );\n\n\t},\n\tinject: function inject( cssContent, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar injected = document.createElement( 'style' );\n\t\tinjected.type = 'text/css';\n\t\tinjected.innerHTML = cssContent;\n\t\tvar head = doc.getElementsByTagName( 'head' )[ 0 ];\n\t\ttry {\n\n\t\t\thead.appendChild( injected );\n\n\t\t} catch ( e ) {\n\t\t}\n\n\t}\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory( object, property ) {\n\n\tvar initialValue = object[ property ];\n\tif ( Common.isArray( arguments[ 2 ] ) || Common.isObject( arguments[ 2 ] ) ) {\n\n\t\treturn new OptionController( object, property, arguments[ 2 ] );\n\n\t}\n\tif ( Common.isNumber( initialValue ) ) {\n\n\t\tif ( Common.isNumber( arguments[ 2 ] ) && Common.isNumber( arguments[ 3 ] ) ) {\n\n\t\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ], arguments[ 4 ] );\n\n\t\t\t}\n\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ] );\n\n\t\t}\n\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ], step: arguments[ 4 ] } );\n\n\t\t}\n\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ] } );\n\n\t}\n\tif ( Common.isString( initialValue ) ) {\n\n\t\treturn new StringController( object, property );\n\n\t}\n\tif ( Common.isFunction( initialValue ) ) {\n\n\t\treturn new FunctionController( object, property, '' );\n\n\t}\n\tif ( Common.isBoolean( initialValue ) ) {\n\n\t\treturn new BooleanController( object, property );\n\n\t}\n\treturn null;\n\n};\n\nfunction requestAnimationFrame( callback ) {\n\n\tsetTimeout( callback, 1000 / 60 );\n\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n\n\tfunction CenteredDiv() {\n\n\t\tclassCallCheck( this, CenteredDiv );\n\t\tthis.backgroundElement = document.createElement( 'div' );\n\t\tCommon.extend( this.backgroundElement.style, {\n\t\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1000',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: 'opacity 0.2s linear',\n\t\t\ttransition: 'opacity 0.2s linear'\n\t\t} );\n\t\tdom.makeFullscreen( this.backgroundElement );\n\t\tthis.backgroundElement.style.position = 'fixed';\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tCommon.extend( this.domElement.style, {\n\t\t\tposition: 'fixed',\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1001',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n\t\t\ttransition: 'transform 0.2s ease-out, opacity 0.2s linear'\n\t\t} );\n\t\tdocument.body.appendChild( this.backgroundElement );\n\t\tdocument.body.appendChild( this.domElement );\n\t\tvar _this = this;\n\t\tdom.bind( this.backgroundElement, 'click', function () {\n\n\t\t\t_this.hide();\n\n\t\t} );\n\n\t}\n\tcreateClass( CenteredDiv, [ {\n\t\tkey: 'show',\n\t\tvalue: function show() {\n\n\t\t\tvar _this = this;\n\t\t\tthis.backgroundElement.style.display = 'block';\n\t\t\tthis.domElement.style.display = 'block';\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\t\t\tthis.layout();\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.backgroundElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.webkitTransform = 'scale(1)';\n\n\t\t\t} );\n\n\t\t}\n\t}, {\n\t\tkey: 'hide',\n\t\tvalue: function hide() {\n\n\t\t\tvar _this = this;\n\t\t\tvar hide = function hide() {\n\n\t\t\t\t_this.domElement.style.display = 'none';\n\t\t\t\t_this.backgroundElement.style.display = 'none';\n\t\t\t\tdom.unbind( _this.domElement, 'webkitTransitionEnd', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'transitionend', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'oTransitionEnd', hide );\n\n\t\t\t};\n\t\t\tdom.bind( this.domElement, 'webkitTransitionEnd', hide );\n\t\t\tdom.bind( this.domElement, 'transitionend', hide );\n\t\t\tdom.bind( this.domElement, 'oTransitionEnd', hide );\n\t\t\tthis.backgroundElement.style.opacity = 0;\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\n\t\t}\n\t}, {\n\t\tkey: 'layout',\n\t\tvalue: function layout() {\n\n\t\t\tthis.domElement.style.left = window.innerWidth / 2 - dom.getWidth( this.domElement ) / 2 + 'px';\n\t\t\tthis.domElement.style.top = window.innerHeight / 2 - dom.getHeight( this.domElement ) / 2 + 'px';\n\n\t\t}\n\t} ] );\n\treturn CenteredDiv;\n\n}();\n\nvar styleSheet = ___$insertStyle( \".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\" );\n\ncss.inject( styleSheet );\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n\n\ttry {\n\n\t\treturn !! window.localStorage;\n\n\t} catch ( e ) {\n\n\t\treturn false;\n\n\t}\n\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI( pars ) {\n\n\tvar _this = this;\n\tvar params = pars || {};\n\tthis.domElement = document.createElement( 'div' );\n\tthis.__ul = document.createElement( 'ul' );\n\tthis.domElement.appendChild( this.__ul );\n\tdom.addClass( this.domElement, CSS_NAMESPACE );\n\tthis.__folders = {};\n\tthis.__controllers = [];\n\tthis.__rememberedObjects = [];\n\tthis.__rememberedObjectIndecesToControllers = [];\n\tthis.__listening = [];\n\tparams = Common.defaults( params, {\n\t\tcloseOnTop: false,\n\t\tautoPlace: true,\n\t\twidth: GUI.DEFAULT_WIDTH\n\t} );\n\tparams = Common.defaults( params, {\n\t\tresizable: params.autoPlace,\n\t\thideable: params.autoPlace\n\t} );\n\tif ( ! Common.isUndefined( params.load ) ) {\n\n\t\tif ( params.preset ) {\n\n\t\t\tparams.load.preset = params.preset;\n\n\t\t}\n\n\t} else {\n\n\t\tparams.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n\t}\n\tif ( Common.isUndefined( params.parent ) && params.hideable ) {\n\n\t\thideableGuis.push( this );\n\n\t}\n\tparams.resizable = Common.isUndefined( params.parent ) && params.resizable;\n\tif ( params.autoPlace && Common.isUndefined( params.scrollable ) ) {\n\n\t\tparams.scrollable = true;\n\n\t}\n\tvar useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( this, 'isLocal' ) ) === 'true';\n\tvar saveToLocalStorage = void 0;\n\tvar titleRow = void 0;\n\tObject.defineProperties( this,\n\t\t{\n\t\t\tparent: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.parent;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tscrollable: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.scrollable;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tautoPlace: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.autoPlace;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcloseOnTop: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closeOnTop;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tpreset: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\treturn _this.getRoot().preset;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn params.load.preset;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\t_this.getRoot().preset = v;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tparams.load.preset = v;\n\n\t\t\t\t\t}\n\t\t\t\t\tsetPresetSelectIndex( this );\n\t\t\t\t\t_this.revert();\n\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.width;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.width = v;\n\t\t\t\t\tsetWidth( _this, v );\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tname: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.name;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.name = v;\n\t\t\t\t\tif ( titleRow ) {\n\n\t\t\t\t\t\ttitleRow.innerHTML = params.name;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tclosed: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closed;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.closed = v;\n\t\t\t\t\tif ( params.closed ) {\n\n\t\t\t\t\t\tdom.addClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdom.removeClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t}\n\t\t\t\t\tthis.onResize();\n\t\t\t\t\tif ( _this.__closeButton ) {\n\n\t\t\t\t\t\t_this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tload: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.load;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tuseLocalStorage: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn useLocalStorage;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( bool ) {\n\n\t\t\t\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\t\t\t\tuseLocalStorage = bool;\n\t\t\t\t\t\tif ( bool ) {\n\n\t\t\t\t\t\t\tdom.bind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdom.unbind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'isLocal' ), bool );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\tthis.closed = params.closed || false;\n\t\tdom.addClass( this.domElement, GUI.CLASS_MAIN );\n\t\tdom.makeSelectable( this.domElement, false );\n\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\tif ( useLocalStorage ) {\n\n\t\t\t\t_this.useLocalStorage = true;\n\t\t\t\tvar savedGui = localStorage.getItem( getLocalStorageHash( this, 'gui' ) );\n\t\t\t\tif ( savedGui ) {\n\n\t\t\t\t\tparams.load = JSON.parse( savedGui );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t\tthis.__closeButton = document.createElement( 'div' );\n\t\tthis.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BUTTON );\n\t\tif ( params.closeOnTop ) {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_TOP );\n\t\t\tthis.domElement.insertBefore( this.__closeButton, this.domElement.childNodes[ 0 ] );\n\n\t\t} else {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BOTTOM );\n\t\t\tthis.domElement.appendChild( this.__closeButton );\n\n\t\t}\n\t\tdom.bind( this.__closeButton, 'click', function () {\n\n\t\t\t_this.closed = ! _this.closed;\n\n\t\t} );\n\n\t} else {\n\n\t\tif ( params.closed === undefined ) {\n\n\t\t\tparams.closed = true;\n\n\t\t}\n\t\tvar titleRowName = document.createTextNode( params.name );\n\t\tdom.addClass( titleRowName, 'controller-name' );\n\t\ttitleRow = addRow( _this, titleRowName );\n\t\tvar onClickTitle = function onClickTitle( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.closed = ! _this.closed;\n\t\t\treturn false;\n\n\t\t};\n\t\tdom.addClass( this.__ul, GUI.CLASS_CLOSED );\n\t\tdom.addClass( titleRow, 'title' );\n\t\tdom.bind( titleRow, 'click', onClickTitle );\n\t\tif ( ! params.closed ) {\n\n\t\t\tthis.closed = false;\n\n\t\t}\n\n\t}\n\tif ( params.autoPlace ) {\n\n\t\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\t\tif ( autoPlaceVirgin ) {\n\n\t\t\t\tautoPlaceContainer = document.createElement( 'div' );\n\t\t\t\tdom.addClass( autoPlaceContainer, CSS_NAMESPACE );\n\t\t\t\tdom.addClass( autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER );\n\t\t\t\tdocument.body.appendChild( autoPlaceContainer );\n\t\t\t\tautoPlaceVirgin = false;\n\n\t\t\t}\n\t\t\tautoPlaceContainer.appendChild( this.domElement );\n\t\t\tdom.addClass( this.domElement, GUI.CLASS_AUTO_PLACE );\n\n\t\t}\n\t\tif ( ! this.parent ) {\n\n\t\t\tsetWidth( _this, params.width );\n\n\t\t}\n\n\t}\n\tthis.__resizeHandler = function () {\n\n\t\t_this.onResizeDebounced();\n\n\t};\n\tdom.bind( window, 'resize', this.__resizeHandler );\n\tdom.bind( this.__ul, 'webkitTransitionEnd', this.__resizeHandler );\n\tdom.bind( this.__ul, 'transitionend', this.__resizeHandler );\n\tdom.bind( this.__ul, 'oTransitionEnd', this.__resizeHandler );\n\tthis.onResize();\n\tif ( params.resizable ) {\n\n\t\taddResizeHandle( this );\n\n\t}\n\tsaveToLocalStorage = function saveToLocalStorage() {\n\n\t\tif ( SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( _this, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'gui' ), JSON.stringify( _this.getSaveObject() ) );\n\n\t\t}\n\n\t};\n\tthis.saveToLocalStorageIfPossible = saveToLocalStorage;\n\tfunction resetWidth() {\n\n\t\tvar root = _this.getRoot();\n\t\troot.width += 1;\n\t\tCommon.defer( function () {\n\n\t\t\troot.width -= 1;\n\n\t\t} );\n\n\t}\n\tif ( ! params.parent ) {\n\n\t\tresetWidth();\n\n\t}\n\n};\nGUI.toggleHide = function () {\n\n\thide = ! hide;\n\tCommon.each( hideableGuis, function ( gui ) {\n\n\t\tgui.domElement.style.display = hide ? 'none' : '';\n\n\t} );\n\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function ( e ) {\n\n\tif ( document.activeElement.type !== 'text' && ( e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE ) ) {\n\n\t\tGUI.toggleHide();\n\n\t}\n\n};\ndom.bind( window, 'keydown', GUI._keydownHandler, false );\nCommon.extend( GUI.prototype,\n\t{\n\t\tadd: function add( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tfactoryArgs: Array.prototype.slice.call( arguments, 2 )\n\t\t\t} );\n\n\t\t},\n\t\taddColor: function addColor( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tcolor: true\n\t\t\t} );\n\n\t\t},\n\t\tremove: function remove( controller ) {\n\n\t\t\tthis.__ul.removeChild( controller.__li );\n\t\t\tthis.__controllers.splice( this.__controllers.indexOf( controller ), 1 );\n\t\t\tvar _this = this;\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\tdestroy: function destroy() {\n\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.' );\n\n\t\t\t}\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tautoPlaceContainer.removeChild( this.domElement );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( this.__folders, function ( subfolder ) {\n\n\t\t\t\t_this.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tdom.unbind( window, 'keydown', GUI._keydownHandler, false );\n\t\t\tremoveListeners( this );\n\n\t\t},\n\t\taddFolder: function addFolder( name ) {\n\n\t\t\tif ( this.__folders[ name ] !== undefined ) {\n\n\t\t\t\tthrow new Error( 'You already have a folder in this GUI by the' + ' name \"' + name + '\"' );\n\n\t\t\t}\n\t\t\tvar newGuiParams = { name: name, parent: this };\n\t\t\tnewGuiParams.autoPlace = this.autoPlace;\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ name ] ) {\n\n\t\t\t\tnewGuiParams.closed = this.load.folders[ name ].closed;\n\t\t\t\tnewGuiParams.load = this.load.folders[ name ];\n\n\t\t\t}\n\t\t\tvar gui = new GUI( newGuiParams );\n\t\t\tthis.__folders[ name ] = gui;\n\t\t\tvar li = addRow( this, gui.domElement );\n\t\t\tdom.addClass( li, 'folder' );\n\t\t\treturn gui;\n\n\t\t},\n\t\tremoveFolder: function removeFolder( folder ) {\n\n\t\t\tthis.__ul.removeChild( folder.domElement.parentElement );\n\t\t\tdelete this.__folders[ folder.name ];\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ folder.name ] ) {\n\n\t\t\t\tdelete this.load.folders[ folder.name ];\n\n\t\t\t}\n\t\t\tremoveListeners( folder );\n\t\t\tvar _this = this;\n\t\t\tCommon.each( folder.__folders, function ( subfolder ) {\n\n\t\t\t\tfolder.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\topen: function open() {\n\n\t\t\tthis.closed = false;\n\n\t\t},\n\t\tclose: function close() {\n\n\t\t\tthis.closed = true;\n\n\t\t},\n\t\thide: function hide() {\n\n\t\t\tthis.domElement.style.display = 'none';\n\n\t\t},\n\t\tshow: function show() {\n\n\t\t\tthis.domElement.style.display = '';\n\n\t\t},\n\t\tonResize: function onResize() {\n\n\t\t\tvar root = this.getRoot();\n\t\t\tif ( root.scrollable ) {\n\n\t\t\t\tvar top = dom.getOffset( root.__ul ).top;\n\t\t\t\tvar h = 0;\n\t\t\t\tCommon.each( root.__ul.childNodes, function ( node ) {\n\n\t\t\t\t\tif ( ! ( root.autoPlace && node === root.__save_row ) ) {\n\n\t\t\t\t\t\th += dom.getHeight( node );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tif ( window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h ) {\n\n\t\t\t\t\tdom.addClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdom.removeClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = 'auto';\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( root.__resize_handle ) {\n\n\t\t\t\tCommon.defer( function () {\n\n\t\t\t\t\troot.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( root.__closeButton ) {\n\n\t\t\t\troot.__closeButton.style.width = root.width + 'px';\n\n\t\t\t}\n\n\t\t},\n\t\tonResizeDebounced: Common.debounce( function () {\n\n\t\t\tthis.onResize();\n\n\t\t}, 50 ),\n\t\tremember: function remember() {\n\n\t\t\tif ( Common.isUndefined( SAVE_DIALOGUE ) ) {\n\n\t\t\t\tSAVE_DIALOGUE = new CenteredDiv();\n\t\t\t\tSAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n\n\t\t\t}\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'You can only call remember on a top level GUI.' );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( Array.prototype.slice.call( arguments ), function ( object ) {\n\n\t\t\t\tif ( _this.__rememberedObjects.length === 0 ) {\n\n\t\t\t\t\taddSaveMenu( _this );\n\n\t\t\t\t}\n\t\t\t\tif ( _this.__rememberedObjects.indexOf( object ) === - 1 ) {\n\n\t\t\t\t\t_this.__rememberedObjects.push( object );\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tsetWidth( this, this.width );\n\n\t\t\t}\n\n\t\t},\n\t\tgetRoot: function getRoot() {\n\n\t\t\tvar gui = this;\n\t\t\twhile ( gui.parent ) {\n\n\t\t\t\tgui = gui.parent;\n\n\t\t\t}\n\t\t\treturn gui;\n\n\t\t},\n\t\tgetSaveObject: function getSaveObject() {\n\n\t\t\tvar toReturn = this.load;\n\t\t\ttoReturn.closed = this.closed;\n\t\t\tif ( this.__rememberedObjects.length > 0 ) {\n\n\t\t\t\ttoReturn.preset = this.preset;\n\t\t\t\tif ( ! toReturn.remembered ) {\n\n\t\t\t\t\ttoReturn.remembered = {};\n\n\t\t\t\t}\n\t\t\t\ttoReturn.remembered[ this.preset ] = getCurrentPreset( this );\n\n\t\t\t}\n\t\t\ttoReturn.folders = {};\n\t\t\tCommon.each( this.__folders, function ( element, key ) {\n\n\t\t\t\ttoReturn.folders[ key ] = element.getSaveObject();\n\n\t\t\t} );\n\t\t\treturn toReturn;\n\n\t\t},\n\t\tsave: function save() {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\n\t\t\t}\n\t\t\tthis.load.remembered[ this.preset ] = getCurrentPreset( this );\n\t\t\tmarkPresetModified( this, false );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\tsaveAs: function saveAs( presetName ) {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\t\t\t\tthis.load.remembered[ DEFAULT_DEFAULT_PRESET_NAME ] = getCurrentPreset( this, true );\n\n\t\t\t}\n\t\t\tthis.load.remembered[ presetName ] = getCurrentPreset( this );\n\t\t\tthis.preset = presetName;\n\t\t\taddPresetOption( this, presetName, true );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\trevert: function revert( gui ) {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tif ( ! this.getRoot().load.remembered ) {\n\n\t\t\t\t\tcontroller.setValue( controller.initialValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trecallSavedValue( gui || this.getRoot(), controller );\n\n\t\t\t\t}\n\t\t\t\tif ( controller.__onFinishChange ) {\n\n\t\t\t\t\tcontroller.__onFinishChange.call( controller, controller.getValue() );\n\n\t\t\t\t}\n\n\t\t\t}, this );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.revert( folder );\n\n\t\t\t} );\n\t\t\tif ( ! gui ) {\n\n\t\t\t\tmarkPresetModified( this.getRoot(), false );\n\n\t\t\t}\n\n\t\t},\n\t\tlisten: function listen( controller ) {\n\n\t\t\tvar init = this.__listening.length === 0;\n\t\t\tthis.__listening.push( controller );\n\t\t\tif ( init ) {\n\n\t\t\t\tupdateDisplays( this.__listening );\n\n\t\t\t}\n\n\t\t},\n\t\tupdateDisplay: function updateDisplay() {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tcontroller.updateDisplay();\n\n\t\t\t} );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.updateDisplay();\n\n\t\t\t} );\n\n\t\t}\n\t} );\nfunction addRow( gui, newDom, liBefore ) {\n\n\tvar li = document.createElement( 'li' );\n\tif ( newDom ) {\n\n\t\tli.appendChild( newDom );\n\n\t}\n\tif ( liBefore ) {\n\n\t\tgui.__ul.insertBefore( li, liBefore );\n\n\t} else {\n\n\t\tgui.__ul.appendChild( li );\n\n\t}\n\tgui.onResize();\n\treturn li;\n\n}\nfunction removeListeners( gui ) {\n\n\tdom.unbind( window, 'resize', gui.__resizeHandler );\n\tif ( gui.saveToLocalStorageIfPossible ) {\n\n\t\tdom.unbind( window, 'unload', gui.saveToLocalStorageIfPossible );\n\n\t}\n\n}\nfunction markPresetModified( gui, modified ) {\n\n\tvar opt = gui.__preset_select[ gui.__preset_select.selectedIndex ];\n\tif ( modified ) {\n\n\t\topt.innerHTML = opt.value + '*';\n\n\t} else {\n\n\t\topt.innerHTML = opt.value;\n\n\t}\n\n}\nfunction augmentController( gui, li, controller ) {\n\n\tcontroller.__li = li;\n\tcontroller.__gui = gui;\n\tCommon.extend( controller, {\n\t\toptions: function options( _options ) {\n\n\t\t\tif ( arguments.length > 1 ) {\n\n\t\t\t\tvar nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: nextSibling,\n\t\t\t\t\tfactoryArgs: [ Common.toArray( arguments ) ]\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( Common.isArray( _options ) || Common.isObject( _options ) ) {\n\n\t\t\t\tvar _nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: _nextSibling,\n\t\t\t\t\tfactoryArgs: [ _options ]\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\t\tname: function name( _name ) {\n\n\t\t\tcontroller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n\t\t\treturn controller;\n\n\t\t},\n\t\tlisten: function listen() {\n\n\t\t\tcontroller.__gui.listen( controller );\n\t\t\treturn controller;\n\n\t\t},\n\t\tremove: function remove() {\n\n\t\t\tcontroller.__gui.remove( controller );\n\t\t\treturn controller;\n\n\t\t}\n\t} );\n\tif ( controller instanceof NumberControllerSlider ) {\n\n\t\tvar box = new NumberControllerBox( controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step } );\n\t\tCommon.each( [ 'updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max' ], function ( method ) {\n\n\t\t\tvar pc = controller[ method ];\n\t\t\tvar pb = box[ method ];\n\t\t\tcontroller[ method ] = box[ method ] = function () {\n\n\t\t\t\tvar args = Array.prototype.slice.call( arguments );\n\t\t\t\tpb.apply( box, args );\n\t\t\t\treturn pc.apply( controller, args );\n\n\t\t\t};\n\n\t\t} );\n\t\tdom.addClass( li, 'has-slider' );\n\t\tcontroller.domElement.insertBefore( box.domElement, controller.domElement.firstElementChild );\n\n\t} else if ( controller instanceof NumberControllerBox ) {\n\n\t\tvar r = function r( returned ) {\n\n\t\t\tif ( Common.isNumber( controller.__min ) && Common.isNumber( controller.__max ) ) {\n\n\t\t\t\tvar oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n\t\t\t\tvar wasListening = controller.__gui.__listening.indexOf( controller ) > - 1;\n\t\t\t\tcontroller.remove();\n\t\t\t\tvar newController = _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: controller.__li.nextElementSibling,\n\t\t\t\t\tfactoryArgs: [ controller.__min, controller.__max, controller.__step ]\n\t\t\t\t} );\n\t\t\t\tnewController.name( oldName );\n\t\t\t\tif ( wasListening ) newController.listen();\n\t\t\t\treturn newController;\n\n\t\t\t}\n\t\t\treturn returned;\n\n\t\t};\n\t\tcontroller.min = Common.compose( r, controller.min );\n\t\tcontroller.max = Common.compose( r, controller.max );\n\n\t} else if ( controller instanceof BooleanController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__checkbox, 'click' );\n\n\t\t} );\n\t\tdom.bind( controller.__checkbox, 'click', function ( e ) {\n\n\t\t\te.stopPropagation();\n\n\t\t} );\n\n\t} else if ( controller instanceof FunctionController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__button, 'click' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseover', function () {\n\n\t\t\tdom.addClass( controller.__button, 'hover' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseout', function () {\n\n\t\t\tdom.removeClass( controller.__button, 'hover' );\n\n\t\t} );\n\n\t} else if ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\t\tcontroller.updateDisplay = Common.compose( function ( val ) {\n\n\t\t\tli.style.borderLeftColor = controller.__color.toString();\n\t\t\treturn val;\n\n\t\t}, controller.updateDisplay );\n\t\tcontroller.updateDisplay();\n\n\t}\n\tcontroller.setValue = Common.compose( function ( val ) {\n\n\t\tif ( gui.getRoot().__preset_select && controller.isModified() ) {\n\n\t\t\tmarkPresetModified( gui.getRoot(), true );\n\n\t\t}\n\t\treturn val;\n\n\t}, controller.setValue );\n\n}\nfunction recallSavedValue( gui, controller ) {\n\n\tvar root = gui.getRoot();\n\tvar matchedIndex = root.__rememberedObjects.indexOf( controller.object );\n\tif ( matchedIndex !== - 1 ) {\n\n\t\tvar controllerMap = root.__rememberedObjectIndecesToControllers[ matchedIndex ];\n\t\tif ( controllerMap === undefined ) {\n\n\t\t\tcontrollerMap = {};\n\t\t\troot.__rememberedObjectIndecesToControllers[ matchedIndex ] = controllerMap;\n\n\t\t}\n\t\tcontrollerMap[ controller.property ] = controller;\n\t\tif ( root.load && root.load.remembered ) {\n\n\t\t\tvar presetMap = root.load.remembered;\n\t\t\tvar preset = void 0;\n\t\t\tif ( presetMap[ gui.preset ] ) {\n\n\t\t\t\tpreset = presetMap[ gui.preset ];\n\n\t\t\t} else if ( presetMap[ DEFAULT_DEFAULT_PRESET_NAME ] ) {\n\n\t\t\t\tpreset = presetMap[ DEFAULT_DEFAULT_PRESET_NAME ];\n\n\t\t\t} else {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tif ( preset[ matchedIndex ] && preset[ matchedIndex ][ controller.property ] !== undefined ) {\n\n\t\t\t\tvar value = preset[ matchedIndex ][ controller.property ];\n\t\t\t\tcontroller.initialValue = value;\n\t\t\t\tcontroller.setValue( value );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\nfunction _add( gui, object, property, params ) {\n\n\tif ( object[ property ] === undefined ) {\n\n\t\tthrow new Error( 'Object \"' + object + '\" has no property \"' + property + '\"' );\n\n\t}\n\tvar controller = void 0;\n\tif ( params.color ) {\n\n\t\tcontroller = new ColorController( object, property );\n\n\t} else {\n\n\t\tvar factoryArgs = [ object, property ].concat( params.factoryArgs );\n\t\tcontroller = ControllerFactory.apply( gui, factoryArgs );\n\n\t}\n\tif ( params.before instanceof Controller ) {\n\n\t\tparams.before = params.before.__li;\n\n\t}\n\trecallSavedValue( gui, controller );\n\tdom.addClass( controller.domElement, 'c' );\n\tvar name = document.createElement( 'span' );\n\tdom.addClass( name, 'property-name' );\n\tname.innerHTML = controller.property;\n\tvar container = document.createElement( 'div' );\n\tcontainer.appendChild( name );\n\tcontainer.appendChild( controller.domElement );\n\tvar li = addRow( gui, container, params.before );\n\tdom.addClass( li, GUI.CLASS_CONTROLLER_ROW );\n\tif ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\n\t} else {\n\n\t\tdom.addClass( li, _typeof( controller.getValue() ) );\n\n\t}\n\taugmentController( gui, li, controller );\n\tgui.__controllers.push( controller );\n\treturn controller;\n\n}\nfunction getLocalStorageHash( gui, key ) {\n\n\treturn document.location.href + '.' + key;\n\n}\nfunction addPresetOption( gui, name, setSelected ) {\n\n\tvar opt = document.createElement( 'option' );\n\topt.innerHTML = name;\n\topt.value = name;\n\tgui.__preset_select.appendChild( opt );\n\tif ( setSelected ) {\n\n\t\tgui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n\n\t}\n\n}\nfunction showHideExplain( gui, explain ) {\n\n\texplain.style.display = gui.useLocalStorage ? 'block' : 'none';\n\n}\nfunction addSaveMenu( gui ) {\n\n\tvar div = gui.__save_row = document.createElement( 'li' );\n\tdom.addClass( gui.domElement, 'has-save' );\n\tgui.__ul.insertBefore( div, gui.__ul.firstChild );\n\tdom.addClass( div, 'save-row' );\n\tvar gears = document.createElement( 'span' );\n\tgears.innerHTML = '&nbsp;';\n\tdom.addClass( gears, 'button gears' );\n\tvar button = document.createElement( 'span' );\n\tbutton.innerHTML = 'Save';\n\tdom.addClass( button, 'button' );\n\tdom.addClass( button, 'save' );\n\tvar button2 = document.createElement( 'span' );\n\tbutton2.innerHTML = 'New';\n\tdom.addClass( button2, 'button' );\n\tdom.addClass( button2, 'save-as' );\n\tvar button3 = document.createElement( 'span' );\n\tbutton3.innerHTML = 'Revert';\n\tdom.addClass( button3, 'button' );\n\tdom.addClass( button3, 'revert' );\n\tvar select = gui.__preset_select = document.createElement( 'select' );\n\tif ( gui.load && gui.load.remembered ) {\n\n\t\tCommon.each( gui.load.remembered, function ( value, key ) {\n\n\t\t\taddPresetOption( gui, key, key === gui.preset );\n\n\t\t} );\n\n\t} else {\n\n\t\taddPresetOption( gui, DEFAULT_DEFAULT_PRESET_NAME, false );\n\n\t}\n\tdom.bind( select, 'change', function () {\n\n\t\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\t\tgui.__preset_select[ index ].innerHTML = gui.__preset_select[ index ].value;\n\n\t\t}\n\t\tgui.preset = this.value;\n\n\t} );\n\tdiv.appendChild( select );\n\tdiv.appendChild( gears );\n\tdiv.appendChild( button );\n\tdiv.appendChild( button2 );\n\tdiv.appendChild( button3 );\n\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\tvar explain = document.getElementById( 'dg-local-explain' );\n\t\tvar localStorageCheckBox = document.getElementById( 'dg-local-storage' );\n\t\tvar saveLocally = document.getElementById( 'dg-save-locally' );\n\t\tsaveLocally.style.display = 'block';\n\t\tif ( localStorage.getItem( getLocalStorageHash( gui, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorageCheckBox.setAttribute( 'checked', 'checked' );\n\n\t\t}\n\t\tshowHideExplain( gui, explain );\n\t\tdom.bind( localStorageCheckBox, 'change', function () {\n\n\t\t\tgui.useLocalStorage = ! gui.useLocalStorage;\n\t\t\tshowHideExplain( gui, explain );\n\n\t\t} );\n\n\t}\n\tvar newConstructorTextArea = document.getElementById( 'dg-new-constructor' );\n\tdom.bind( newConstructorTextArea, 'keydown', function ( e ) {\n\n\t\tif ( e.metaKey && ( e.which === 67 || e.keyCode === 67 ) ) {\n\n\t\t\tSAVE_DIALOGUE.hide();\n\n\t\t}\n\n\t} );\n\tdom.bind( gears, 'click', function () {\n\n\t\tnewConstructorTextArea.innerHTML = JSON.stringify( gui.getSaveObject(), undefined, 2 );\n\t\tSAVE_DIALOGUE.show();\n\t\tnewConstructorTextArea.focus();\n\t\tnewConstructorTextArea.select();\n\n\t} );\n\tdom.bind( button, 'click', function () {\n\n\t\tgui.save();\n\n\t} );\n\tdom.bind( button2, 'click', function () {\n\n\t\tvar presetName = prompt( 'Enter a new preset name.' );\n\t\tif ( presetName ) {\n\n\t\t\tgui.saveAs( presetName );\n\n\t\t}\n\n\t} );\n\tdom.bind( button3, 'click', function () {\n\n\t\tgui.revert();\n\n\t} );\n\n}\nfunction addResizeHandle( gui ) {\n\n\tvar pmouseX = void 0;\n\tgui.__resize_handle = document.createElement( 'div' );\n\tCommon.extend( gui.__resize_handle.style, {\n\t\twidth: '6px',\n\t\tmarginLeft: '-3px',\n\t\theight: '200px',\n\t\tcursor: 'ew-resize',\n\t\tposition: 'absolute'\n\t} );\n\tfunction drag( e ) {\n\n\t\te.preventDefault();\n\t\tgui.width += pmouseX - e.clientX;\n\t\tgui.onResize();\n\t\tpmouseX = e.clientX;\n\t\treturn false;\n\n\t}\n\tfunction dragStop() {\n\n\t\tdom.removeClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.unbind( window, 'mousemove', drag );\n\t\tdom.unbind( window, 'mouseup', dragStop );\n\n\t}\n\tfunction dragStart( e ) {\n\n\t\te.preventDefault();\n\t\tpmouseX = e.clientX;\n\t\tdom.addClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.bind( window, 'mousemove', drag );\n\t\tdom.bind( window, 'mouseup', dragStop );\n\t\treturn false;\n\n\t}\n\tdom.bind( gui.__resize_handle, 'mousedown', dragStart );\n\tdom.bind( gui.__closeButton, 'mousedown', dragStart );\n\tgui.domElement.insertBefore( gui.__resize_handle, gui.domElement.firstElementChild );\n\n}\nfunction setWidth( gui, w ) {\n\n\tgui.domElement.style.width = w + 'px';\n\tif ( gui.__save_row && gui.autoPlace ) {\n\n\t\tgui.__save_row.style.width = w + 'px';\n\n\t}\n\tif ( gui.__closeButton ) {\n\n\t\tgui.__closeButton.style.width = w + 'px';\n\n\t}\n\n}\nfunction getCurrentPreset( gui, useInitialValues ) {\n\n\tvar toReturn = {};\n\tCommon.each( gui.__rememberedObjects, function ( val, index ) {\n\n\t\tvar savedValues = {};\n\t\tvar controllerMap = gui.__rememberedObjectIndecesToControllers[ index ];\n\t\tCommon.each( controllerMap, function ( controller, property ) {\n\n\t\t\tsavedValues[ property ] = useInitialValues ? controller.initialValue : controller.getValue();\n\n\t\t} );\n\t\ttoReturn[ index ] = savedValues;\n\n\t} );\n\treturn toReturn;\n\n}\nfunction setPresetSelectIndex( gui ) {\n\n\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\tif ( gui.__preset_select[ index ].value === gui.preset ) {\n\n\t\t\tgui.__preset_select.selectedIndex = index;\n\n\t\t}\n\n\t}\n\n}\nfunction updateDisplays( controllerArray ) {\n\n\tif ( controllerArray.length !== 0 ) {\n\n\t\trequestAnimationFrame$1.call( window, function () {\n\n\t\t\tupdateDisplays( controllerArray );\n\n\t\t} );\n\n\t}\n\tCommon.each( controllerArray, function ( c ) {\n\n\t\tc.updateDisplay();\n\n\t} );\n\n}\n\nvar color = {\n\tColor: Color,\n\tmath: ColorMath,\n\tinterpret: interpret\n};\nvar controllers = {\n\tController: Controller,\n\tBooleanController: BooleanController,\n\tOptionController: OptionController,\n\tStringController: StringController,\n\tNumberController: NumberController,\n\tNumberControllerBox: NumberControllerBox,\n\tNumberControllerSlider: NumberControllerSlider,\n\tFunctionController: FunctionController,\n\tColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n\tcolor: color,\n\tcontrollers: controllers,\n\tdom: dom$1,\n\tgui: gui,\n\tGUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n"],"sourceRoot":""}